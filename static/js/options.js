var e,t={17753:(e,t,n)=>{n.d(t,{J2:()=>h,M$:()=>d,jI:()=>l});var s=n(44557),a=n(14065),o=n(46694),i=n(89207),r=n(89739);function l(e){return c.apply(this,arguments)}function c(){return(c=(0,a.A)((function*(e){return(0,i.S6)({method:"POST",url:`${r.kD}/plugin/detect_lang`,params:(0,o.wH)(),data:{raw_text:e}})}))).apply(this,arguments)}function d(e){return u.apply(this,arguments)}function u(){return(u=(0,a.A)((function*(e){let t=(0,o.wH)();return e&&(t=(0,s.A)((0,s.A)({},t),{},{language:e})),(0,i.S6)({method:"POST",url:`${r.kD}/skill/recommend`,params:t})}))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=(0,a.A)((function*(e){const t=(0,o.wH)();return(0,i.S6)({method:"POST",url:`${r.Jk}/user_voice/recommend`,params:t,data:e})}))).apply(this,arguments)}},89207:(e,t,n)=>{n.d(t,{S6:()=>i,ew:()=>r,sY:()=>o});var s=n(14065),a=n(39275);const o=function(){var e=(0,s.A)((function*(e,t){const{data:n,success:s,error:o}=yield(0,a.cs)({name:"http-request",body:{config:e,options:t}});return s?n:o}));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=(0,s.A)((function*(e,t){try{const{data:n,success:s,error:o}=yield(0,a.cs)({name:"http-request",body:{config:e,options:t}});if(!s)throw o;const{code:i,msg:r,data:l}=n;if(void 0!==i&&0!==i)throw new Error(JSON.stringify({message:`code invalid error: ${i}, ${r}`,code:i}));return l}catch(n){return n}}));return function(t,n){return e.apply(this,arguments)}}(),r=function(){var e=(0,s.A)((function*(e,t){try{const{data:n,success:s,error:o}=yield(0,a.cs)({name:"http-request",body:{config:e,options:t}});if(!s)throw o;const{code:i,msg:r}=n;if(void 0!==i&&0!==i)throw new Error(`code invalid error: ${i}, ${r}`);return n}catch(n){return n}}));return function(t,n){return e.apply(this,arguments)}}()},46694:(e,t,n)=>{n.d(t,{IP:()=>r,Ql:()=>c,wH:()=>l});var s=n(71905),a=n(58735),o=n(46878),i=n(89739);const r=()=>{const{ttWid:e,webId:t=""}=(0,s.bU)();return e?t:"0"},l=()=>{var e;const{country:t,teaWebId:n,teaUuid:l}=(0,s.bU)();return{version_code:a.br,language:(0,o.XQ)(),browser_language:navigator.language,device_platform:i.lx,aid:i.sZ,pkg_type:i.eG,device_id:r(),web_id:null!==(e=null!=n?n:l)&&void 0!==e?e:"0",is_new_user:"0",region:t,sys_region:t,"use-olympus-account":1,samantha_web:"1"}},c=()=>{const e={},{isEnableDebug:t,extEnv:n}=(0,s.MI)();return t&&n&&(e["x-tt-env"]=n,e["production"===i.nD?"x-use-ppe":"x-use-boe"]="1"),e}},38042:(e,t,n)=>{n.d(t,{XQ:()=>D});var s=n(44557),a=n(14065),o=n(78449),i=n(26368),r=n(16604),l=n(72931),c=n(46745),d=n(71905),u=n(88034),h=n(18867),m=n(37311),p=n(26158),g=n(64903),_=n(4601),v=n(59292),f=n(46878),x=n(89739),I=n(305),b=n(48436),A=n(61540),y=n(41650),j=n(41121),w=n(66006),S=n(9639),k=n(46043),M=n(28920),C=n(77960),E=n(45602),N=n(30457),T=n(5644),L=n(51463),P=n(99824),R=n(19552);function D(e){if((0,d.TK)("authInfo").isAuthenticated)switch(e.collectionType){case b.X.TranslateResult:case b.X.ExplainResult:case b.X.TextFragment:!function(e){const{actionMessages:t,currentAction:n,messageCursor:s,boxVisible:a}=S.t_.getState();if(a){var o,i,r;const{messages:a}=w.P.getState(),l=null!==(i=(null!==(o=t[n])&&void 0!==o?o:[])[s])&&void 0!==i?i:"",{text:c="",body:d,originParam:u}=a[l]||{};if(void 0===(null==d||null===(r=d.message)||void 0===r?void 0:r.message_id))return;n===P.EU.explain?((0,y.o2)(e.collectFrom,y.p6.ExplainResult),(0,T.kg)((()=>(0,k.Lv)(d.message.message_id,{selectionText:(null==u?void 0:u.text)||"",explainedText:(0,g.q4)(c)})),(e=>`${x.Vl}/${e.id}`)).then((t=>{var n;null===(n=e.onSuccess)||void 0===n||n.call(e,t.id),(0,y.mL)(e.collectFrom,void 0!==t.id,y.p6.ExplainResult,`${t.id}`)})).catch((()=>{(0,y.mL)(e.collectFrom,!1,y.p6.ExplainResult)})).finally((()=>{var t;null===(t=e.onFinally)||void 0===t||t.call(e)}))):((0,y.o2)(e.collectFrom,y.p6.TranslateResult),(0,T.kg)((()=>{var e;return(0,k.CE)(d.message.message_id,{selectionText:(null==u?void 0:u.text)||"",translate_lang:(null==d||null===(e=d.message)||void 0===e||null===(e=e.ext)||void 0===e?void 0:e.translate)||(0,f.XQ)(),translatedText:(0,g.q4)(c)})}),(e=>`${x.Vl}/${e.id}`)).then((t=>{var n;null===(n=e.onSuccess)||void 0===n||n.call(e,t.id),(0,y.mL)(e.collectFrom,void 0!==t.id,y.p6.TranslateResult,`${t.id}`)})).catch((()=>{(0,y.mL)(e.collectFrom,!1,y.p6.TranslateResult)})).finally((()=>{var t;null===(t=e.onFinally)||void 0===t||t.call(e)})))}else!function(e){const t=S.t_.getState().simpleSelectionBaseInfo;if(void 0===t.anchorOffset)return;const n={contextText:t.contextText,selectionText:t.text,anchorOffset:t.anchorOffset};(0,y.o2)(e.collectFrom,y.p6.textfragment),(0,T.kg)((()=>(0,k.gP)(n)),(e=>`${x.Vl}/${e.id}`)).then((t=>{var n;null===(n=e.onSuccess)||void 0===n||n.call(e,t.id),(0,y.mL)(e.collectFrom,void 0!==t.id,y.p6.textfragment,`${t.id}`)})).catch((()=>{(0,y.mL)(e.collectFrom,!1,y.p6.textfragment)})).finally((()=>{var t;null===(t=e.onFinally)||void 0===t||t.call(e)}))}(e)}(e);break;case b.X.SearchResult:!function(e){const t=e.messageId;if(void 0===t||void 0===e.localMessageId)return;(0,y.o2)(e.collectFrom,y.p6.searchresult);const n=w.P.getState().messages[e.localMessageId],{text:s=""}=n||{},a={searchText:e.userInput||"",generatedText:s};(0,T.kg)((()=>(0,k.Qx)(t,a)),(e=>`${x.Vl}/${e.id}`)).then((t=>{var n;null===(n=e.onSuccess)||void 0===n||n.call(e,t.id),(0,y.mL)(e.collectFrom,void 0!==t.id,y.p6.searchresult,`${t.id}`)})).catch((()=>{(0,y.mL)(e.collectFrom,!1,y.p6.searchresult)})).finally((()=>{var t;null===(t=e.onFinally)||void 0===t||t.call(e)}))}(e);break;case b.X.Web:F(e);break;case b.X.Pdf:B(e);break;case b.X.VideoSummary:K(e);break;case b.X.SocialWebCard:!function(e){const{getSocialWebCardContent:t}=e;if(!t)return;(0,T.kg)((0,a.A)((function*(){const e=yield t();if(!e)throw new Error("\u83b7\u53d6\u793e\u4ea4\u5361\u7247\u6536\u85cf\u4fe1\u606f\u51fa\u9519");const{text_content:n,html_content:s,cover_image_url:a="",source_url:o,content_height:i,content_width:r,body_content:l,content_img_key:c=""}=e;return yield(0,k.y6)({text_content:n,html_content:(0,m.NS)(s,i,r),cover_image_url:a,body_content:l.substr(0,500),content_img_key:c},o)})),(e=>V(e.id.toString()))).then((t=>{var n;null===(n=e.onSuccess)||void 0===n||n.call(e,t.id)})).finally((()=>{var t;null===(t=e.onFinally)||void 0===t||t.call(e)}))}(e)}else(0,N.DT)({trackMeta:{previous_page:"web",login_entrance:"web"}})}const F=function(){var e=(0,a.A)((function*(e){if((0,y.o2)(e.collectFrom,y.p6.web),(e=>{if((0,o.OM)())return H(e),!0;if((0,o.ax)()){const t=new URL(location.href),{setVideoId:n,setVideoTitle:s}=j.e.getState(),a=t.searchParams.get("bvid");return n(a||""),s(document.title),C._1.updateVideoSummaryId(""),C._1.updateVideoHighlightsId(""),a?(0,E.S)({videoId:a}).then((e=>C._1.updateTranscriptData.bind(C._1)(e.subtitles))).finally((()=>H(e))):H(e),!0}return!1})(e))return;const t={text_content:"",html_content:"",title:"",dir:"",description:"",cover_image_url:""};let n;if(e.getWebContent||(n=yield(0,p.q)(document),n))(0,T.kg)((0,a.A)((function*(){let s,a;if(e.getWebContent){const n=yield e.getWebContent();if(!n)throw new Error("\u83b7\u53d6\u7f51\u7ad9\u6536\u85cf\u4fe1\u606f\u51fa\u9519");t.text_content=n.text_content,t.html_content=(0,m.NS)(n.html_content,n.content_height,n.content_width),t.title=n.title,t.dir=n.dir,t.cover_image_url=n.cover_image_url,t.description=n.description,s=n.source_url}else if(n){const{imageUrl:e,desc:s}=yield(0,N.l_)();t.text_content=n.textContent,t.html_content=n.content,t.title=n.title,t.dir=n.dir,t.cover_image_url=e,t.description=s}a=yield(0,M.K)(c.e.Web,t.text_content);const o=(0,i.zV)(yield(0,k.N0)(),"image/jpeg"),r=yield(0,v.r)(o);return t.snapshot_img_key=r,yield(0,k.aZ)(t,a,s)})),(e=>`${x.Vl}/${e.id}`)).then((t=>{var n;h.A.emit("onWebpageSaved",t.id),null===(n=e.onSuccess)||void 0===n||n.call(e,t.id),(0,y.mL)(e.collectFrom,void 0!==t.id,y.p6.web,`${t.id}`)})).catch((()=>{(0,y.mL)(e.collectFrom,!1,y.p6.web)})).finally((()=>{var t;null===(t=e.onFinally)||void 0===t||t.call(e)}));else{(0,u.Ay)(location.href)&&(0,u.ow)()&&!window.location.protocol.startsWith("file:")&&B(e)}}));return function(t){return e.apply(this,arguments)}}();function B(e){(0,y.o2)(e.collectFrom,y.p6.pdf),(0,T.kg)((0,a.A)((function*(){const e=window.location.pathname.split("/").pop();return yield(0,k.s6)({url:window.location.href,filename:e||"pdf"})})),(e=>V(e.id.toString()))).then((t=>{var n;null===(n=e.onSuccess)||void 0===n||n.call(e,t.id),h.A.emit("onWebpageSaved",t.id),(0,y.mL)(e.collectFrom,void 0!==t.id,y.p6.pdf,`${t.id}`)})).catch((()=>{(0,y.mL)(e.collectFrom,!1,y.p6.pdf)})).finally((()=>{var t;null===(t=e.onFinally)||void 0===t||t.call(e)}))}function O(e,t=!1){const{sendMessage:n}=w.P.getState(),a=(0,d.TK)("uiLanguage");let o="",i="";const{title:l}=j.e.getState(),c={title:l,url:location.href,transcript_list:e},u={text:location.href,prompt:P.EU.youtube,browser_language:(0,r.wz)(a),current_page:(0,A.M5)(location.href),scene:I.sJ.video_click,sec_scene:I._o.video_click_summarize};return o=n((0,s.A)((0,s.A)({},u),{},{browser_youtube_transcript:{browser_youtube_summary_transcript:JSON.stringify(c)}})),t||(i=n((0,s.A)((0,s.A)({},u),{},{browser_youtube_transcript:{browser_youtube_timeline_transcript:JSON.stringify(c)}}))),{videoSummaryId:o,videoHighlightsId:i}}function U(){return(U=(0,a.A)((function*(){const e=C._1.getVideoSummaryMsgBlock(),t=C._1.getTranscriptData();let{videoSummaryId:n,videoHighlightsId:s}=e;const{videoId:a,title:o}=j.e.getState();if(!C._1.hasTranscript()||n&&s){if(!C._1.hasTranscript()){const e=yield(0,L.B9)(),t=O([{offset:0,duration:100,text:(null==e?void 0:e.textContent)||o}],!0);n=t.videoSummaryId,s=t.videoHighlightsId}}else{const e=O(C._1.getTranscriptData());n=e.videoSummaryId,s=e.videoHighlightsId,C._1.updateVideoSummaryId(n),C._1.updateVideoHighlightsId(s)}return{transcript:t,videoId:a,title:o,videoSummaryId:n,videoHighlightsId:s}}))).apply(this,arguments)}const q=function(){var e=(0,a.A)((function*(e,t,n){var s,a;const{transcript:o,videoId:i,title:r,videoSummaryId:c,videoHighlightsId:d}=e,{messages:u}=w.P.getState();let h="",m="";if(c){const{isDone:s,text:a=""}=u[c]||{},o={isDone:!0,text:""},{isDone:i,text:r=""}=d&&u[d]||o;if(h=a,m=r,!s||!i)return void setTimeout((()=>q(e,t,n)),1e3)}const p=c&&(null===(s=u[c])||void 0===s||null===(s=s.body)||void 0===s||null===(s=s.message)||void 0===s?void 0:s.message_id)||"",g=d&&(null===(a=u[d])||void 0===a||null===(a=a.body)||void 0===a||null===(a=a.message)||void 0===a?void 0:a.message_id)||"",_={summary:h,summary_msg_id:p||"",videoParams:{video_type:(0,R.Zv)(),video_url:yield(0,R.PT)(i),title:r,timeline:(0,l.Bq)(m)||[],cover_url:(0,R.mJ)(i),timeline_msg_id_str:g||"",transcript:o?JSON.stringify(o):"",highlights_message_id:d,video_duration:(0,R.qZ)()}};n({collectFrom:t,collectionType:b.X.VideoSummary,videoSummaryResult:_})}));return function(t,n,s){return e.apply(this,arguments)}}();function H(e){return z.apply(this,arguments)}function z(){return z=(0,a.A)((function*(e){(0,T.UK)();const t=yield function(){return U.apply(this,arguments)}();q(t,e.collectFrom,K)})),z.apply(this,arguments)}function K(e){if(!e.videoSummaryResult)return;const t=e.videoSummaryResult;(0,y.o2)(y.vP.video_page_summarize,y.p6.videosummary),(0,T.kg)((0,a.A)((function*(){var e,n;null!=t&&null!==(e=t.videoParams)&&void 0!==e&&null!==(e=e.cover_url)&&void 0!==e&&e.startsWith("http")&&(t.videoParams.cover_url=yield(0,_.Vv)(null==t||null===(n=t.videoParams)||void 0===n?void 0:n.cover_url));return yield(0,k.Yb)(t.summary,t.summary_msg_id,t.videoParams)})),(e=>V(e.id.toString()))).then((t=>{var n;h.A.emit("onWebpageSaved",t.id),null===(n=e.onSuccess)||void 0===n||n.call(e,t.id),(0,y.mL)(y.vP.video_page_summarize,void 0!==t.id,y.p6.videosummary,`${t.id}`)})).catch((()=>{(0,y.mL)(y.vP.video_page_summarize,!1,y.p6.videosummary)})).finally((()=>{var t;null===(t=e.onFinally)||void 0===t||t.call(e)}))}const V=e=>`${x.Vl}/${e}`},37311:(e,t,n)=>{n.d(t,{NS:()=>v,dp:()=>_});var s=n(14065),a=n(54263);const o=new Map,i=["META","STYLE","SCRIPT","NOSCRIPT"];var r=n(43423),l=n(58735),c=n(4601),d=n(59292),u=n(53435);const h=e=>{let t=e;return e.startsWith("webkit")&&(t=`-${t}`),t.replace(/([A-Z])/g,(function(e){return`-${e.toLowerCase()}`}))},m=(e,t,n,s,a)=>{try{var c;const{tagName:r}=e;if(i.includes(r))return;const d=e.getAttribute("class");if(null!=d&&d.includes(l.AC))return;Object.keys(e.dataset||{}).forEach((t=>{e.removeAttribute(`data-${h(t)}`)}));const u=window.getComputedStyle(t);if("none"===u.display)return void s.push(e);if(Object.entries(u).forEach((t=>{const[n,s]=t;if(!s||!isNaN(Number(n)))return;const a=(e=>{const t=o.get(e);if(t)return t;const n=document.createElement("div"),s=n.attachShadow({mode:"open"}),a=document.createElement(e);a.style.cssText="color: initial;",s.appendChild(a),"A"===e&&a.setAttribute("href","https://www.ciciai.com/browser-extension/landing"),document.body.insertBefore(n,document.body.firstElementChild);const i=new Map,r=window.getComputedStyle(a);return Object.entries(r).forEach((e=>{const[t,n]=e;n&&isNaN(Number(t))&&i.set(t,n)})),o.set(e,i),n.remove(),i})(r).get(n);a!==s&&(e.style[h(n)]=s)})),null!==(c=e.style.backgroundImage)&&void 0!==c&&c.includes("url")){const t=e.style.backgroundImage.substring(5,e.style.backgroundImage.length-2),n=a.get(t);n?n.push(e):a.set(t,[e])}if("IMG"===r){const{src:t}=e,n=a.get(t);n?n.push(e):a.set(t,[e])}else if("A"===r&&"A"===t.tagName)e.setAttribute("href",null==t?void 0:t.href),e.setAttribute("target","_blank");else{if("SVG"===r)return;if("VIDEO"===r){const t=e.getAttribute("poster");if(t){const n=a.get(t);n?n.push(e):a.set(t,[e])}}}for(let o=0;o<t.children.length&&o<e.children.length;o++)n.pushTask((()=>m(e.children[o],t.children[o],n,s,a)))}catch(d){(0,r.z3)("[collection] cloneDom error: ",d)}},p=function(){var e=(0,s.A)((function*(e,t){if(e)try{const n=yield(0,c.n_)(e);if(null!=n&&n.blob){const e=yield(0,d.r)(n.blob);t.forEach((t=>t.setAttribute(u.$_,e)))}}catch(n){return void(0,r.z3)("[collection] uploadImage error",n,e)}}));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=(0,s.A)((function*(e,t=!0){const n=new Map,s=[],o=[];try{(0,r.Rm)("[collection] start clone dom"),yield new Promise((i=>{const r=new a.E(i);e.forEach((e=>{const a=e.cloneNode(!0);if(t){const e=document.createElement("div");e.appendChild(a),o.push(e)}else o.push(a);r.pushTask((()=>m(a,e,r,s,n)))})),r.loop()})),(0,r.Rm)("[collection] start upload img"),yield Promise.race([Promise.all([...n].map((e=>p(e[0],e[1])))),new Promise((e=>{setTimeout((()=>{e(),(0,r.Rm)("[collection] uploadImage timeout")}),6e4)}))]),(0,r.Rm)("[collection] start remove useless tag"),s.forEach((e=>e.remove())),o.forEach((e=>{e.querySelectorAll(`[class*=${l.AC}]`).forEach((e=>e.remove())),i.forEach((t=>e.querySelectorAll(t.toLocaleLowerCase()).forEach((e=>e.remove()))))}))}catch(c){(0,r.z3)("[collection] clone dom error: ",c)}return(0,r.Rm)("[collection] clone done"),o}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,s.A)((function*(e,t=!0){const n=yield g([e],t);return n.length?n[0]:e.cloneNode(!0)}));return function(t){return e.apply(this,arguments)}}(),v=(e,t,n)=>{const s=document.createElement("div");s.innerHTML='<iframe\n  scrolling="no"\n  frameBorder="no"\n  allowFullScreen="true"\n  sandbox="allow-popups allow-same-origin"></iframe>';const a=s.querySelector("iframe");return a?(a.style.width="100%",a.style.height=`${t}px`,a.style.width=`${n}px`,a.srcdoc=`<html>\n        <head>\n          <style>\n            * {\n              cursor: unset !important;\n            }\n            body {\n              padding: 0;\n              margin: 0;\n            }\n            a {\n              cursor: pointer !important;\n            }\n          </style>\n        </head>\n        <body>\n          ${e}\n        </body>\n      </html>`,s.innerHTML):e}},58735:(e,t,n)=>{n.d(t,{AC:()=>m,BW:()=>g,Be:()=>p,Cp:()=>i,EP:()=>r,JE:()=>l,QN:()=>a,R3:()=>u,Yq:()=>h,br:()=>o,j0:()=>d,o$:()=>s,o2:()=>c});const s="cici_host_style",a="static/css/content_list.json",o=20650,i="/browser-extension",r=`${i}/login`,l=`${i}/welcome`,c=`${i}/landing`,d=`${i}/uninstall`,u="doubao",h=`${u}-ai-assistant`,m=`${u}-ai-collection-assistant`,p="710022013",g="710012001"},69021:(e,t,n)=>{n.d(t,{NR:()=>o});var s=n(14065),a=(n(11855),n(75541),n(58735));n(31525);const o=function(){var e=(0,s.A)((function*(e,t){try{const n=yield fetch(chrome.runtime.getURL(t)),s=(yield n.json()).content_css,o=yield Promise.all(s.map((e=>fetch(chrome.runtime.getURL(e))))),i=yield Promise.all(o.map((e=>e.text()))),r=i.join("\n"),l=document.createElement("style");l.className=a.o$,l.textContent=r,e.prepend(l)}catch(n){console.error(`Error applying styles: ${n.message}`)}}));return function(t,n){return e.apply(this,arguments)}}()},41351:(e,t,n)=>{n.d(t,{_:()=>s});const s={windowId:-1,get isInSidePanel(){return location.href.startsWith(chrome.runtime.getURL("side_panel.html"))}}},34350:(e,t,n)=>{n.d(t,{Gj:()=>r,HF:()=>h,L2:()=>l,Nf:()=>c,Yh:()=>d,od:()=>m});var s,a,o=n(14065);const i=null===(s=globalThis.chrome)||void 0===s?void 0:s.runtime,r=()=>{if(!i)throw new Error("Extension runtime is not available");return i},l=(null===(a=globalThis.chrome)||void 0===a||a.tabs,()=>"\u8c46\u5305");const c=()=>chrome.runtime.getURL("assets/icon.png"),d=e=>chrome.runtime.getURL(`options.html${null!=e?e:""}`);let u="";const h=()=>(u||(u=chrome.runtime.getManifest().version),u),m=function(){var e=(0,o.A)((function*(e){return yield chrome.i18n.detectLanguage(e)}));return function(t){return e.apply(this,arguments)}}()},30065:(e,t,n)=>{n.d(t,{c6:()=>l,vF:()=>i});var s=n(67697),a=n(71431);const o=new(n(41886).h);(0,s.b)({clients:[o]});const i=s.vF,r=new s.BO(a.A),l=s.vF.createLoggerWith({clients:[r],ctx:{meta:{}}})},62325:(e,t,n)=>{n.d(t,{nW:()=>s});n(11855);const s=e=>/^https:\/\/mail\.google\.com\/mail\/u\/\d+\//.test(e)},83712:(e,t,n)=>{n.d(t,{UL:()=>i});var s=n(33451),a=n(43423);n(34350);const o=["tabId"];function i(e,t=1e4){const{tabId:n}=e,i=(0,s.A)(e,o);return Promise.race([new Promise((e=>{try{chrome.tabs.sendMessage(n,i,(t=>{var n;chrome.runtime.lastError?("tab-activated"!==i.name&&(0,a.z3)(`[ms][bg][runtime.lastError]${i.name}`,chrome.runtime.lastError),e({success:!1,error:new Error(`[${i.name}]${null===(n=chrome.runtime.lastError)||void 0===n?void 0:n.message}`),data:t})):null!=t&&t.__hasError?e({success:!1,error:new Error(t.errorMessage)}):e({success:!0,data:t})}))}catch(t){e({success:!1,error:t})}})),new Promise((e=>{setTimeout((()=>e({success:!1,error:new Error("timeout")})),t)}))])}},65144:(e,t,n)=>{n.d(t,{F8:()=>f,RA:()=>v});var s=n(44557),a=n(10633),o=n(26937),i=n(58414),r=n(51484),l=n(79935),c=n(63529),d=n(72959),u=n(50427),h=n(22083),m=n(41666),p=n(13748),g=n(34350),_=n(34198);const v=()=>"public";const f=new class{constructor(e){var t,n,d,f,x,I,b,A,y,j;(0,a.A)(this,"jsMonitor",void 0),(0,a.A)(this,"promiseMonitor",void 0),(0,a.A)(this,"fetchMonitor",void 0),(0,a.A)(this,"crashMonitor",void 0),(0,a.A)(this,"bid",void 0),(0,a.A)(this,"crashLog",void 0),(0,a.A)(this,"region",void 0),(0,a.A)(this,"_options",void 0),(0,a.A)(this,"client",void 0),(0,a.A)(this,"prepared",!1),(0,a.A)(this,"start",((e={})=>{if(self){const t=(0,c.m)(),n=(0,g.HF)();this.client.init((0,s.A)({env:v(),release:n,version:n,bid:this.bid,transport:{get:t.get,post:t.post}},e)),this.client.start(),this.runBgMonitors(),this.addMessageListeners(),(0,m.sN)(this),this.prepared=!0}})),(0,a.A)(this,"config",(e=>{this.client.config(e)})),(0,a.A)(this,"runBgMonitors",(()=>{var e;(this.jsMonitor&&new i.A(this.region),this.promiseMonitor&&new o.A(this.region),this.fetchMonitor)&&new r.A({region:this.region,rule:null===(e=this._options.plugins)||void 0===e?void 0:e.fetchInterceptRule});this.crashMonitor&&new l.A(this.region,this.crashLog)})),(0,a.A)(this,"addMessageListeners",(()=>{const e=this,t={name:"slardar-message",handle:t=>{const{type:n,data:s}=t||{};switch(n){case h.O4.CONTENT_EVENT:e.sendEvent(s);break;case h.O4.CONTENT_LOG:case h.O4.CONTENT_PERF_EVENT:e.sendLog(s)}}};(0,p.c)(t)})),(0,a.A)(this,"sendEvent",(e=>{var t,n;this.prepared&&(null===(t=(n=this.client).sendEvent)||void 0===t||t.call(n,e),(0,_.v)({type:"slardar",payload:e,action:"event"}))})),(0,a.A)(this,"sendLog",(e=>{var t,n;this.prepared&&(null===(t=(n=this.client).sendLog)||void 0===t||t.call(n,e),(0,_.v)({type:"slardar",payload:e,action:"log"}))})),this.jsMonitor=null===(t=null==e||null===(n=e.plugins)||void 0===n?void 0:n.jsMonitor)||void 0===t||t,this.promiseMonitor=null===(d=null==e||null===(f=e.plugins)||void 0===f?void 0:f.promiseMonitor)||void 0===d||d,this.fetchMonitor=null===(x=null==e||null===(I=e.plugins)||void 0===I?void 0:I.fetchMonitor)||void 0===x||x,this.crashMonitor=null===(b=null==e||null===(A=e.plugins)||void 0===A?void 0:A.crashMonitor)||void 0===b||b,this.bid=e.bid,this.crashLog=null!==(y=null==e||null===(j=e.log)||void 0===j?void 0:j.crashLog)&&void 0!==y&&y,this.region=(0,u.J)(),this._options=e,this.client=(0,u.K)(this.region)}configExtraInfo(e){d.A.recordExtraInfo(e)}}({bid:"flow_web_ext",plugins:{promiseMonitor:!1,crashMonitor:!1}})},50427:(e,t,n)=>{n.d(t,{J:()=>c,K:()=>l});var s=n(58311),a=n(35625),o=n(5081),i=n(22083);let r=null;const l=e=>(r||(e===i.xb.CN&&(r=o.Ay),e===i.xb.MALIVA&&(r=a.Ay),e===i.xb.SG&&(r=s.Ay)),r),c=()=>i.xb.CN},88034:(e,t,n)=>{n.d(t,{Ay:()=>a,ow:()=>s});n(11855);const s=()=>{const e=document.querySelector("embed");return"EMBED"===(null==e?void 0:e.nodeName)&&"application/pdf"===(null==e?void 0:e.type)},a=e=>(e=>/^https:\/\/arxiv\.org\/abs\/\d+\.\d+/.test(e))(e)?{name:"arxiv",prevNodeQuery:"a.download-pdf"}:s()?{name:"pdf"}:null},24768:(e,t,n)=>{n.d(t,{Dd:()=>a,gw:()=>s});n(11855);window.location.href,window.location.href;const s=e=>/^https:\/\/www\.xiaoyuzhoufm\.com\/episode\/\w+/.test(e),a=e=>/^https:\/\/podcasts\.apple\.com\/\w+\/podcast\/.+\/id\w+\?i=\w+/.test(e)},99824:(e,t,n)=>{n.d(t,{AA:()=>u,EU:()=>s,HO:()=>a,Hh:()=>c,I8:()=>m,Tz:()=>r,WN:()=>d,Xt:()=>h,YN:()=>g,aX:()=>i,em:()=>_,fS:()=>p,y3:()=>o});var s={search:"search",read:"read",explain:"explain",translate:"translate",summarize:"summarize",grammar:"grammar",rewrite:"rewrite",ask:"browser_ask",browser_explain:"browser_explain",youtube:"youtube",mail:"browser_mail",copy:"copy",browser_plugin_info:"browser_plugin_info",input_skill:"input_skill",collect:"collect",adjust_skill:"adjust_skill"};[{cnName:"\u200b\u4e2d\u6587\u200b",enName:"Chinese\u200b",name:"\u4e2d\u6587",lang:"zh"},{cnName:"\u82f1\u6587\u200b",enName:"English\u200b",name:"English",lang:"en"},{cnName:"\u65e5\u8bed\u200b",enName:"Japanese\u200b",name:"\u65e5\u672c\u8a9e",lang:"ja"},{cnName:"\u97e9\u8bed\u200b",enName:"Korean\u200b",name:"\ud55c\uad6d\uc5b4",lang:"ko"},{cnName:"\u6cd5\u8bed\u200b",enName:"French\u200b",name:"Fran\xe7ais",lang:"fr"},{cnName:"\u5fb7\u8bed\u200b",enName:"German\u200b",name:"Deutsch",lang:"de"},{cnName:"\u897f\u73ed\u7259\u8bed\u200b",enName:"Spanish\u200b",name:"Espa\xf1ol",lang:"es"},{cnName:"\u4fc4\u8bed\u200b",enName:"Russian\u200b",name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",lang:"ru"},{cnName:"\u610f\u5927\u5229\u8bed\u200b",enName:"Italian\u200b",name:"Italiano",lang:"it"},{cnName:"\u8461\u8404\u7259\u8bed\u200b",enName:"Portuguese\u200b",name:"Portugu\xeas",lang:"pt"},{cnName:"\u8377\u5170\u8bed\u200b",enName:"Dutch\u200b",name:"Nederlands",lang:"nl"},{cnName:"\u745e\u5178\u8bed\u200b",enName:"Swedish\u200b",name:"Svenska",lang:"sv"},{cnName:"\u4e39\u9ea6\u8bed\u200b",enName:"Danish\u200b",name:"Dansk",lang:"da"},{cnName:"\u632a\u5a01\u8bed\u200b",enName:"Norwegian\u200b",name:"Norsk",lang:"no"},{cnName:"\u6ce2\u5170\u8bed\u200b",enName:"Polish\u200b",name:"Polski",lang:"pl"},{cnName:"\u5e0c\u814a\u8bed\u200b",enName:"Greek\u200b",name:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",lang:"el"},{cnName:"\u571f\u8033\u5176\u8bed\u200b",enName:"Turkish\u200b",name:"T\xfcrk\xe7e",lang:"tr"},{cnName:"\u8d8a\u5357\u8bed\u200b",enName:"Vietlangse\u200b",name:"Ti\u1ebfng Vi\u1ec7t",lang:"vi"},{cnName:"\u6cf0\u8bed\u200b",enName:"Thai\u200b",name:"\u0e44\u0e17\u0e22",lang:"th"},{cnName:"\u5370\u5730\u8bed\u200b",enName:"Hindi\u200b",name:"\u0939\u093f\u0928\u094d\u0926\u0940\u200b",lang:"hi"}].reduce(((e,t)=>(e[t.lang]=t.name,e)),{});const a=[{id:s.ask,prompt:"",name:"flow_web_ext_action_ask",icon:"cici"},{id:s.explain,prompt:"\u89e3\u91ca\u8fd9\u6bb5\u6587\u672c: \n\u201d\u201d\u201d\n$[text]\n\u201d\u201d\u201d",name:"flow_web_ext_action_explain",icon:"explain"},{id:s.translate,prompt:"\u628a\u4e0b\u9762\u8fd9\u6bb5\u6587\u672c\u7ffb\u8bd1\u6210\u76ee\u6807\u8bed\u8a00: $[lang]\u3002\u9700\u8981\u7ffb\u8bd1\u7684\u5185\u5bb9\u662f: \n\u201d\u201d\u201d\n$[text]\n\u201d\u201d\u201d",name:"flow_web_ext_action_translate",icon:"IconTranslateOutline"},{id:s.summarize,prompt:"\u603b\u7ed3\u4ee5\u4e0b\u5185\u5bb9: \n\u201d\u201d\u201d\n$[text]\n\u201d\u201d\u201d",name:"flow_web_ext_action_summarize",icon:"summarize"},{id:s.grammar,prompt:"\u6821\u5bf9\u5e76\u7ea0\u6b63\u8fd9\u6bb5\u6587\u5b57: \n\u201d\u201d\u201d\n$[text]\n\u201d\u201d\u201d",name:"flow_web_ext_action_grammar",icon:"check"},{id:s.adjust_skill,prompt:"\u91cd\u65b0\u8868\u8ff0\u8fd9\u6bb5\u6587\u5b57, \u4f7f\u8fd9\u6bb5\u6587\u5b57\u8868\u8ff0\u7684\u66f4\u52a0\u5408\u7406: \n\u201d\u201d\u201d\n$[text]\n\u201d\u201d\u201d",name:"modify_change_tone",icon:"adjust_skill"},{id:s.copy,prompt:"",name:"message_long_press_copy",icon:"copy"},{id:s.collect,prompt:"",name:"flow_web_ext_action_bookmarks",icon:"collect",options:{brand:"\u8c46\u5305"}}],o=(s.ask,s.grammar,s.rewrite,s.adjust_skill,s.grammar,s.rewrite,s.explain,s.translate,s.copy,s.adjust_skill,new Set([s.ask])),i=[s.explain,s.translate,s.collect],r=[s.copy],l=new Set([s.summarize]),c=(e=[])=>a.filter((t=>i.includes(t.id)&&!l.has(t.id)&&!e.includes(t.id))),d=(e=[])=>a.filter((t=>r.includes(t.id)&&!l.has(t.id)&&!e.includes(t.id))),u=[s.grammar,s.rewrite,s.collect,s.adjust_skill],h=[s.explain,s.translate,s.copy],m=(e=[])=>a.filter((t=>u.includes(t.id)&&!l.has(t.id)&&!e.includes(t.id))),p=(e=[])=>a.filter((t=>h.includes(t.id)&&!l.has(t.id)&&!e.includes(t.id))),g=a.reduce(((e,t)=>(e[t.id]=t,e)),{});const _=e=>!g[e]},51463:(e,t,n)=>{n.d(t,{B9:()=>d,Tp:()=>c});var s=n(89586);const a=10485760;class o extends Error{constructor(e,t){super(`readability: ${e}`,t)}}const i=new RegExp("^https?:\\/\\/www\\.zhihu\\.com\\/question\\/\\d+");function r(){i.test(location.href)&&(s.Readability.prototype.REGEXPS.negative=/-ad-|^kfecollection-viprecommendcard$|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i)}const l={charThreshold:500,keepClasses:!1};function c(e){const t=(e=e||document).cloneNode(!0);r();const n=new s.Readability(t,l).parse();if(n&&n.content.length>a)throw new o(`Content Length exceeds the limit of ${a} characters; ${n.content.length} found`);return n}function d(){return new Promise((e=>{"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",(()=>{e()}))})).then((()=>c(document)))}},41264:(e,t,n)=>{n.d(t,{Ay:()=>s});n(11855);const s=e=>/^http(s)?:\/\/www.baidu.com\//.test(e)?{name:"baidu",inputQuery:["input[name='wd']"],searchTag:"#searchTag",sidebarContainerQuery:"#content_right",searchParam:"wd",watchRouteChange:e=>{const t=document.getElementById("wrapper_wrapper");if(!t)return;const n=new MutationObserver((function(t){for(const n of t){if("childList"!==n.type)break;for(const t of n.addedNodes)if("container"===(null==t?void 0:t.id))return void e()}}));return n.observe(t,{childList:!0}),()=>{n.disconnect()}}}:/^https:\/\/www.google.com?(?:.\w+)?\/search\?/.test(e)?{name:"google",inputQuery:["input[name='q']","textarea[name='q']"],sidebarContainerQuery:"#rhs",searchParam:"q",customAppend(){if("lcl"===((e,t)=>new URL(t).searchParams.get(e))("tbm",window.location.href))return null;let e=document.querySelector(this.sidebarContainerQuery);if(!e){const t=document.querySelector("#rcnt");t&&(e=document.createElement("div"),e.id="rhs",t.appendChild(e))}return e}}:/^https:\/\/so.toutiao.com\/search\?/.test(e)?{name:"toutiao",inputQuery:["input[type='search']"],sidebarContainerQuery:".s-side-list",searchParam:"keyword",disabled:()=>!0}:/^https:\/\/\w+.bing.com\/search\?/.test(e)?{name:"bing",inputQuery:["[name='q']"],sidebarContainerQuery:"#b_context",searchParam:"q",containerStyle:{minWidth:470,marginLeft:-20},getPageContent:()=>[]}:null},65240:(e,t,n)=>{n.d(t,{qZ:()=>T});var s=n(14065),a=n(48485),o=n(59585),i=n.n(o),r=n(44644),l=n(53585),c=n(51242),d=n(74315),u=n(37524),h=n(51463),m=n(38042),p=n(17753),g=n(305),_=n(48436),v=n(93215),f=n(54483),x=n(41650),I=n(9639),b=n(22007),A=n(60822),y=n(33084),j=n(27675),w=n(89369),S=n(71905),k=n(99824),M=n(30065),C=n(16110);const E=(0,r.jco)(),N=function(){var e=(0,s.A)((function*(e,t){var n;A.l.getState().setIsShowSidebar(!0,t?f.cz.onboarding:f.cz.selectAssistantMenu);let s="";const o=l.K9.Search;try{var i;const[e]=yield Promise.all([(0,d.Rf)((0,p.M$)(),1500,(()=>{M.vF.persist.error({eventName:"[SELECT_BAR] - SEARCH",error:new Error("get skill res timeout")})})),(0,C.Z)()]);if(s=(null===(i=(0,a.A)(e.latest_skills,(e=>(null==e?void 0:e.skill_type)===o)))||void 0===i?void 0:i.skill_id)||"",""===s)throw new Error("search skill id is empty")}catch(b){M.vF.persist.error({message:"get skill failed",error:b})}let r={textContent:""};try{r=yield(0,h.B9)()}catch(b){M.vF.persist.error({message:"get doc failed when search",error:b})}const{convId:m,convType:_,mainBotId:v}=(0,u.IK)(),x={text:e||I.t_.getState().inputText,scene:g.sJ.highlight_search_result_tool,sec_scene:g._o.highlight_search_result_ask,extraExt:{input_skill:JSON.stringify({skill_id:s,skill_type:o,variables:{}}),earlier_search_result:"1",send_from_skill_guidance_or_suggestion:(0,S.TK)("authInfo").isAuthenticated?void 0:"1",samantha_context:JSON.stringify((0,y.k)({query_context:{web_content:(null===(n=r)||void 0===n?void 0:n.textContent)||""}})),need_create_thread:_===c.H.NewThread?"1":"0"},ctx:(0,j.Pe)(_,m,v)};yield(0,j.Bc)(_,x)}));return function(t,n){return e.apply(this,arguments)}}(),T=(e,t,n=!1)=>{(0,v.Bp)({button_name:(0,k.em)(e)?"customized_button":e,click_from:t});const{setCurrentAction:s,setBarVisible:a,setBarFakeHide:o,setBoxVisible:r,inputText:l}=I.t_.getState();if(!l)return;b.on.getState().setFloatingCardVisible(!1),b.on.getState().setSummaryActionVisible(!1);const c=(0,w.BB)({action:(0,w.OB)(e),triggerLogin:e===k.EU.ask,loginParams:{}});if(a(!1),e===k.EU.ask){if(c)return;const e=I.t_.getState().inputText;return E?(o(!0),void N(e)):void N(t===f.Z5.shortcut?e:void 0)}s(e),e!==k.EU.copy?e!==k.EU.collect?n?L(e,l):r(!0):(0,m.XQ)({collectFrom:x.vP.highlight_function_bar,collectionType:_.X.TextFragment}):i()(l)},L=function(){var e=(0,s.A)((function*(e,t){if((0,w.BB)({action:(0,w.OB)(e,"web"),loginParams:{trackMeta:{login_entrance:"sidebar_float"}}}))return;I.t_.getState().clearMessages(),A.l.getState().setIsShowSidebar(!0,f.cz.other);try{yield(0,C.Z)()}catch(l){M.vF.persist.error({message:"page load failed",error:l})}const{convId:n,convType:s,mainBotId:a}=(0,u.IK)(),o={text:t,scene:g.sJ.highlight_in_siderbar_chat,ctx:(0,j.Pe)(s,n,a)},i=(0,S.TK)("uiLanguage"),r=(0,S.TK)("translateLanguage");if([k.EU.translate,k.EU.explain].includes(e)){const t={[e]:"{}",browser_language:i,flag_browser_plugin:"1"};e===k.EU.translate&&(t[e]=r||"{}"),o.extraExt=t,o.sec_scene=e===k.EU.translate?"highlight_in_siderbar_chat_translate":"highlight_in_siderbar_chat_explain"}else{const t=P(e);o.extraExt={flag_browser_plugin:"1",browser_plugin_info:JSON.stringify({frontend_source:"plugin",custom_prompt_skill_id:e,lang:r||i,custom_ref_show_variable:{title:(null==t?void 0:t.name)||"",icon:(null==t?void 0:t.icon)||""}}),need_create_thread:s===c.H.NewThread?"1":"0"}}yield(0,j.Bc)(s,o)}));return function(t,n){return e.apply(this,arguments)}}(),P=e=>{const t=(0,S.TK)("readingPopupActions"),n=(0,S.TK)("editingPopupActions");return t.actionList.find((t=>t.id===e))||t.moreActionList.find((t=>t.id===e))||n.actionList.find((t=>t.id===e))||n.moreActionList.find((t=>t.id===e))}},71905:(e,t,n)=>{n.d(t,{Fc:()=>j,MI:()=>w,TK:()=>A,bU:()=>k,gv:()=>y,lv:()=>x,ue:()=>S,vE:()=>b});var s=n(14065),a=n(97724),o=n(16604),i=n(64978),r=n(98028),l=n(41536),c=n(58440),d=n(41543),u=n(27224),h=n(99824),m=n(13706),p=n(76482),g=n(9462);const _=(0,c.c)(),v={uuid:"",installReason:"",synced:!1,authInfo:{isAuthenticated:!1},autoTranslateSubtitles:!0,subtitleTranslateLang:"system",launchInfo:{},launchConfig:{},abTestValue:{},chatInfo:{},debugInfo:{isEnableDebug:!1,webEnv:"",extEnv:""},requestCommonParams:{},fg:{},videoSubtitleDisableAll:!1,videoSubtitleDisableHosts:[],videoSummaryDisableAll:!1,videoSummaryDisableHosts:[],podcastSummaryDisableAll:!1,podcastSummaryDisableHosts:[],chatFloatCardDisableAll:!1,chatFloatCardDisableHosts:[],sidebarButtonDisabledAll:!1,sidebarButtonDisabledHosts:[],searchDisabledAll:!1,searchDisabledHosts:[],disableSearchAddonsHosts:[],disableSearchAddonsGlobal:!0,sidebarButtonTop:.5,sidebarButtonPosition:"right",autoTranslatePageHosts:[],disableGlobalGrammar:!1,disableGrammarHosts:[],InputAssistantDisabledAll:!1,InputAssistantDisabledHosts:[],inputAssistantLang:"zh",quickDisabledAll:!1,quickDisabledHosts:[],actions:h.HO,translateLanguage:(0,o.wz)(_),themeMode:g.lG.AUTO,uiLanguage:_,voiceSpeaker:l.F,sidePanelEnabled:!0,hostId:"",PopupListMaxCount:4,readingPopupActions:{actionList:(0,h.Hh)(),moreActionList:(0,h.WN)()},editingPopupActions:{actionList:(0,h.I8)(),moreActionList:(0,h.fS)()},selectBarOnlyIcon:!1,onboardingActionRecord:(0,r.wG)(),isSelectbarMoreMenuClicked:!1,needOpenSideBar:!1,featureInfo:null,pageTranslateService:g.c$.HUOSHAN,selectTranslateService:g.c$.HUOSHAN,pageTranslateShowUnderline:!1,collectionConfig:(0,m.i)(),transPreferConfig:{tipShown:!1,langMap:{}},tabConversationMap:{},isHistoryChatsClicked:!1,shortcutsConfig:u.A,appSettings:d.K,overseaAccessibility:{},doubaoNoticeKey:"",linkPreviewDisabledAll:!1,linkPreviewDisabledHosts:[],searchUsageTimesInfo:{},readWebPageCtxConfig:{enabled:!1,hasWebPageContextDialogShow:!1},voiceSettingTipShown:!1};let f=()=>{};const x=function(){var e=(0,s.A)((function*(){f=yield(0,i.X)(v),v.synced=!0}));return function(){return e.apply(this,arguments)}}(),I=(e,t,n=!1)=>{const s=v[e];return v[e]=n?(0,a.A)(s,t):t,p.A.set(e,v[e])},b=I;function A(e){return v[e]}const y=()=>v.shortcutsConfig;function j(){return v.authInfo}function w(){return v.debugInfo}function S(){return v.launchInfo}function k(){return v.requestCommonParams}},76482:(e,t,n)=>{n.d(t,{A:()=>o,q:()=>a});var s=n(67593);const a="local",o=new s.w({area:a})},37524:(e,t,n)=>{n.d(t,{IK:()=>r});var s=n(51242),a=n(71905),o=(n(9584),n(48544)),i=n(22007);function r(){var e;const t=(0,a.TK)("authInfo"),{mainConversation:n}=(0,a.TK)("chatInfo"),r=(0,o.Mz)(o.FM.enableNewChat,!1),l=null==n?void 0:n.bot_id;if(!t.isAuthenticated||!r)return{convId:null==n?void 0:n.conversation_id,convType:s.H.Conversation,mainBotId:l};const{tabId:c}=i.on.getState().tabInfo;if(!c){return{convId:null==n?void 0:n.conversation_id,convType:s.H.Conversation,mainBotId:l}}const d=(0,a.TK)("tabConversationMap"),u=void 0===d[c]?s.H.NewThread:d[c].conversationType;return{convId:null===(e=d[c])||void 0===e?void 0:e.conversationId,convType:u,mainBotId:l}}},4580:(e,t,n)=>{n.d(t,{ab:()=>v});var s=n(44557),a=n(14065),o=(n(67697),n(11646),n(23084)),i=n(29581),r=(n(24163),n(89739)),l=(n(32572),n(76482)),c=n(30065),d=n(46694),u=n(89207);const h=`https://${r.FI}`,m=e=>t=>{try{var n;const s=null===(n=e.getState().conversationLinks[0])||void 0===n?void 0:n.conversationId,a=s?[s]:[],o={},i={};return a.forEach((e=>{var n;null!==(n=t.messageLinkMap)&&void 0!==n&&n[e]&&(o[e]=t.messageLinkMap[e].slice(Math.max(t.messageLinkMap[e].length-6,0)))})),a.forEach((e=>{var n;null!=o&&o[e]&&null!==(n=t.messageMap)&&void 0!==n&&n[e]&&(i[e]={},o[e].forEach((n=>{var s;null!==(s=t.messageMap)&&void 0!==s&&null!==(s=s[e])&&void 0!==s&&s[n.messageId]&&(i[e][n.messageId]=t.messageMap[e][n.messageId])})))})),{messageLinkMap:o,messageMap:i}}catch(s){return c.vF.persist.error({message:"ext persist state limit error",error:s instanceof Error?s:new Error(String(s))}),{}}},p=e=>{try{return{userPreferences:e.userPreferences}}catch(t){return c.vF.persist.error({message:"ext persist state limit error",error:t instanceof Error?t:new Error(String(t))}),{userPreferences:e.userPreferences}}},g=e=>{try{return{chunkTaskMap:e.chunkTaskMap}}catch(t){return c.vF.persist.error({message:"ext persist state limit error",error:t instanceof Error?t:new Error(String(t))}),{chunkTaskMap:e.chunkTaskMap}}};let _;function v(){if(_)return _;const{eventEmitter:e}=(0,o.r)({isEnableDebug:!1,store:{prefix:"flow-ext",storage:{getItem:(r=(0,a.A)((function*(e){return yield l.A.get(e)})),function(e){return r.apply(this,arguments)}),setItem:(n=(0,a.A)((function*(e,t){return yield l.A.set(e,t)})),function(e,t){return n.apply(this,arguments)}),removeItem:(t=(0,a.A)((function*(e){return yield l.A.remove(e)})),function(e){return t.apply(this,arguments)})},merge:{chatFeedStore:(e,t)=>(0,s.A)((0,s.A)({},t),e||{}),chatInputStore:(e,t)=>(0,s.A)((0,s.A)({},t),e||{}),chatMessageStore:(e,t)=>(0,s.A)((0,s.A)({},t),e||{}),chatChunkTaskStore:(e,t)=>(0,s.A)((0,s.A)({},t),e||{})},partialize:{chatInputStore:p,chatMessageStore:m(i.pU),chatChunkTaskStore:g}},http:{client:u.sY,baseURL:h,getCommonHeaders:d.Ql,getCommonParams:d.wH}});var t,n,r;return _=e,e}},24163:(e,t,n)=>{n(44557);var s=n(10633),a=n(37462),o=(n(61577),n(30457),n(46878),n(71905),n(37526)),i=n(50479),r=(n(39275),n(43423));n(32447),n(18867);new class{constructor(){(0,s.A)(this,"_recoder",void 0),(0,s.A)(this,"_recoderName",""),(0,s.A)(this,"start",((e,t="cici_im_fetch_stream_action_perf")=>{const n=o.Qz.get("cici_summary_page_action_perf");n?(this._recoderName="cici_summary_page_action_perf",this._recoder=n,this._recoder.mark(e)):(this._recoder=o.Qz.create(t,!0),this._recoderName=t,this._recoder.mark(e)),(0,r.Rm)(`[ts] ImCorePerfRecoder start ${this._recoderName}[${e}]`)})),(0,s.A)(this,"mark",((e,t="cici_im_fetch_stream_action_perf")=>{this._recoder?((0,r.Rm)(`[ts] ImCorePerfRecoder mark ${this._recoderName}[${e}]`),this._recoder.mark(e)):this.start(e,t)})),(0,s.A)(this,"end",((e,t={})=>{this._recoder&&((0,r.Rm)(`[ts] ImCorePerfRecoder end ${this._recoderName}[${e}], categories: `,t),this._recoder.end(e,t),o.Qz.remove(this._recoderName),this._recoderName="",this._recoder=void 0)}))}},(()=>{const e=(0,i.c)("im-sdk-socket")})();a.A,a.A},5644:(e,t,n)=>{n.d(t,{UK:()=>x,kg:()=>I});var s=n(11855),a=n(29019),o=n.n(a),i=n(34944),r=n(31525),l=n(24473),c=n(69021),d=n(58735),u=n(16418),h=n(63159);const m=i.EY.create();function p(){return`popup-${r.m.getInstance().getHostId()}`}const g=e=>{const t=p();let n=document.getElementById(t);if(n)return null==e||e(),()=>{var e;return(null===(e=document.getElementById(t))||void 0===e||null===(e=e.shadowRoot)||void 0===e?void 0:e.querySelector("body"))||document.body};n=document.createElement("div"),n.style.width="0",n.style.height="0",n.style.position="absolute",n.id=t,n.style.zIndex="200000";const s=n.attachShadow({mode:"open"}),a=document.createElement("body");return a.classList.add("cici-ext-container"),s.appendChild(a),document.body.prepend(n),m.config({getPopupContainer:()=>{var e;const n=null===(e=document.getElementById(t))||void 0===e||null===(e=e.shadowRoot)||void 0===e?void 0:e.querySelector("body");return setTimeout((()=>{const e=null==n?void 0:n.querySelector('div.semi-toast-wrapper[id^="toast"]');e&&(e.id=`_${e.id}`)})),n||document.body}}),(0,c.NR)(s,d.QN).finally((()=>null==e?void 0:e())),(0,r.A)((()=>{var e;null===(e=document.getElementById(t))||void 0===e||e.remove()})),()=>{var e;return(null===(e=document.getElementById(t))||void 0===e||null===(e=e.shadowRoot)||void 0===e?void 0:e.querySelector("body"))||document.body}},_=e=>{const t=(0,l.Uk)(),n=(0,s.useCallback)((()=>{window.open(e.infoUrl)}),[e]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:o()(u.A.toastContainer),"data-testid":"collect-toast-success",children:[(0,h.jsx)("div",{className:o()(u.A.text),children:t("flow_web_ext_bookmarks_saved")}),(0,h.jsx)("div",{className:o()(u.A.linkToInfo),onClick:n,children:t("flow_web_ext_bookmarks_saved_view")})]})})},v=()=>{const e=(0,l.Uk)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:o()(u.A.toastContainer),children:(0,h.jsx)("div",{className:o()(u.A.loadingText),children:e("flow_web_ext_bookmarks_saving")})})})},f=()=>{const e=(0,l.Uk)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:o()(u.A.toastContainer),children:(0,h.jsx)("div",{className:o()(u.A.errorText),children:e("flow_web_ext_bookmarks_failed")})})})};function x(){const e={content:(0,h.jsx)(v,{}),duration:0,showClose:!1,className:o()(u.A.toastLoadingCard),stack:!1,icon:(0,h.jsx)(i.tK,{}),id:"1",zIndex:99999};m.close("1"),g((()=>m.info(e)))}function I(e,t){return x(),e().then((e=>(function(e){const t={content:(0,h.jsx)(_,{infoUrl:e.infoUrl}),duration:3,showClose:!1,className:o()(u.A.toastCard),stack:!1,id:"2",zIndex:99999};m.close("1"),g((()=>m.success(t)))}({infoUrl:t(e)}),e))).catch((e=>(function(){const e={content:(0,h.jsx)(f,{}),duration:3,showClose:!1,className:o()(u.A.toastErrorCard),stack:!1,id:"3",zIndex:99999};m.close("1"),g((()=>m.error(e)))}(),e)))}},30457:(e,t,n)=>{n.d(t,{DT:()=>h,l_:()=>m});var s=n(14065),a=n(44557),o=n(38855),i=n(4601),r=n(89739),l=n(77246),c=n(39275),d=(n(43423),n(58735)),u=n(2248);const h=e=>{if(!location.href.includes(`${r.FI}${d.EP}`))if((0,u.nr)()){const{trackMeta:t}=e||{};window.open(function(e){const t={from:"ext"};return e&&(t.extra=btoa(JSON.stringify(e))),(0,o.ID)(`https://${r.FI}/browser-extension/login`,t)}({trackMeta:t}),"_blank")}else(0,c.cs)({name:"open-login-window",body:(0,a.A)((0,a.A)((0,a.A)({},(0,l.c)()),e),{},{clearWindow:(0,u.fv)()})})},m=function(){var e=(0,s.A)((function*(){var e,t,n;let s=(null===(e=document.querySelector('meta[property="og:image"]'))||void 0===e?void 0:e.getAttribute("content"))||"";const a=(null===(t=document.querySelector('meta[property="og:description"]'))||void 0===t?void 0:t.getAttribute("content"))||(null===(n=document.querySelector('meta[name="description"]'))||void 0===n?void 0:n.getAttribute("content"))||"";try{s&&(s=yield(0,i.Vv)(s))}catch(o){console.error("image\u83b7\u53d6\u5931\u8d25!")}return{imageUrl:s,desc:a}}));return function(){return e.apply(this,arguments)}}()},18705:(e,t,n)=>{n.d(t,{E:()=>zt,I:()=>Yt,Io:()=>et,Ll:()=>Vt,PW:()=>Lt,Pg:()=>Kt,Pl:()=>st,RH:()=>Je,bz:()=>vt,de:()=>ot,fz:()=>Nt,gz:()=>yt,jk:()=>at,rZ:()=>tt,wO:()=>Ht,xV:()=>nt});var s=n(44557),a=(n(11855),n(30435)),o=n(88035),i=n(12478),r=n(34350),l=n(30434),c=n(9188),d=n(23295),u=n(99050),h=n(53460),m=n(47137),p=n(82005),g=n(14080),_=n(85674),v=n(29114),f=n(9257),x=n(97216),I=n(36165),b=n(37767),A=n(65959),y=n(51487),j=n(21568),w=n(91445),S=n(94303),k=n(35018),M=n(8647),C=n(4584),E=n(19121),N=n(66978),T=n(48606),L=n(53897),P=n(14884),R=n(95589),D=n(77621),F=n(99155),B=n(48158),O=n(94280),U=n(80816),q=n(2764),H=n(88005),z=n(2905),K=n(91774),V=n(42859),W=n(62320),G=n(93078),Q=n(70601),Y=n(71141),$=n(16507),X=n(89900),Z=n(47455),J=n(88739),ee=n(78236),te=n(78031),ne=n(10142),se=n(70983),ae=n(95503),oe=n(59501),ie=n(34998),re=n(81160),le=n(78518),ce=n(13609),de=n(14357),ue=n(77816),he=n(72005),me=n(9277),pe=n(98525),ge=n(54704),_e=n(80493),ve=n(4790),fe=n(76262),xe=n(99804),Ie=n(24669),be=n(17177),Ae=n(45854),ye=n(96742),je=n(69016),we=n(17419),Se=n(42209),ke=n(85586),Me=n(52490),Ce=n(83234),Ee=n(97968),Ne=n(62976),Te=n(66645),Le=n(18327),Pe=n(73399),Re=n(52177),De=n(97303),Fe=n(91832),Be=n(27103),Oe=n(10460),Ue=n(15854),qe=n(24941),He=n(65228),ze=n(62986),Ke=n(54676),Ve=n(52441),We=n(96747),Ge=n(19154),Qe=n(73518),Ye=n(74569),$e=n(40736),Xe=n(31538),Ze=n(63159);(0,o.a)((0,Ze.jsx)(je.h,{})),(0,o.a)((0,Ze.jsx)(ye.h,{})),(0,o.a)((0,Ze.jsx)(Ee.h,{})),(0,o.a)((0,Ze.jsx)(fe.h,{}));const Je=(0,o.a)((0,Ze.jsx)(De.h,{})),et=(0,o.a)((0,Ze.jsx)(Fe.h,{})),tt=(0,o.a)((0,Ze.jsx)(Re.h,{})),nt=(0,o.a)((0,Ze.jsx)(Be.h,{})),st=(0,o.a)((0,Ze.jsx)(re.h,{})),at=((0,o.a)((0,Ze.jsx)(Xe.h,{})),(0,o.a)((0,Ze.jsx)(ze.h,{})),(0,o.a)((0,Ze.jsx)(ne.h,{}))),ot=((0,o.a)((0,Ze.jsx)(ce.h,{})),(0,o.a)((0,Ze.jsx)(ie.h,{}))),it=(0,o.a)((0,Ze.jsx)(te.h,{})),rt=(0,o.a)((0,Ze.jsx)(Z.h,{})),lt=(0,o.a)((0,Ze.jsx)(V.h,{})),ct=(0,o.a)((0,Ze.jsx)(H.h,{})),dt=(0,o.a)((0,Ze.jsx)(F.h,{})),ut=(0,o.a)((0,Ze.jsx)(b.h,{})),ht=(0,o.a)((0,Ze.jsx)(f.h,{})),mt=(0,o.a)((0,Ze.jsx)(_.h,{})),pt=(0,o.a)((0,Ze.jsx)(g.h,{})),gt=(0,o.a)((0,Ze.jsx)(l.h,{})),_t=(0,o.a)((0,Ze.jsx)(W.h,{})),vt=(0,o.a)((0,Ze.jsx)(Q.h,{})),ft=((0,o.a)((0,Ze.jsx)(Y.h,{})),(0,o.a)((0,Ze.jsx)(v.h,{}))),xt=(0,o.a)((0,Ze.jsx)(X.h,{})),It=(0,o.a)((0,Ze.jsx)(N.h,{})),bt=((0,o.a)((0,Ze.jsx)(T.h,{})),(0,o.a)((0,Ze.jsx)(y.h,{}))),At=((0,o.a)((0,Ze.jsx)(j.h,{})),(0,o.a)((0,Ze.jsx)(z.h,{}))),yt=(0,o.a)((0,Ze.jsx)(J.h,{})),jt=((0,o.a)((0,Ze.jsx)(q.h,{})),(0,o.a)((0,Ze.jsx)(ae.h,{}))),wt=(0,o.a)((0,Ze.jsx)(M.h,{})),St=((0,o.a)((0,Ze.jsx)(C.h,{})),(0,o.a)((0,Ze.jsx)(P.h,{}))),kt=(0,o.a)((0,Ze.jsx)(I.h,{})),Mt=(0,o.a)((0,Ze.jsx)(w.h,{})),Ct=(0,o.a)((0,Ze.jsx)(S.h,{})),Et=((0,o.a)((0,Ze.jsx)(G.h,{})),(0,o.a)((0,Ze.jsx)(de.h,{})),(0,o.a)((0,Ze.jsx)(m.h,{})),(0,o.a)((0,Ze.jsx)(p.h,{})),(0,o.a)((0,Ze.jsx)(h.h,{})),(0,o.a)((0,Ze.jsx)(O.h,{}))),Nt=(0,o.a)((0,Ze.jsx)(U.h,{})),Tt=(0,o.a)((0,Ze.jsx)(K.h,{})),Lt=(0,o.a)((0,Ze.jsx)(k.h,{})),Pt=(0,o.a)((0,Ze.jsx)(c.h,{})),Rt=(0,o.a)((0,Ze.jsx)(D.h,{})),Dt=(0,o.a)((0,Ze.jsx)(d.h,{})),Ft=((0,o.a)((0,Ze.jsx)(Ge.h,{})),(0,o.a)((0,Ze.jsx)($e.h,{})),(0,o.a)((0,Ze.jsx)(pe.h,{})),(0,o.a)((0,Ze.jsx)(Le.h,{})),(0,o.a)((0,Ze.jsx)(Pe.h,{})),(0,o.a)((0,Ze.jsx)(xe.h,{}))),Bt=((0,o.a)((0,Ze.jsx)(B.h,{})),(0,o.a)((0,Ze.jsx)(be.h,{}))),Ot=((0,o.a)((0,Ze.jsx)(Ue.h,{})),(0,o.a)((0,Ze.jsx)(qe.h,{})),(0,o.a)((0,Ze.jsx)(Ie.h,{}))),Ut=((0,o.a)((0,Ze.jsx)(A.h,{})),(0,o.a)((0,Ze.jsx)(R.h,{}))),qt=((0,o.a)((0,Ze.jsx)(u.h,{})),(0,o.a)((0,Ze.jsx)(se.h,{})),(0,o.a)((0,Ze.jsx)($.h,{}))),Ht=((0,o.a)((0,Ze.jsx)(ee.h,{})),(0,o.a)((0,Ze.jsx)(L.h,{})),(0,o.a)((0,Ze.jsx)(E.h,{})),(0,o.a)((0,Ze.jsx)(le.h,{})),(0,o.a)((0,Ze.jsx)(Oe.h,{})),(0,o.a)((0,Ze.jsx)(Te.h,{})),(0,o.a)((0,Ze.jsx)(he.h,{})),(0,o.a)((0,Ze.jsx)(ge.h,{}))),zt=((0,o.a)((0,Ze.jsx)(ke.h,{})),(0,o.a)((0,Ze.jsx)(Ne.h,{})),(0,o.a)((0,Ze.jsx)(ve.h,{})),(0,o.a)((0,Ze.jsx)(ue.h,{})),(0,o.a)((0,Ze.jsx)(We.h,{})),(0,o.a)((0,Ze.jsx)(Ye.h,{})),(0,o.a)((0,Ze.jsx)(Se.h,{})),(0,o.a)((0,Ze.jsx)(Ke.h,{})),(0,o.a)((0,Ze.jsx)(me.h,{}))),Kt=(0,o.a)((0,Ze.jsx)(He.h,{})),Vt=(0,o.a)((0,Ze.jsx)(_e.h,{})),Wt=((0,o.a)((0,Ze.jsx)(Me.h,{})),(0,o.a)((0,Ze.jsx)(Ce.h,{})),(0,o.a)((0,Ze.jsx)(Qe.h,{})),(0,o.a)((0,Ze.jsx)(Ve.h,{})),(0,o.a)((0,Ze.jsx)(Ae.h,{})),(0,o.N)((0,r.Nf)())),Gt=((0,o.a)((0,Ze.jsx)(oe.h,{})),(0,o.a)((0,Ze.jsx)(x.h,{}))),Qt=((0,o.a)((0,Ze.jsx)(we.h,{})),(0,s.A)((0,s.A)({},i.M),{},{arrow:st,avatar:ot,check:it,contact:rt,drag:lt,explain:ct,instruct:dt,rewrite:ut,adjust_skill:a.ebl,search:ht,sider:mt,summarize:pt,translate:gt,del:_t,copy:qt,conversation:xt,settings:ft,more:It,regenerate:bt,expand:At,close:yt,cancel:jt,ok:wt,messageFailed:St,right:kt,IconRead:Mt,IconReadPage:Ct,global:Et,expandDownFilled:Tt,IconTranslateOutline:Pt,IconLangSettings:Rt,IconTranslateOutlineActive:Dt,IconLink:Ut,cici:Wt,searchToggleSize:Ft,searchMore:Bt,searchSource:Ot,collect:a.Wur,searchAI:Gt})),Yt=(e,t)=>{const n=Qt[e];return n?(0,Ze.jsx)(n,(0,s.A)({},t)):(e=>{try{return new URL(e),!0}catch(t){return!1}})(e)?(0,Ze.jsx)("img",(0,s.A)({src:e},t)):(0,Ze.jsx)(Ut,(0,s.A)({},t))}},19552:(e,t,n)=>{n.d(t,{PT:()=>l,Zv:()=>r,mJ:()=>d,qZ:()=>u});var s=n(14065),a=(n(41121),n(38671),n(45602));const o=()=>{const e=document.querySelector("#wxwork-share-pic");if(!e)return"";const t=e.getAttribute("src");if(!t)return"";const n=t.lastIndexOf("@");return n<=0?"":`https:${t.slice(0,n)}`},i=e=>`https://img.youtube.com/vi/${e}/maxresdefault.jpg`;function r(){return/youtube/.test(location.hostname)?"youtube":/bilibili/.test(location.hostname)?"bilibili":"youtube"}function l(e){return c.apply(this,arguments)}function c(){return(c=(0,s.A)((function*(e){const t=r();let n=window.location.href;return"bilibili"===t&&(n=yield(0,a.Z)(e)),n}))).apply(this,arguments)}function d(e){return"bilibili"===r()?o():i(e)}function u(){var e;var t;return"bilibili"===r()?(null===(t=document.querySelector(".bpx-player-ctrl-time-duration"))||void 0===t?void 0:t.innerText)||"":(null===(e=document.querySelector(".ytp-time-duration"))||void 0===e?void 0:e.innerText)||""}},77960:(e,t,n)=>{n.d(t,{_1:()=>o});var s=n(10633);n(11855);let a=function(e){return e.recommendVideo="recommendvideo_list_click",e.playNext="next_button",e.recommendVideoEnding="recommendvideo_ending_click",e}({});const o=new class{constructor(){(0,s.A)(this,"_isImmersionMode",!1),(0,s.A)(this,"_lastEntryFullScreenFrom",void 0),(0,s.A)(this,"_shouldSummaryVideoDefault",!1),(0,s.A)(this,"_lastRelayBtnType",a.playNext),(0,s.A)(this,"_lastRelayBtnTime",Date.now()),(0,s.A)(this,"_currentTranscript",void 0),(0,s.A)(this,"_videoSummaryMsgBlock",{}),(0,s.A)(this,"_moduleClickFrom",void 0)}isImmersionMode(){return this._isImmersionMode}setImmersionMode(e){this._isImmersionMode=e}getLastEntryFullScreenFrom(){return this._lastEntryFullScreenFrom}updateEntryFullScreenFrom(e){this._lastEntryFullScreenFrom=e}updateTranscriptData(e){this._currentTranscript=e}getTranscriptData(){return this._currentTranscript}hasTranscript(){var e;return Boolean(null===(e=this._currentTranscript)||void 0===e?void 0:e.length)}shouldSummaryVideoDefault(){return this._shouldSummaryVideoDefault}updateShouldSummaryVideoDefault(e){this._shouldSummaryVideoDefault=e}getLastClickRelayBtnType(){return this._lastRelayBtnType}recordClickRelayBtnType(e){this._lastRelayBtnType=e,this._lastRelayBtnTime=Date.now()}resetClickRelayBtnType(e){if(e)return this._lastRelayBtnType=a.playNext,void(this._lastRelayBtnTime=Date.now());Date.now()-this._lastRelayBtnTime>1e4&&(this._lastRelayBtnType=a.playNext,this._lastRelayBtnTime=Date.now())}updateVideoSummaryId(e){this._videoSummaryMsgBlock.videoSummaryId=e}updateVideoHighlightsId(e){this._videoSummaryMsgBlock.videoHighlightsId=e}getVideoSummaryMsgBlock(){return this._videoSummaryMsgBlock}updateModuleClickFrom(e){this._moduleClickFrom||(this._moduleClickFrom=e)}getModuleClickFrom(){return this._moduleClickFrom}resetVideoSummaryStatus(){this._moduleClickFrom=void 0,this.updateTranscriptData(),this.updateVideoSummaryId(),this.updateVideoHighlightsId()}}},14572:(e,t,n)=>{n.d(t,{dE:()=>s});const s="request_tts_audio"},70969:(e,t,n)=>{},81379:(e,t,n)=>{n.d(t,{DC:()=>r,UU:()=>c,mp:()=>l});n(70969);const s=e=>e instanceof Element&&"STYLE"===e.tagName.toUpperCase(),a=e=>e instanceof Element&&"LINK"===e.tagName.toUpperCase(),o=e=>e instanceof Element&&"SCRIPT"===e.tagName.toUpperCase(),i=e=>8===e.nodeType,r=e=>[s,a,o,i].some((t=>t(e)));const l=e=>{const t=/^[\s\n]*$/,n=e=>{if(e.nodeType===Node.TEXT_NODE){const n=e.textContent||"";if(!t.test(n))return!0}else if(e.nodeType===Node.ELEMENT_NODE&&e instanceof Element&&!r(e))for(const t of Array.from(e.childNodes))if(n(t))return!0;return!1};return n(e)};function c(e){return e.replaceAll(/[\n]\s*/g,"")}},29642:(e,t,n)=>{var s=n(14065),a=n(11855),o=n(75541),i=n(29019),r=n.n(i),l=n(75420),c=n(34944),d=n(99824),u=n(87220),h=n(18705);const m="demoContainer-YdcS71",p="demoText-T31NIk";var g=n(63159);const _=e=>{const{selectBarOnlyIcon:t,availableActionList:n,style:s,visible:o=!0}=e,i=(0,a.useRef)(null);return(0,g.jsxs)("div",{className:m,ref:i,style:s,children:[(0,g.jsx)(u.t,{style:{top:"-5px"},visible:o,availableActionList:n,selectBarOnlyIcon:t,autoAdjustOverflow:!1,getPopupContainer:()=>i.current,isDemo:!0,children:(0,g.jsx)("div",{className:p,children:"Hello"})}),(0,g.jsx)(h.Pg,{style:{verticalAlign:"middle",marginLeft:"5px"}})]})},v="optionsPage-n5vMJj",f="main-KdNeno",x="sider-CTyuPd",I="area-ouuKPc",b="logo-yuFm_Z",A="logoIcon-UgQH_H",y="name-e1FMWB",j="nav-i78ass",w="content-WGU_pZ",S="section-Cq3gzL",k="sectionTitle-KdZ6ag",M="sectionSecondTitle-xXTUbB",C="sectionThirdTitle-h7FxCn",E="demo-siV4sv",N="sites-yUoo6d";var T=n(71905),L=n(9584);const P="container-Aby_mV",R="radioItem-_MWgg3",D="radioArea-ra4fDR",F="radioContainer-FqJxK4",B="radio-Yy2RHO",O="radioSelected-nmceUM",U="radioLable-z_eih2",q=()=>{const e=(0,a.useRef)(null),t=(0,l.B)(),[n]=(0,L.Y)("selectBarOnlyIcon"),s=[{value:!1,lable:t("flow_web_ext_setting_toolbar_appearance_intuit")},{value:!0,lable:t("flow_web_ext_setting_toolbar_appearance_mini")}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:M,style:{paddingLeft:"0px"},children:t("flow_web_ext_setting_toolbar_appearance")}),(0,g.jsx)("div",{ref:e,className:P,children:s.map(((e,t)=>{const s=e.value===n;return(0,g.jsxs)("div",{className:R,children:[(0,g.jsx)(_,{selectBarOnlyIcon:e.value,availableActionList:[d.EU.ask,d.EU.translate].map((e=>d.YN[e])),style:{height:"146px",paddingTop:"10px"}}),(0,g.jsx)("div",{className:D,children:(0,g.jsxs)("button",{className:F,onPointerUp:()=>(0,T.vE)("selectBarOnlyIcon",e.value),children:[(0,g.jsx)("div",{className:r()(B,{[O]:s}),children:s&&(0,g.jsx)(h.jk,{})}),(0,g.jsx)("div",{className:U,children:e.lable})]})})]},t)}))})]})},H={"cici-ext-container":"cici-ext-container-qlE156",ciciExtContainer:"cici-ext-container-qlE156","inactivelink-hover-animation":"inactivelink-hover-animation-pf9d3t",inactivelinkHoverAnimation:"inactivelink-hover-animation-pf9d3t","notactivelink-hover-animation":"notactivelink-hover-animation-l0ClId",notactivelinkHoverAnimation:"notactivelink-hover-animation-l0ClId","light-click-animation":"light-click-animation-esI_sK",lightClickAnimation:"light-click-animation-esI_sK","click-animation":"click-animation-TvCSUG",clickAnimation:"click-animation-TvCSUG","semi-animation-rotate":"semi-animation-rotate-i0tp3u",semiAnimationRotate:"semi-animation-rotate-i0tp3u","inactive-btn-hover-animation":"inactive-btn-hover-animation-dwAqqb",inactiveBtnHoverAnimation:"inactive-btn-hover-animation-dwAqqb","cici-ext-always-dark":"cici-ext-always-dark-FhjQ0S",ciciExtAlwaysDark:"cici-ext-always-dark-FhjQ0S","cici-ext-always-light":"cici-ext-always-light-SdxZ1D",ciciExtAlwaysLight:"cici-ext-always-light-SdxZ1D",ellipsis:"ellipsis-MiSZf2",tabContent:"tabContent-kOmNIf",tabHeaderCard:"tabHeaderCard-yGKEuX",menuSorterContainer:"menuSorterContainer-MTzmBH",menuSorterContentContainer:"menuSorterContentContainer-B2WAZD",icon:"icon-HUseZo",label:"label-rbVDdN",control:"control-G8swCh",menuSorterContentContainerEmpty:"menuSorterContentContainerEmpty-qQU6HM",content:"content-TldbpR",menuSorterItemContainer:"menuSorterItemContainer-AauqWv",name:"name-Zzb6DD",menuSorterItem:"menuSorterItem-XtbPlk",menuSorterTitle:"menuSorterTitle-njiJlZ",skillHeader:"skillHeader-ZgwbQn","activelink-hover-animation":"activelink-hover-animation-pQ3FQY",activelinkHoverAnimation:"activelink-hover-animation-pQ3FQY"},z=e=>{const{isActive:t,tabType:n}=e,[s]=(0,L.Y)("selectBarOnlyIcon"),[o]=(0,L.Y)("editingPopupActions"),[i]=(0,L.Y)("readingPopupActions"),r=(0,a.useMemo)((()=>[...[...d.y3].map((e=>d.YN[e])),..."while_editing_texts"===n?o.actionList:i.actionList]),[n,o,i]);return(0,g.jsx)("div",{className:H.tabHeaderCard,children:(0,g.jsx)(_,{style:{border:"none"},visible:t,selectBarOnlyIcon:s,availableActionList:r})})};var K=n(17401),V=n(44557),W=n(61540),G=n(54483);const Q=(e,t)=>{(0,W.z8)(e,t)},Y=e=>{const{setPromptEditorInfo:t,id:n,setDeleteId:s}=e,[o,i]=(0,a.useState)(!1),r=(0,a.useMemo)((()=>[{icon:h.xV,onPointerUp:()=>{(0,W.z8)(G.Ur.skillEditDelete,{}),s(n)},key:"delete"},{icon:h.rZ,onPointerUp:()=>{(0,W.z8)(G.Ur.skillEditClick,{}),t({visible:!0,editId:n})},key:"update"}]),[]);return(0,g.jsxs)("div",{className:H.menuSorterContentContainer,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[(0,g.jsxs)("div",{className:H.label,children:[(0,g.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,g.jsx)(h.Ll,{style:e.isPinned?{visibility:"hidden"}:{}})}),(0,g.jsxs)("div",{className:H.menuSorterItemContainer,children:[(0,h.I)(e.icon,{className:H.icon}),(0,g.jsx)("div",{className:H.name,style:{maxWidth:o?160:220},"data-testid":`menu-sorter-item-${e.name}`,children:e.name})]})]}),o&&!d.YN[e.id]&&(0,g.jsx)("div",{className:H.control,children:r.map(((t,n)=>(0,g.jsx)("button",{className:H.menuSorterItemControlBtn,onPointerUp:t.onPointerUp,"data-testid":`menu-sorter-${e.name}-${t.key}`,children:(0,g.jsx)(t.icon,{})},n)))})]})},$=()=>{const e=(0,l.B)();return(0,g.jsx)("div",{className:H.menuSorterContentContainerEmpty,children:(0,g.jsx)("div",{className:H.content,children:e("flow_web_ext_setting_toolbar_hidden_empty")})})};var X=n(89207),Z=n(89739),J=n(43423),ee=n(30065),te=n(21642),ne=n(20979);function se(){return(se=(0,s.A)((function*(e){const t=(0,T.TK)("authInfo");return e?yield(0,ne.AT)({method:"POST",url:`${Z.kD}/plugin/prompt_skill/list_by_user`,data:{user_id:t.userId,frontend_source:1}}):yield(0,X.S6)({method:"POST",url:`${Z.kD}/plugin/prompt_skill/list_by_user`,data:{user_id:t.userId,frontend_source:1}})}))).apply(this,arguments)}function ae(e){return oe.apply(this,arguments)}function oe(){return(oe=(0,s.A)((function*(e){const t=(0,T.TK)("authInfo"),n=e.map((e=>{const n={icon:e.icon,use_in:e.useIn,displayMode:e.displayMode};e.conf_id&&(n.conf_id=e.conf_id);const s=JSON.stringify(n);return{title:e.title,prompt_template:e.prompt,user_id:t.userId,extra:s,item_type:e.item_type||1,conf_id:e.conf_id||"",skill_bot_id:e.skill_bot_id||"",skill_agent_id:e.skill_agent_id||""}}));return yield(0,X.S6)({method:"POST",url:`${Z.kD}/plugin/prompt_skill/add`,data:{items:n,frontend_source:1}})}))).apply(this,arguments)}function ie(e){return re.apply(this,arguments)}function re(){return re=(0,s.A)((function*(e){const t=(0,T.TK)("authInfo"),n=(0,T.TK)("readingPopupActions"),s=(0,T.TK)("editingPopupActions"),a=JSON.stringify({readingPopupActions:{selectbar:n.actionList.filter((t=>t.id!==e)).map((e=>e.id)),dropdown:n.moreActionList.filter((t=>t.id!==e)).map((e=>e.id))},editingPopupActions:{selectbar:s.actionList.filter((t=>t.id!==e)).map((e=>e.id)),dropdown:s.moreActionList.filter((t=>t.id!==e)).map((e=>e.id))}});return yield(0,X.S6)({method:"POST",url:`${Z.kD}/plugin/prompt_skill/delete`,data:{item_id:e,user_setting:{user_id:t.userId,settings:a},frontend_source:1}})})),re.apply(this,arguments)}function le(){return(le=(0,s.A)((function*(e){const t={icon:e.icon,use_in:e.useIn,displayMode:e.displayMode};e.conf_id&&(t.conf_id=e.conf_id);const n=JSON.stringify(t),s=(0,T.TK)("authInfo");return yield(0,X.S6)({method:"POST",url:`${Z.kD}/plugin/prompt_skill/update`,data:{item:{id:e.id,title:e.title,prompt_template:e.prompt,user_id:s.userId,extra:n,item_type:e.item_type||1},frontend_source:1}})}))).apply(this,arguments)}function ce(){return de.apply(this,arguments)}function de(){return de=(0,s.A)((function*(){const e=(0,T.TK)("authInfo"),t=(0,T.TK)("readingPopupActions"),n=(0,T.TK)("editingPopupActions"),s=JSON.stringify({readingPopupActions:{selectbar:t.actionList.map((e=>e.id)),dropdown:t.moreActionList.map((e=>e.id))},editingPopupActions:{selectbar:n.actionList.map((e=>e.id)),dropdown:n.moreActionList.map((e=>e.id))}});return yield(0,X.S6)({method:"POST",url:`${Z.kD}/plugin/prompt_skill/save_setting`,data:{user_setting:{user_id:e.userId,settings:s},frontend_source:1}})})),de.apply(this,arguments)}const ue=()=>{const e=[];return(0,te.ku)()||e.push(d.EU.collect),e},he=(e,t,n)=>{const s={actionList:[],moreActionList:[]},a=new Set,o=ue();return e&&(e.selectbar.forEach((e=>{if(o.includes(e))return;const n=t.get(e);n&&(s.actionList.push(n),a.add(e))})),e.dropdown.forEach((e=>{if(o.includes(e))return;const n=t.get(e);n&&(s.moreActionList.push(n),a.add(e))}))),t.forEach(((e,t)=>{if(!a.has(t)&&!o.includes(t)){(n?d.aX.includes(t):d.AA.includes(t))?s.actionList.push(e):s.moreActionList.push(e)}})),s},me={readingPopupActions:{selectbar:d.aX,dropdown:d.Tz},editingPopupActions:{selectbar:d.AA,dropdown:d.Xt}},pe=()=>{const e=ue();(0,T.vE)("readingPopupActions",{actionList:(0,d.Hh)(e),moreActionList:(0,d.WN)(e)}),(0,T.vE)("editingPopupActions",{actionList:(0,d.I8)(e),moreActionList:(0,d.fS)(e)})};function ge(){return _e.apply(this,arguments)}function _e(){return _e=(0,s.A)((function*(e=!1){try{const t=(0,T.TK)("authInfo");if(!t.isAuthenticated||!t.userId)return void pe();const n=yield function(e){return se.apply(this,arguments)}(e);if(!n)return;const{user_setting:s,items:a}=n;if(!s||!a)return;const o=new Map([...(0,d.Hh)(),...(0,d.WN)()].map((e=>[e.id,e]))),i=new Map([...(0,d.I8)(),...(0,d.fS)()].map((e=>[e.id,e])));null==a||a.forEach((e=>{const{id:t,extra:n,title:s,prompt_template:a}=e,r=JSON.parse(n),{use_in:l="",icon:c="",displayMode:d,conf_id:u}=r||{},h={id:t,icon:c,name:s,prompt:a,displayMode:d,confId:u};"reading"===l?o.set(t,h):"editing"===l&&i.set(t,h)}));const{settings:r=""}=s,l=r?JSON.parse(r):me,c=he(l.readingPopupActions,o,!0),u=he(l.editingPopupActions,i,!1);c.actionList.length+c.moreActionList.length&&(0,T.vE)("readingPopupActions",c),u.actionList.length+u.moreActionList.length&&(0,T.vE)("editingPopupActions",u)}catch(t){(0,J.z3)("initSelectBarSkillList err",t),ee.vF.persist.info({eventName:"getSelectBarSkillList",meta:(0,V.A)({},t)})}})),_e.apply(this,arguments)}const ve="leftDroppable",fe="rightDroppable",xe=e=>{const t=(0,l.B)(),n=(0,T.TK)("PopupListMaxCount"),o="while_reading_websites"===e.tabType?"readingPopupActions":"editingPopupActions",[i]=(0,L.Y)(o),r=(0,T.TK)(o),[c,u]=(0,a.useState)([...r.actionList]),[h,m]=(0,a.useState)([...r.moreActionList]),[p,_]=(0,a.useState)(!1),[v,f]=(0,a.useState)(!1),x=(0,a.useCallback)((()=>{p&&(c.push(h[0]),h.splice(0,1),u(c),m(h),_(!1))}),[c,h,p,u,m,_]),I=(0,a.useCallback)(function(){var e=(0,s.A)((function*(e){if(f(!1),!e.destination)return x(),void _(!1);if(e.source.droppableId===fe){let{index:t}=e.source;p&&t++;const n=h.splice(t,1)[0];e.destination.droppableId===fe?h.splice(e.destination.index,0,n):e.destination.droppableId===ve&&c.splice(e.destination.index,0,n)}else if(e.source.droppableId===ve){const t=c.splice(e.source.index,1)[0];e.destination.droppableId===ve?c.splice(e.destination.index,0,t):e.destination.droppableId===fe&&h.splice(e.destination.index,0,t),_(!1)}(0,T.vE)(o,{actionList:c,moreActionList:h}),yield ce()}));return function(t){return e.apply(this,arguments)}}(),[x,_,c,u,h,m,o]),b=(0,a.useCallback)(((e,t)=>{var s,a;(null===(s=e.source)||void 0===s?void 0:s.droppableId)===fe&&((null===(a=e.destination)||void 0===a?void 0:a.droppableId)===ve?c.length>=n&&(h.splice(0,0,c.pop()),m(h),u(c),_(!0)):x())}),[c,h,n,x,_,u,m]),A=(0,a.useCallback)((()=>{_(!1),f(!0)}),[_,f]),y=(0,a.useMemo)((()=>0===h.length&&!v),[h,v]),j=function(){const e=(0,l.B)(),t=(0,a.useCallback)(((t,n,s,a,o,i)=>(0,g.jsxs)("div",(0,V.A)((0,V.A)((0,V.A)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:[(0,g.jsx)(Y,{icon:s.icon,name:e(s.name,i),id:s.id,isPinned:!1,setPromptEditorInfo:a,setDeleteId:o}),(0,g.jsx)("div",{style:{height:"12px"}})]}))),[]);return(0,a.useCallback)(((e,n,s,a,o,i,r="_",l={})=>(0,g.jsxs)("div",(0,V.A)((0,V.A)({},a.droppableProps),{},{ref:a.innerRef,style:(0,V.A)({minHeight:"100px"},l),children:[i?(0,g.jsx)($,{}):null,e.map(((e,a)=>(0,g.jsx)(K.sx,{draggableId:r+e.id,index:a,children:(a,o)=>t(a,o,e,n,s,e.options)},r+e.id))),a.placeholder]}))),[t])}();return(0,a.useEffect)((()=>{u(i.actionList),m(i.moreActionList)}),[i]),(0,g.jsx)(K.JY,{onDragEnd:I,onDragUpdate:b,onDragStart:A,children:(0,g.jsxs)("div",{className:H.menuSorterContainer,children:[(0,g.jsxs)("div",{className:H.menuSorterItem,children:[(0,g.jsx)("div",{className:H.menuSorterTitle,children:t("flow_web_ext_setting_toolbar_shown")}),(0,g.jsx)(Y,{icon:"cici",name:t("flow_web_ext_action_ask"),isPinned:!0,id:d.EU.ask,setPromptEditorInfo:e.setPromptEditorInfo,setDeleteId:e.setDeleteId}),(0,g.jsx)(K.gL,{droppableId:ve,children:(t,n)=>j(c,e.setPromptEditorInfo,e.setDeleteId,t,n,!1,"_",{marginTop:"12px"})})]}),(0,g.jsxs)("div",{className:H.menuSorterItem,children:[(0,g.jsx)("div",{className:H.menuSorterTitle,children:t("flow_web_ext_setting_toolbar_hidden")}),(0,g.jsx)(K.gL,{droppableId:fe,children:(t,n)=>j(h,e.setPromptEditorInfo,e.setDeleteId,t,n,y,"__")})]})]})})},Ie=e=>(0,g.jsxs)("div",{className:H.tabContent,children:[(0,g.jsx)(z,{isActive:e.isActive,tabType:e.tabType}),(0,g.jsx)(xe,{tabType:e.tabType,setPromptEditorInfo:e.setPromptEditorInfo,setDeleteId:e.setDeleteId})]});var be=n(14049),Ae=n(31218);const ye={"cici-ext-container":"cici-ext-container-uMNo1e",ciciExtContainer:"cici-ext-container-uMNo1e","inactivelink-hover-animation":"inactivelink-hover-animation-BwPvrB",inactivelinkHoverAnimation:"inactivelink-hover-animation-BwPvrB","notactivelink-hover-animation":"notactivelink-hover-animation-iYKd_L",notactivelinkHoverAnimation:"notactivelink-hover-animation-iYKd_L","light-click-animation":"light-click-animation-bSaVfo",lightClickAnimation:"light-click-animation-bSaVfo","click-animation":"click-animation-_xB1K8",clickAnimation:"click-animation-_xB1K8","semi-animation-rotate":"semi-animation-rotate-UtQPL_",semiAnimationRotate:"semi-animation-rotate-UtQPL_","inactive-btn-hover-animation":"inactive-btn-hover-animation-QthXcj",inactiveBtnHoverAnimation:"inactive-btn-hover-animation-QthXcj","cici-ext-always-dark":"cici-ext-always-dark-X2qJ0w",ciciExtAlwaysDark:"cici-ext-always-dark-X2qJ0w","cici-ext-always-light":"cici-ext-always-light-iGj00q",ciciExtAlwaysLight:"cici-ext-always-light-iGj00q",ellipsis:"ellipsis-dSGJ7V",skillBtnContainer:"skillBtnContainer-BzJhoq",discoverBtn:"discoverBtn-NRagCf",newPromptBtn:"newPromptBtn-GS2twn",icon:"icon-mCjig6",lable:"lable-hGXyQh",modalContainer:"modalContainer-zApaCa",addPromptHeader:"addPromptHeader-q6VlYh",title:"title-Scxbbg",closeBtn:"closeBtn-NP1rwn",addPromptContent:"addPromptContent-W049F8",nameAndIcon:"nameAndIcon-vA7iGP",nameContainer:"nameContainer-nXZryw",name:"name-EvWPpM",nameSuffix:"nameSuffix-jGTdLI",exceed:"exceed-WeMdXB",iconLabel:"iconLabel-ymprhh",prompt:"prompt-vH3ONO",addPromptFooter:"addPromptFooter-lIDBxc",cancelBtn:"cancelBtn-Kti9vV",saveBtn:"saveBtn-CAvWnG",addPromptContentTips:"addPromptContentTips-YkxA_o",addPromptIconChoiceBtn:"addPromptIconChoiceBtn-SLlOq8",isOpen:"isOpen-GI5mH6",addPromptIconChoiceContainer:"addPromptIconChoiceContainer-HPI_Ly",header:"header-FREMQO",IconBtnContainer:"IconBtnContainer-F9WWwj",iconBtnContainer:"IconBtnContainer-F9WWwj",selectedIcon:"selectedIcon-IgFFfR",addPromptContentTipsContainer:"addPromptContentTipsContainer-qWhTAP",demoContainer:"demoContainer-kGpvNy",demoText:"demoText-Z7znMk",demoContext:"demoContext-BF7fU3",demoPrompt:"demoPrompt-SNrkn_",toast:"toast-bO90gH",toastError:"toastError-DSKvc4",deletePrompt:"deletePrompt-It878t",warningIcon:"warningIcon-MZonGR",tips:"tips-om_4m1",btn:"btn-fDdHiU",deleteBtn:"deleteBtn-Jp4lKK",displayModeContainer:"displayModeContainer-dGBZU_",radioItem:"radioItem-ADIdjN",card:"card-SNDMtX",radioContainer:"radioContainer-JOQ85u",radio:"radio-m0DJYi",radioSelected:"radioSelected-YFh2WD","activelink-hover-animation":"activelink-hover-animation-kwyZwj",activelinkHoverAnimation:"activelink-hover-animation-kwyZwj"},je=(e,t)=>{null==t||t(),c.y8.success({content:e,showClose:!1,icon:(0,g.jsx)(h.wO,{}),className:ye.toast})},we=(e,t)=>{null==t||t(),c.y8.error({content:e,showClose:!1,className:r()([ye.toastError,ye.toast])})},Se=e=>{const{value:t="page",onChange:n}=e,s=(0,l.B)(),a=[{value:"page",lable:s("flow_web_ext_setting_toolbar_skillpopup_nameicon_resultdisplay_popup"),card:(0,g.jsx)(h.Io,{})},{value:"sidebar",lable:s("flow_web_ext_setting_toolbar_skillpopup_nameicon_resultdisplay_sidebar"),card:(0,g.jsx)(h.RH,{})}];return(0,g.jsx)("div",{className:ye.displayModeContainer,children:a.map((e=>{const s=e.value===t;return(0,g.jsxs)("div",{className:ye.radioItem,children:[(0,g.jsx)("span",{onPointerUp:()=>null==n?void 0:n(e.value),className:ye.card,children:e.card}),(0,g.jsxs)("button",{type:"button",className:ye.radioContainer,onPointerUp:()=>null==n?void 0:n(e.value),children:[(0,g.jsx)("div",{className:r()(ye.radio,{[ye.radioSelected]:s}),children:s&&(0,g.jsx)(h.jk,{})}),(0,g.jsx)("div",{className:ye.radioLable,children:e.lable})]},e.value)]})}))})},ke=e=>{const{title:t,onClose:n,style:s}=e;return(0,g.jsxs)("div",{className:ye.addPromptHeader,style:s,children:[(0,g.jsx)("div",{className:ye.title,children:t}),(0,g.jsx)("div",{className:ye.closeBtn,children:(0,g.jsx)("button",{onPointerUp:n,children:(0,g.jsx)(h.gz,{})})})]})},Me=()=>{const[e,t]=(0,a.useState)(!1),n=(0,l.B)(),[s]=(0,L.Y)("selectBarOnlyIcon"),o=(0,a.useRef)(null),i=()=>{(0,W.z8)(G.Ur.examplePopupClose,{}),t(!1)},r=n("flow_web_ext_setting_toolbar_examplepopup_notice2"),u=r.includes(":")?r.indexOf(":"):r.indexOf("\uff1a");return(0,g.jsxs)("div",{className:ye.addPromptContentTips,ref:o,children:[n("flow_web_ext_setting_toolbar_skillpopup_promptcontent_notice"),(0,g.jsx)("span",{onPointerUp:()=>{(0,W.z8)(G.Ur.exampleClick,{}),t(!0)},children:n("flow_web_ext_setting_toolbar_skillpopup_prompt_example")}),(0,g.jsx)(c.aF,{centered:!0,visible:e,onCancel:i,header:(0,g.jsx)(ke,{title:n("flow_web_ext_setting_toolbar_skillpopup_prompt_example"),onClose:i,style:{justifyContent:"flex-start"}}),footer:null,children:(0,g.jsxs)("div",{className:ye.addPromptContentTipsContainer,children:[(0,g.jsx)("div",{className:ye.demoContainer,children:(0,g.jsx)(_,{style:{border:"none"},selectBarOnlyIcon:s,availableActionList:[d.EU.ask,d.EU.explain,d.EU.translate].map((e=>d.YN[e]))})}),(0,g.jsxs)("div",{className:ye.demoText,children:[(0,g.jsx)("div",{children:n("flow_web_ext_setting_toolbar_examplepopup_notice1")}),(0,g.jsxs)("div",{className:ye.demoContext,children:[(0,g.jsx)("div",{children:u>=0?r.substring(0,u+1):r}),(0,g.jsx)("div",{className:ye.demoPrompt,children:u>=0?r.substring(u+1):""})]})]})]})})]})};var Ce=n(12478),Ee=n(58291);const Ne=e=>{var t;const n=(0,l.B)(),{onChange:s,value:o="customSkillIcon0"}=e,[i,d]=(0,a.useState)(!1),u=null===(t=(0,Ee.A)())||void 0===t?void 0:t.getPopupContainer,m=(0,a.useMemo)((()=>Object.keys(Ce.M)),[]);return(0,g.jsx)(c.AM,{getPopupContainer:u,trigger:"custom",visible:i,position:"bottomRight",className:ye.addPromptIconChoiceContainer,onClickOutSide:()=>d(!1),content:(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:ye.header,children:[(0,g.jsx)("span",{children:n("flow_web_ext_setting_toolbar_skillpopup_nameicon_icon")}),(0,g.jsx)("button",{onPointerUp:()=>d(!1),children:(0,g.jsx)(h.gz,{})})]}),(0,g.jsx)("div",{className:ye.IconBtnContainer,children:m.map((e=>(0,g.jsx)("button",{className:r()({[ye.selectedIcon]:e===o}),onPointerUp:()=>{return t=e,s&&s(t),void d(!1);var t},children:(0,h.I)(e)},e)))})]}),children:(0,g.jsx)("button",{type:"button",className:ye.addPromptIconChoiceBtn,value:o,onPointerUp:()=>{(0,W.z8)(G.Ur.skillPopupIconClick,{}),d(!i)},children:(0,h.I)(o)})})},Te=e=>{const{info:{editId:t,visible:n},setInfo:o,activeKey:i}=e,[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(""),{className:p,onScroll:_}=(0,be.j)(),v=(0,l.B)(),f=(0,a.useRef)(),x=[{label:v("flow_web_ext_setting_toolbar_websites"),value:"reading"},{label:v("flow_web_ext_setting_toolbar_texts"),value:"editing"}],[I]=(0,L.Y)("editingPopupActions"),[b]=(0,L.Y)("readingPopupActions"),A="while_editing_texts"===i,y=(0,a.useMemo)((()=>{if(t)return A?I.actionList.find((e=>e.id===t))||I.moreActionList.find((e=>e.id===t)):b.actionList.find((e=>e.id===t))||b.moreActionList.find((e=>e.id===t))}),[I,b,t,i]),[j,w]=(0,a.useState)((null==y?void 0:y.icon)||"customSkillIcon0"),[S,k]=(0,a.useState)((null==y?void 0:y.displayMode)||"page"),M=Boolean(null==y?void 0:y.confId),C=(0,a.useCallback)((()=>{u(!1),o({visible:!1})}),[]),E=e=>{if(f.current){const{icon:t="customSkillIcon0",name:n="",prompt:s="",used:a=[]}=f.current.getValues();Q(e,{skill_name:n,prompt_content:s,icon_id:t,in_viewwebsite:a.includes("reading")?"1":"0",in_editcontent:a.includes("editing")?"1":"0"})}C()},N=(0,a.useCallback)((()=>{je(v("flow_web_ext_setting_toolbar_skillsaved"),(()=>C()))}),[]),P=(0,a.useCallback)((()=>{we(v("flow_web_ext_setting_toolbar_savefailed"),(()=>u(!1)))}),[]),R=(0,a.useCallback)(function(){var e=(0,s.A)((function*(e){u(!0);const{icon:t=(null==y?void 0:y.icon)||"customSkillIcon0",name:n=(null==y?void 0:y.name)||"",prompt:s=(null==y?void 0:y.prompt)||"",used:a=[],displayMode:o=(null==y?void 0:y.displayMode)||"page"}=e||{};if(Q(G.Ur.skillPopupSave,{skill_name:n,prompt_content:s,icon_id:t,in_viewwebsite:a.includes("reading")?"1":"0",in_editcontent:a.includes("editing")?"1":"0"}),y){if(t!==y.icon||n!==y.name||s!==y.prompt||o!==y.displayMode){y.icon=t,y.name=n,y.prompt=s,y.displayMode=o;const e=yield function(e){return le.apply(this,arguments)}({id:y.id,icon:t,title:n,prompt:s,displayMode:o,useIn:A?"editing":"reading",conf_id:y.confId,item_type:y.confId?2:1});""===e?(A?(0,T.vE)("editingPopupActions",{actionList:I.actionList,moreActionList:I.moreActionList}):(0,T.vE)("readingPopupActions",{actionList:b.actionList,moreActionList:b.moreActionList}),N()):P()}else N();return}if(!a.length)return void C();const i=[];a.includes("reading")&&i.push({icon:t,title:n,prompt:s,useIn:"reading",displayMode:o}),a.includes("editing")&&i.push({icon:t,title:n,prompt:s,useIn:"editing",displayMode:o});const r=yield ae(i);(null==r?void 0:r.length)===i.length?(i.forEach(((e,a)=>{const i="reading"===e.useIn?"readingPopupActions":"editingPopupActions",l="reading"===e.useIn?b:I;l.moreActionList.unshift({id:r[a],icon:t,prompt:s,name:n,displayMode:o}),(0,T.vE)(i,l)})),yield ce(),N()):P()}));return function(t){return e.apply(this,arguments)}}(),[b,I,y]),D=(0,c.ZH)(Ne,{valueKey:"value",onKeyChangeFnName:"onChange"}),F=(0,c.ZH)(Se,{valueKey:"value",onKeyChangeFnName:"onChange"});return(0,a.useEffect)((()=>{n&&(w((null==y?void 0:y.icon)||"customSkillIcon0"),k((null==y?void 0:y.displayMode)||"page"),m(y?v(y.name):""))}),[n,y]),(0,g.jsx)(c.aF,{centered:!0,visible:n,footer:null,"data-testid":"options-add-skill-modal",header:(0,g.jsx)(ke,{title:v(y?"flow_web_ext_setting_toolbar_editskill_title":"flow_web_ext_setting_toolbar_addskill"),onClose:()=>E(G.Ur.skillPopupClose)}),style:{padding:0},className:ye.modalContainer,children:(0,g.jsxs)(c.lV,{onSubmit:R,getFormApi:e=>f.current=e,extraTextPosition:"middle",children:[(0,g.jsx)(Ae.B,{showScrollbar:!0,onScroll:()=>{_()},className:r()(p),style:{maxHeight:"calc(100vh - 120px - 48px - 28px - 38px)"},children:(0,g.jsxs)("div",{className:ye.addPromptContent,children:[!M&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:ye.nameAndIcon,children:[(0,g.jsx)("div",{className:ye.nameContainer,children:(0,g.jsx)(c.lV.Input,{"data-testid":"options-add-skill-input-name",field:"name",label:v("flow_web_ext_setting_toolbar_skillpopup_nameicon"),placeholder:v("flow_web_ext_setting_toolbar_skillpopup_nameinput"),className:ye.name,trigger:["blur","change"],rules:[{required:!0,message:v("flow_web_ext_setting_toolbar_skillpopup_nameicon_notice")},{validator:(e,t)=>!t||t.length<=20,message:v("flow_web_ext_setting_toolbar_skillpopup_nameicon_notice_length")}],autoComplete:"off",initValue:y?v(y.name):"",onChange:m,suffix:(0,g.jsxs)("span",{className:ye.nameSuffix,children:[(0,g.jsx)("span",{className:r()({[ye.exceed]:h.length>20}),children:h.length}),"/20"]})})}),(0,g.jsx)(D,{field:"icon",label:(0,g.jsx)("div",{className:ye.iconLabel,children:"icon"}),initValue:j,onChange:e=>w(e)})]}),(0,g.jsx)(c.lV.TextArea,{"data-testid":"options-add-skill-input-prompt",field:"prompt",label:v("flow_web_ext_setting_toolbar_skillpopup_prompt"),placeholder:v("flow_web_ext_setting_toolbar_skillpopup_prompt_input"),className:ye.prompt,trigger:["blur","change"],rules:[{required:!0,message:v("flow_web_ext_setting_toolbar_skillpopup_prompt_notice")},{validator:(e,t)=>!t||t.length<=16e3,message:v("flow_web_ext_setting_toolbar_skillpopup_prompt_notice_length")}],extraText:(0,g.jsx)(Me,{}),initValue:y?y.prompt:""}),!y&&(0,g.jsx)(c.lV.CheckboxGroup,{field:"used",direction:"horizontal",label:v("flow_web_ext_setting_toolbar_skillpopup_conditiontitle"),options:x,initValue:x.map((e=>e.value)),rules:[{required:!0,message:v("flow_web_ext_setting_toolbar_skillpopup_condition_notice")}],style:{gap:"30px",marginBottom:"12px"}})]}),(0,g.jsx)(F,{field:"displayMode",label:v("flow_web_ext_setting_toolbar_skillpopup_nameicon_resultsdisplay"),initValue:S,onChange:e=>k(e)})]})}),(0,g.jsxs)("div",{className:ye.addPromptFooter,children:[(0,g.jsx)("button",{type:"button",className:ye.cancelBtn,onPointerUp:()=>E(G.Ur.skillPopupCancel),children:(0,g.jsx)("span",{children:v("flow_web_ext_setting_toolbar_skillpopup_cancel")})}),(0,g.jsx)(c.$n,{loading:d,htmlType:"submit",className:ye.saveBtn,"data-testid":"option-select-addSkill-save",children:v("flow_web_ext_setting_toolbar_skillpopup_save")})]})]})})};var Le=n(6693);const Pe=e=>e.startsWith("data:")?e:"https://lf-flow-web-cdn.doubaocdn.com/obj/flow-doubao/"+e,Re="saman_skill_card_";var De=n(30435);const Fe=e=>{const{saveSkillSetting:t,onConfirm:n,onCancel:o}=e,[i,d]=(0,a.useState)(!1),u=(0,l.B)(),h=(0,a.useRef)(),[m,p]=(0,a.useState)("page"),_=(0,c.ZH)(Se,{valueKey:"value",onKeyChangeFnName:"onChange"}),[v]=(0,L.Y)("editingPopupActions"),[f]=(0,L.Y)("readingPopupActions"),{className:x,onScroll:I}=(0,be.j)();if((0,a.useEffect)((()=>{t&&p("page")}),[t]),!t)return null;const b=[{label:u("flow_web_ext_setting_toolbar_websites"),value:"reading",disabled:t.selected_in_reading},{label:u("flow_web_ext_setting_toolbar_texts"),value:"editing",disabled:t.selected_in_editing}],A=()=>{d(!1),null==o||o()},y=function(){var e=(0,s.A)((function*(e){d(!0);const{used:s,displayMode:a}=e;if(null==s||!s.length||!a)return null==n||n(),void A();const o=[],{name:i="",conf_id:r,bot_id:l,agent_id:c}=t,h=Pe(t.icon||"");s.includes("reading")&&o.push({icon:h,title:i,prompt:"",useIn:"reading",displayMode:a,conf_id:r,item_type:2,skill_agent_id:c,skill_bot_id:l}),s.includes("editing")&&o.push({icon:h,title:i,prompt:"",useIn:"editing",displayMode:a,conf_id:r,item_type:2,skill_agent_id:c,skill_bot_id:l});const m=yield ae(o);(null==m?void 0:m.length)===o.length?(o.forEach(((e,t)=>{const n="reading"===e.useIn?"readingPopupActions":"editingPopupActions",s="reading"===e.useIn?f:v;s.moreActionList.unshift({id:m[t],icon:h,prompt:"",name:i,confId:r,displayMode:a}),(0,T.vE)(n,s)})),yield ce(),je(u("flow_web_ext_setting_toolbar_skillsaved"),(()=>{A(),null==n||n()}))):we(u("flow_web_ext_setting_toolbar_savefailed"),(()=>d(!1)))}));return function(t){return e.apply(this,arguments)}}();return(0,g.jsx)(c.aF,{centered:!0,visible:!0,footer:null,header:(0,g.jsx)(ke,{title:`${u("friends_add_button")}${u(t.name||"")}`,onClose:A}),onCancel:A,style:{padding:0},className:ye.modalContainer,children:(0,g.jsxs)(c.lV,{onSubmit:y,getFormApi:e=>h.current=e,extraTextPosition:"middle",children:[(0,g.jsx)(Ae.B,{showScrollbar:!0,onScroll:()=>{I()},className:r()(x),style:{maxHeight:"calc(100vh - 120px - 48px - 28px - 38px)"},children:(0,g.jsxs)("div",{className:ye.addPromptContent,children:[(0,g.jsx)(c.lV.CheckboxGroup,{field:"used",direction:"horizontal",label:u("flow_web_ext_setting_toolbar_skillpopup_conditiontitle"),options:b,initValue:b.filter((e=>!e.disabled)).map((e=>e.value)),rules:[{required:!0,message:u("flow_web_ext_setting_toolbar_skillpopup_condition_notice")}],style:{gap:"30px",marginBottom:"12px"}}),(0,g.jsx)(_,{field:"displayMode",label:u("flow_web_ext_setting_toolbar_skillpopup_nameicon_resultsdisplay"),initValue:m,onChange:e=>p(e)})]})}),(0,g.jsxs)("div",{className:ye.addPromptFooter,children:[(0,g.jsx)("button",{type:"button",className:ye.cancelBtn,onPointerUp:A,"data-testid":"option-discoverSkill-deleteBtn",children:(0,g.jsx)("span",{children:u("flow_web_ext_setting_toolbar_skillpopup_cancel")})}),(0,g.jsx)(c.$n,{loading:i,htmlType:"submit",className:ye.saveBtn,"data-testid":"option-discoverSkill-saveBtn",children:u("flow_web_ext_setting_toolbar_skillpopup_save")})]})]})})},Be="discover-modal-kpptRc",Oe="loading-FHGwJF",Ue="modal-title-XCqTRQ",qe="discover-modal-content-vLy_Cz",He="skills-card-Yga9dj",ze="card-vYCKMi",Ke="card-top-WDYFsQ",Ve="imgURL-CKXFnI",We="card-icon-box-WWZpaD",Ge="icon-hZ8bBQ",Qe="card-bottom-xCIKNp",Ye="title-EaTxXr",$e="author-S9lv3h",Xe="add-T2K1nl",Ze="addIcon-GReNeN",Je="added-i4HON8",et="addedIcon-jBaIgx",tt="addButton-lsu4Q1",nt=({discoverSkillsList:e,setVisible:t})=>{const n=(0,l.B)(),[o]=(0,L.Y)("editingPopupActions"),[i]=(0,L.Y)("readingPopupActions"),[c,d]=(0,a.useState)(null),u=(0,a.useMemo)((()=>{const t=new Set;o.actionList.forEach((e=>e.confId&&t.add(e.confId))),o.moreActionList.forEach((e=>e.confId&&t.add(e.confId)));const n=new Set;return i.actionList.forEach((e=>e.confId&&n.add(e.confId))),i.moreActionList.forEach((e=>e.confId&&n.add(e.confId))),e.map((e=>(0,V.A)((0,V.A)({},e),{},{selected_in_editing:t.has(e.conf_id),selected_in_reading:n.has(e.conf_id)})))}),[o,i,e]),h=function(){var e=(0,s.A)((function*(e,t){const n=e?o:i,s=[...n.actionList,...n.moreActionList].filter((e=>t===e.confId));if(s.length)for(const a of s){if(""!==(yield ie(a.id)))return!1;(0,T.vE)(e?"editingPopupActions":"readingPopupActions",{actionList:n.actionList.filter((e=>e.id!==a.id)),moreActionList:n.moreActionList.filter((e=>e.id!==a.id))})}return!0}));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,s.A)((function*(e){try{const t=yield h(!0,e.conf_id),s=yield h(!1,e.conf_id);t&&s?je(n("flow_web_ext_setting_toolbar_skilldeleted")):we(n("flow_web_ext_setting_toolbar_deletefailed"))}catch(t){we(n("flow_web_ext_setting_toolbar_deletefailed"))}}));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[u.map(((e,t)=>(0,g.jsxs)("div",{className:ze,id:`${Re+t}`,"data-testid":`${Re+t}-container`,children:[(0,g.jsxs)("div",{className:Ke,children:[(0,g.jsx)("img",{src:Pe(e.cover||""),alt:"img",className:Ve}),(0,g.jsx)("div",{className:We,children:(0,g.jsx)("img",{src:Pe(e.icon||""),alt:"ic",className:Ge})})]}),(0,g.jsxs)("div",{className:Qe,children:[(0,g.jsxs)("div",{children:[e.name&&(0,g.jsx)("div",{className:Ye,children:n(e.name)}),e.author&&(0,g.jsxs)("div",{className:$e,children:["@",n(e.author)]})]}),e.selected_in_editing&&e.selected_in_reading?(0,g.jsx)("div",{className:r()(Je,tt),onClick:()=>m(e),"data-testid":`${Re+t}-doneBtn`,children:(0,g.jsx)(De.eWz,{className:et})}):(0,g.jsx)("div",{className:r()(Xe,tt),onClick:()=>(e=>{d(e)})(e),"data-testid":`${Re+t}-plusBtn`,children:(0,g.jsx)(De.WGN,{className:Ze})})]})]},t+((null==e?void 0:e.bot_id)||"")))),(0,g.jsx)(Fe,{saveSkillSetting:c,onCancel:()=>d(null),onConfirm:()=>t(!1)})]})},st="load-more-wrapper-KDso8R",at=(0,a.forwardRef)((function(e,t){const{safeMargin:n="15",className:s=""}=e;return(0,g.jsx)("div",{className:r()(st,s),style:{marginBottom:`${n}px`},ref:t,children:(0,g.jsx)(c.tK,{size:"middle"})})}));function ot(){return(ot=(0,s.A)((function*(e,t){const n=yield(0,X.ew)({method:"POST",url:`${Z.kD}/plugin/prompt_skill/list_discover_skills`,data:{frontend_source:1,page_size:e,start_index:t}}),{data:s,has_more:a}=n;return{data:s,has_more:a}}))).apply(this,arguments)}const it=e=>{const{visible:t,setVisible:n}=e,o=(0,l.B)(),{className:i,onScroll:d}=(0,be.j)(),u=(0,a.useRef)(null),[h,m]=(0,a.useState)([]),[p,_]=(0,a.useState)(!0),[v,f]=(0,a.useState)(!1),x=function(){var e=(0,s.A)((function*(){if(!p)return;f(!0);const e=yield function(e,t){return ot.apply(this,arguments)}(10,h.length);if(f(!1),!e.data)return;const{data:t,has_more:n}=e;m([...h,...t]),_(Boolean(n))}));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((()=>{t&&(h.length||x())}),[t,h.length]);const I=(0,a.useCallback)((0,Le.A)((()=>{!v&&p&&x()}),300),[h,v,p,x]);return(0,g.jsx)(c.aF,{title:(0,g.jsx)("div",{className:Ue,children:o("cici_desktop_text_selection_setting_selection_skills")}),"data-testid":"options-discover-skills-modal",visible:t,className:Be,width:"800px",footer:null,centered:!0,onCancel:()=>n(!1),children:0===(null==h?void 0:h.length)&&v?(0,g.jsx)("div",{className:Oe,children:(0,g.jsx)(c.tK,{size:"middle"})}):(0,g.jsxs)(Ae.B,{reachBottomThreshold:100,onReachBottom:I,ref:u,showScrollbar:!0,onScroll:()=>{d()},className:r()(i,qe,`${Re}container`),children:[(0,g.jsx)("div",{className:He,children:(0,g.jsx)(nt,{discoverSkillsList:h,setVisible:n})}),p&&v&&(null==h?void 0:h.length)>0&&(0,g.jsx)(at,{})]})})};var rt=n(99346);const lt=e=>{const{id:t,setId:n,activeKey:o}=e,i=(0,l.B)(),[r]=(0,L.Y)("editingPopupActions"),[d]=(0,L.Y)("readingPopupActions"),u="while_editing_texts"===o;if(!(0,a.useMemo)((()=>{if(t)return u?r.actionList.find((e=>e.id===t))||r.moreActionList.find((e=>e.id===t)):d.actionList.find((e=>e.id===t))||d.moreActionList.find((e=>e.id===t))}),[r,d,t,o]))return null;const h=()=>{n("")},m=function(){var e=(0,s.A)((function*(){try{""===(yield ie(t))?(u?(0,T.vE)("editingPopupActions",{actionList:r.actionList.filter((e=>e.id!==t)),moreActionList:r.moreActionList.filter((e=>e.id!==t))}):(0,T.vE)("readingPopupActions",{actionList:d.actionList.filter((e=>e.id!==t)),moreActionList:d.moreActionList.filter((e=>e.id!==t))}),je(i("flow_web_ext_setting_toolbar_skilldeleted"))):we(i("flow_web_ext_setting_toolbar_deletefailed"))}catch(e){we(i("flow_web_ext_setting_toolbar_deletefailed"))}h()}));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(c.aF,{centered:!0,visible:!0,footer:null,header:(0,g.jsx)(rt.A,{className:ye.warningIcon}),onCancel:h,style:{width:"360px"},className:ye.deletePrompt,children:[(0,g.jsx)("div",{className:ye.tips,children:i("flow_web_ext_setting_toolbar_deletepopup_notice")}),(0,g.jsxs)("div",{className:ye.btn,children:[(0,g.jsx)("button",{className:ye.deleteBtn,onPointerUp:m,"data-testid":"modal-delete-btn",children:i("flow_web_ext_setting_toolbar_deletepopup_delete")}),(0,g.jsx)("button",{className:ye.cancelBtn,onPointerUp:h,children:i("flow_web_ext_setting_toolbar_deletepopup_cancel")})]})]})};var ct=n(30457);const dt=e=>{const{setPromptEditorInfo:t,setDiscoverSkillVisible:n}=e,[s]=(0,L.Y)("authInfo"),o=(0,l.B)(),i=(0,a.useCallback)((()=>{s.isAuthenticated?(t({visible:!0}),(0,W.z8)(G.Ur.newSkillAdd,{})):(0,ct.DT)()}),[s]),r=(0,a.useCallback)((()=>{s.isAuthenticated?n(!0):(0,ct.DT)()}),[s]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:ye.skillBtnContainer,children:[(0,g.jsxs)("button",{className:ye.newPromptBtn,onPointerUp:i,"data-testid":"option-select-addSkill",children:[(0,g.jsx)("div",{className:ye.icon,children:(0,g.jsx)(De.WGN,{})}),(0,g.jsx)("span",{className:ye.lable,children:o("flow_web_ext_setting_toolbar_addskill")})]}),(0,g.jsxs)("button",{className:ye.discoverBtn,onPointerUp:r,"data-testid":"option-select-discoverSkill",children:[(0,g.jsx)("div",{className:ye.icon,children:(0,g.jsx)(De.k4K,{})}),(0,g.jsx)("span",{className:ye.lable,children:o("flow_web_ext_setting_toolbar_discover")})]})]})})},ut={tabs:"tabs-MSRfYc","tab-item":"tab-item-eF1G15",tabItem:"tab-item-eF1G15",active:"active-oXYXEO","tab-content":"tab-content-o82cP7",tabContent:"tab-content-o82cP7",content:"content-TPd3QO",inactive:"inactive-D3tZ2L","slide-in-left":"slide-in-left-ggLvMN",slideInLeft:"slide-in-left-ggLvMN",leftShow:"leftShow-K0b9fN","slide-in-right":"slide-in-right-j_jsFV",slideInRight:"slide-in-right-j_jsFV",rightShow:"rightShow-rSlf0f"},ht=({children:e})=>(0,g.jsx)("div",{children:e}),mt=e=>{const[t,n]=(0,a.useState)(!1),{children:s,className:o,onChange:i}=e,l=a.Children.toArray(s).filter((e=>a.isValidElement(e)&&"itemKey"in e.props)),[c,d]=(0,a.useState)(e.activeKey||l[0].props.itemKey),[u,h]=(0,a.useState)(""),[m,p]=(0,a.useState)(!0);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:r()(ut.tabs,o),children:l.map((e=>{const{itemTitle:t,itemKey:s}=e.props;return(0,g.jsx)("div",{className:r()(ut["tab-item"],{[ut.active]:c===s}),onClick:()=>{c!==s&&(h(c),d(s),p(!1),n(!0),null==i||i(s))},"data-testid":`tab-${s}`,children:t},s)}))}),(0,g.jsx)("div",{className:ut["tab-content"],children:l.map(((e,s)=>{const a=e.props.itemKey===c;let o="left";if(a){o=l.findIndex((e=>e.props.itemKey===u))>s?"right":o}return(0,g.jsx)("div",{className:r()(ut.content,{[ut[`slide-in-${o}`]]:a&&!m&&t,[ut.inactive]:!a}),onAnimationEnd:()=>{setTimeout((()=>{n(!1)}),300)},"data-testid":`content-${e.props.itemKey}`,children:e.props.children})}))})]})};let pt=!0;const gt=()=>{const[e,t]=(0,a.useState)("while_reading_websites"),[n,s]=(0,a.useState)({visible:!1,editId:""}),[o,i]=(0,a.useState)(!1),[r,c]=(0,a.useState)(""),d=(0,l.B)(),u=[{key:"while_reading_websites",title:d("flow_web_ext_setting_toolbar_websites")},{key:"while_editing_texts",title:d("flow_web_ext_setting_toolbar_texts")}];return(0,a.useEffect)((()=>{if(pt){const e=new URLSearchParams(window.location.search),t=e.get("add_prompt"),n=e.get("discover_skill");t?s({visible:!0}):n&&i(!0)}pt=!1}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:H.skillHeader,children:[(0,g.jsx)("h2",{className:M,style:{paddingLeft:"0px",marginTop:"0px"},children:d("flow_web_ext_setting_toolbar_skillmanage")}),(0,g.jsx)(dt,{setPromptEditorInfo:s,setDiscoverSkillVisible:i})]}),(0,g.jsx)(mt,{onChange:e=>{t(e)},children:u.map((t=>(0,g.jsx)(ht,{itemKey:t.key,itemTitle:t.title,children:(0,g.jsx)(Ie,{tabType:t.key,isActive:t.key===e,setPromptEditorInfo:s,setDeleteId:c})},t.key)))}),(0,g.jsx)(Te,{info:n,setInfo:s,activeKey:e}),(0,g.jsx)(lt,{id:r,setId:c,activeKey:e}),(0,g.jsx)(it,{visible:o,setVisible:i})]})};var _t=n(56422),vt=n(16604);const ft=(e,t)=>(0,vt.wz)((0,T.TK)("uiLanguage")).startsWith("zh")?e:t,xt=(e,t)=>(0,_t.A)(e,(e=>e!==t)),It="site-oDvfBz",bt="info-nvmdGB",At="favicon-vxaS0i",yt="url-RH7gtl",jt="icon-CZnTFF",wt=e=>{const{url:t,favicon:n,onDelete:s}=e,[o,i]=(0,a.useState)(n);return(0,g.jsxs)("div",{className:It,children:[(0,g.jsxs)("div",{className:bt,children:[(0,g.jsx)("img",{src:o,className:At,onError:()=>i("")}),(0,g.jsx)("span",{className:yt,children:t})]}),(0,g.jsx)(h.E,{className:jt,onClick:s})]})},St="wrapper-nvcfa9",kt="caption-nxFLd1",Mt="sites-FUMhtM",Ct=e=>{const{className:t,style:n,disableHosts:s,onDeleteHost:a}=e,o=(0,l.B)();return(0,g.jsxs)("div",{className:r()(St,t),style:n,children:[(0,g.jsx)("div",{className:kt,children:o("flow_web_ext_setting_disable")}),(0,g.jsx)("div",{className:Mt,children:s.map((e=>(0,g.jsx)(wt,{url:e,favicon:`https://s2.googleusercontent.com/s2/favicons?domain=${e}&sz=32`,onDelete:()=>null==a?void 0:a(e)},e)))})]})},Et="wrapper-p7UmGt",Nt="caption-XgSv4j",Tt="card-XVYKUn",Lt="illustration-B8ZpHE",Pt="global-switch-rJTPzM",Rt="meta-WdO3zg",Dt="description-fS3Hwv",Ft="switch-BIJos3",Bt=e=>{const{className:t,style:n,caption:s,illustration:a,globalDisableIcon:o,globalDisable:i=!1,enableGlobalDisable:l=!0,globalDisableDescription:d,disableHosts:u,onDeleteHost:h,onGlobalDisableChange:m}=e;return(0,g.jsxs)("div",{className:r()(Et,t),style:n,children:[s&&(0,g.jsx)("div",{className:Nt,children:s}),(0,g.jsxs)("div",{className:Tt,children:[(0,g.jsx)("img",{className:Lt,src:a}),(0,g.jsxs)("div",{className:Pt,children:[(0,g.jsxs)("div",{className:Rt,children:[o,(0,g.jsx)("span",{className:Dt,children:d})]}),l&&(0,g.jsx)(c.dO,{className:Ft,checked:!i,onChange:e=>null==m?void 0:m(!e)})]})]}),u&&u.length>0?(0,g.jsx)(Ct,{style:{marginTop:24},disableHosts:u,onDeleteHost:h}):null]})},Ot=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsxs)("g",{clipPath:"url(#select-bar_svg__a)",children:[(0,g.jsx)("path",{fill:"url(#select-bar_svg__b)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M10.537 11.625a.4.4 0 0 1-.287-.111.4.4 0 0 1-.111-.287q0-.165.111-.27a.4.4 0 0 1 .287-.111h4.465q.17 0 .281.111.111.105.112.27a.4.4 0 0 1-.112.287.38.38 0 0 1-.281.111zm0 5.074a.4.4 0 0 1-.287-.105.37.37 0 0 1-.111-.276q0-.17.111-.28a.38.38 0 0 1 .287-.118h4.465q.17 0 .281.117a.38.38 0 0 1 .112.281q0 .164-.112.276a.4.4 0 0 1-.281.105zm-1.465 2.678q-1.002 0-1.535-.533-.533-.528-.533-1.524v-7.09q0-1.001.533-1.529.534-.527 1.535-.527h9.85q1.008 0 1.535.533.533.528.533 1.523v7.09q0 .996-.533 1.524-.528.533-1.535.533zm.164-1.512h9.522q.351 0 .533-.175.188-.182.188-.557v-6.72q0-.375-.188-.552-.182-.175-.533-.175H9.236q-.351 0-.539.175-.18.177-.181.551v6.72q0 .375.181.557.188.176.54.176m.78-2.73q-.38 0-.598-.223t-.217-.61v-1.077q0-.387.217-.61t.598-.222h7.974q.387 0 .598.222.216.223.217.61v1.078q0 .385-.217.61-.21.221-.598.222zm.521-.973h2.654a.38.38 0 0 0 .282-.111.4.4 0 0 0 .111-.287.381.381 0 0 0-.393-.38h-2.654a.4.4 0 0 0-.287.11.37.37 0 0 0-.111.27q0 .17.111.287.111.111.287.111"})]}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("linearGradient",{id:"select-bar_svg__b",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]}),(0,g.jsx)("clipPath",{id:"select-bar_svg__a",children:(0,g.jsx)("path",{fill:"#fff",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"})})]})]})),Ut=()=>{const e=(0,l.B)(),[t,n]=(0,L.Y)("quickDisabledAll"),[s,a]=(0,L.Y)("quickDisabledHosts"),o=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/select.a1b2aaa4.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/select.4221eba8.png");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_toolbarconfig")}),(0,g.jsx)(Bt,{illustration:o,globalDisableIcon:(0,g.jsx)(Ot,{}),globalDisableDescription:e("flow_web_ext_setting_toolbar_switch"),globalDisable:t,onGlobalDisableChange:n}),(0,g.jsx)(q,{}),(0,g.jsx)(gt,{}),s.length>0&&(0,g.jsx)(Ct,{style:{marginTop:12},disableHosts:s,onDeleteHost:e=>a(xt(s,e))})]})};var qt=n(94870);const Ht="block-UcURQc",zt="block-content-t0t0P2",Kt="container-GNWTvX",Vt="click-A2pCsm",Wt="disabled-VgitEk",Gt="underline-content-2_U9e2",Qt="main-icon-pqv5Od",Yt="left-mm79TQ",$t="content-wDCS9L",Xt="main-title-JxTiYy",Zt="right-gP4Gne",Jt="next-icon-DtnX_p",en=e=>{const{className:t,children:n}=e;return(0,g.jsx)("div",{className:r()(Ht,t),children:(0,g.jsx)("div",{className:zt,children:n})})},tn=e=>{const{icon:t,title:n,component:s,onClick:a,className:o,cssStyle:i,showNextIcon:l=!0,disabled:c=!1}=e;return(0,g.jsx)("div",{className:r()(Kt,o,{[Vt]:Boolean(a),[Wt]:c}),style:(0,V.A)({},i),onClick:a,children:(0,g.jsxs)("div",{className:Gt,children:[(0,g.jsxs)("div",{className:Yt,children:[t&&(0,g.jsx)(qt.Ay$,{className:Qt,svg:t}),(0,g.jsx)("div",{className:$t,children:(0,g.jsx)("div",{className:Xt,children:n})})]}),(0,g.jsx)("div",{className:Zt,children:s||l&&(0,g.jsx)(h.Pl,{className:r()(Jt)})})]})})},nn="input-container-UmtZ0k",sn="show-border-uCWd_r",an="warning-ddPaWs",on="input-area-s9rXqY",rn="placeholder-nccdFD",ln="delete-icon-sEmhxt",cn="sider-icon-sxkaAy",dn="translate-icon-vfpY1z",un="read-icon-Ucp0v8",hn="card-iXDqT7",mn="menu-zyUlZN",pn="title-y9PLcE",gn="item-ZnfUJ1",_n="divider-SO7nO3";var vn=n(17373),fn=n(13959),xn=n(7685),In=n.n(xn),bn=n(44644);const An="samantha-toast-container";if(bn.MaB){if(!document.getElementById(An)){const e=document.createElement("div");e.id=An,document.body.appendChild(e)}}const yn=c.EY.create({getPopupContainer:()=>bn.MaB?document.getElementById(An):null});var jn=n(16526),wn=n(9380);n(39275);const Sn=({type:e})=>{const t=(0,l.B)(),{isMac:n,showBorder:s,warning:o,shortcutKey:i,dropdownVisible:d,handleClickInputBox:u,inputBoxClickOutside:h,handleKeyDown:m,handleInputKey:p,dropdownContentRender:_}=(e=>{const[t,n]=(0,a.useState)(!1),[s,o]=(0,a.useState)(!1),{shortcutKey:i,setShortcutKey:r}=(0,wn.Z)(e),[c,d]=(0,a.useState)(i),[u,h]=(0,a.useState)(!1),m=(0,l.B)(),p=(0,a.useMemo)((()=>"macos"===In().getParser(navigator.userAgent).getOSName(!0)),[]);(0,a.useEffect)((()=>{t||(""===c||c.endsWith("+"))&&d(i)}),[c,t]);const _=(0,a.useMemo)((()=>[`${p?vn.vK.Command:vn.vK.Ctrl}+K`,`${p?vn.vK.Option:vn.vK.Alt}+K`,`${vn.vK.Ctrl}+${vn.vK.Shift}+L`]),[]),v=e=>{""===e?(d(""),o(!0)):(d(e),o(!1))},f=t=>{const n=(0,T.gv)();if(n){const s=t.split("+");if(Object.keys(n).find((t=>{const a=n[t].key.split("+");if(e===t)return!1;if(s.length!==a.length)return!1;for(let e=s.length-1;e>=0;e-=1)if(!a.includes(s[e]))return!1;return!0})))return v(""),void yn.warning({content:m("flow_web_ext_setting_shortcut_fail_confilct"),showClose:!1,theme:"light"})}v(t),r(t)};return{isMac:p,showBorder:t,warning:s,shortcutKey:c,dropdownVisible:u,handleClickInputBox:()=>{n(!0),e===jn.e.OpenSide&&h(!0)},inputBoxClickOutside:()=>{n(!1),o(!1),h(!1)},handleKeyDown:e=>{if("Backspace"===e.key)return v(""),void e.preventDefault();let t=!1,n="";if(e.ctrlKey&&(n+=`${vn.vK.Ctrl}+`,t=!0,v(n)),e.metaKey&&(n+=`${p?vn.vK.Command:vn.vK.Windows}+`,t=!0,v(n)),e.altKey&&(n+=`${p?vn.vK.Option:vn.vK.Alt}+`,t=!0,v(n)),e.shiftKey&&(n+=`${vn.vK.Shift}+`,t&&v(n)),t){const t=(0,vn.Lj)(e.code);""!==t&&(n+=t,f(n))}else v("");e.preventDefault()},handleInputKey:v,dropdownContentRender:({itemClassName:e})=>(0,g.jsx)(g.Fragment,{children:_.map((t=>(0,g.jsx)("div",{className:e,onMouseDown:()=>f(t),children:(0,vn.o)(t)})))})}})(e),v=(0,fn.A)((()=>{h()}));(0,a.useEffect)((()=>{if(s)return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}}),[s]);return(0,g.jsx)(c.ms,{trigger:"custom",visible:d,position:"bottomLeft",render:(0,g.jsxs)(c.ms.Menu,{className:mn,children:[(0,g.jsx)("div",{className:pn,children:t(n?"flow_web_ext_setting_shortcut_sidebar_tip_mac":"flow_web_ext_setting_shortcut_sidebar_tip_win")}),(0,g.jsx)(c.ms.Divider,{className:_n}),_({itemClassName:gn})]}),className:r()(hn,"cici-ext-always-light","semi-always-light"),children:(0,g.jsxs)("div",{ref:v,className:r()(nn,{[sn]:s&&!o,[an]:o}),onClick:u,children:[(0,g.jsx)("div",{className:r()(on,{[rn]:""===i}),children:""===i?t("flow_web_ext_setting_shortcut_sidebar_placeholder","\u70b9\u51fb\u8bbe\u7f6e\u5feb\u6377\u952e"):(0,vn.o)(i)}),(0,g.jsx)(De.o40,{className:ln,onClick:()=>p("")})]})})},kn=()=>{const e=(0,l.B)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_shortcut")}),(0,g.jsx)(en,{children:(0,g.jsx)(Mn,{})})]})},Mn=()=>{const e=(0,l.B)(),t=[{icon:(0,g.jsx)(De.Hvn,{className:cn}),title:e("flow_web_ext_setting_shortcut_sidebar","\u5524\u8d77\u4fa7\u8fb9\u680f"),showNextIcon:!1,component:(0,g.jsx)(Sn,{type:jn.e.OpenSide})},{icon:(0,g.jsx)(De.ZR1,{className:dn}),title:e("flow_web_ext_setting_shortcut_translate_webpage","\u7ffb\u8bd1\u6b64\u7f51\u9875"),showNextIcon:!1,component:(0,g.jsx)(Sn,{type:jn.e.TranslatePage})},{icon:(0,g.jsx)(De.oZ9,{className:un}),title:e("flow_web_ext_setting_shortcut_summarize_webpage","\u603b\u7ed3\u6b64\u7f51\u9875"),showNextIcon:!1,component:(0,g.jsx)(Sn,{type:jn.e.ReadPage})}];return(0,g.jsx)("div",{children:t.map((e=>(0,g.jsx)(tn,{icon:e.icon,title:e.title,showNextIcon:e.showNextIcon,component:e.component})))})},Cn=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsx)("path",{fill:"url(#writing_svg__a)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M10.097 12.085q.07.062.16.062.098 0 .164-.062a.26.26 0 0 0 .084-.159q.056-.37.117-.623.063-.252.161-.415a.75.75 0 0 1 .257-.26q.16-.095.405-.15.245-.058.6-.099a.246.246 0 0 0 .23-.25.23.23 0 0 0-.065-.162.27.27 0 0 0-.163-.087 7 7 0 0 1-.597-.107 1.4 1.4 0 0 1-.396-.154.8.8 0 0 1-.254-.254 1.5 1.5 0 0 1-.166-.408 8 8 0 0 1-.13-.621.26.26 0 0 0-.085-.158.23.23 0 0 0-.161-.063.24.24 0 0 0-.163.063.25.25 0 0 0-.082.158 7 7 0 0 1-.117.623 1.5 1.5 0 0 1-.163.415.8.8 0 0 1-.257.26q-.159.095-.403.15a6 6 0 0 1-.602.096.25.25 0 0 0-.163.084.24.24 0 0 0-.065.166q0 .097.063.165a.27.27 0 0 0 .163.084q.357.053.597.11.242.059.398.154a.75.75 0 0 1 .252.254q.097.159.165.408.068.252.132.621.017.096.084.159"}),(0,g.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M9.157 16.048a.9.9 0 0 1 .192-.284l6.906-6.96q.384-.386.815-.38.438.005.827.39l1.151 1.168q.39.39.39.83 0 .434-.384.819l-6.901 6.961q-.069.064-.133.112a.7.7 0 0 1-.16.08c-.104.044-.248.111-.42.19-.942.436-2.718 1.256-3.295.781-.565-.466.314-2.266.787-3.232.098-.2.178-.365.225-.475m8.566-4.513.613-.618a.5.5 0 0 0 .085-.107.5.5 0 0 0-.09-.114l-.003-.003L17.18 9.53a.5.5 0 0 0-.116-.09.5.5 0 0 0-.092.077l-.625.63zm-2.088-.67 1.375 1.389-5.553 5.602q-.236.1-.518.234c-.364.169-.79.366-1.281.546a6 6 0 0 1-.603.188q.066-.229.181-.525c.138-.352.307-.715.465-1.042l.124-.255c.1-.204.196-.401.255-.537zm-6.661 8.393q.002.024.001.025t-.001-.025",clipRule:"evenodd"}),(0,g.jsx)("path",{fill:"#fff",d:"M18.014 19.899a.28.28 0 0 1-.197-.076.34.34 0 0 1-.102-.194 9 9 0 0 0-.162-.759 1.9 1.9 0 0 0-.202-.498.9.9 0 0 0-.307-.31 1.7 1.7 0 0 0-.487-.188 9 9 0 0 0-.73-.135.33.33 0 0 1-.199-.102.3.3 0 0 1-.076-.203q0-.117.08-.202a.3.3 0 0 1 .199-.102q.436-.051.735-.117.3-.068.492-.185a.95.95 0 0 0 .314-.317 1.8 1.8 0 0 0 .199-.506q.076-.31.144-.762a.3.3 0 0 1 .1-.194.3.3 0 0 1 .198-.076q.115 0 .197.076a.32.32 0 0 1 .105.194q.08.45.159.759.081.305.202.498.12.193.31.31.19.118.484.188.295.07.73.132a.33.33 0 0 1 .199.105q.079.085.079.2a.3.3 0 0 1-.282.304q-.433.05-.732.12-.3.068-.495.185a.9.9 0 0 0-.314.316q-.12.2-.196.507-.076.31-.144.762a.3.3 0 0 1-.102.194.28.28 0 0 1-.2.076"}),(0,g.jsx)("defs",{children:(0,g.jsxs)("linearGradient",{id:"writing_svg__a",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]})})]})),En=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsx)("path",{fill:"url(#grammar_svg__a)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M17.674 18.324q-.633 0-1.12-.24a1.9 1.9 0 0 1-.755-.668 1.83 1.83 0 0 1-.27-.996q0-.844.616-1.336.62-.498 1.775-.562l1.828-.1v-.487q0-.578-.363-.914-.363-.334-1.002-.334-.528 0-.885.223t-.615.703a.56.56 0 0 1-.217.2.6.6 0 0 1-.287.064.56.56 0 0 1-.387-.135.48.48 0 0 1-.146-.363q0-.094.029-.194.03-.105.076-.21.246-.58.914-.92.669-.346 1.559-.346.78 0 1.348.27.567.263.878.744.31.48.31 1.125v3.867q0 .293-.163.451a.58.58 0 0 1-.428.164.6.6 0 0 1-.422-.152.57.57 0 0 1-.164-.416V17.1h-.03q-.18.375-.503.65-.316.276-.727.422a2.4 2.4 0 0 1-.85.152m.328-.937q.487 0 .885-.205.397-.211.627-.557.234-.351.234-.791v-.598l-1.664.106q-.639.046-.984.322a.86.86 0 0 0-.34.709q0 .457.345.738.346.276.897.276m-10.313.902q-.304 0-.48-.164-.17-.165-.17-.457a1.3 1.3 0 0 1 .076-.404l2.608-7.032q.257-.732 1.02-.732.403 0 .655.182.258.18.393.55l2.59 7.002q.082.229.082.422 0 .294-.188.463-.18.17-.492.17-.293 0-.463-.135-.164-.129-.258-.445l-.65-1.816H9.066l-.65 1.816q-.093.316-.264.445-.163.135-.463.135m1.717-3.486h2.678l-1.324-3.809h-.03z"}),(0,g.jsx)("defs",{children:(0,g.jsxs)("linearGradient",{id:"grammar_svg__a",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]})})]})),Nn=()=>{const e=(0,l.B)(),[t,n]=(0,L.Y)("InputAssistantDisabledAll"),[s,a]=(0,L.Y)("InputAssistantDisabledHosts"),[o,i]=(0,L.Y)("disableGlobalGrammar"),[r,c]=(0,L.Y)("disableGrammarHosts"),d=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/writing.20ba2e0d.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/writing.b041b3e3.png"),u=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/grammar.52821f7a.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/grammar.8180966d.png");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_writing")}),(0,g.jsx)(Bt,{caption:e("flow_web_ext_setting_writing_title_writing"),illustration:d,globalDisableIcon:(0,g.jsx)(Cn,{}),globalDisableDescription:e("flow_web_ext_setting_writing_switch_writing"),globalDisable:t,onGlobalDisableChange:n,disableHosts:s,onDeleteHost:e=>a(xt(s,e))}),(0,g.jsx)(Bt,{style:{marginTop:36},caption:e("flow_web_ext_setting_writing_title_grammar"),illustration:u,globalDisable:o,onGlobalDisableChange:i,globalDisableIcon:(0,g.jsx)(En,{}),globalDisableDescription:e("flow_web_ext_setting_writing_switch_grammar"),disableHosts:r,onDeleteHost:e=>c(xt(r,e))})]})},Tn="https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/video-summary.0db09d2a.png",Ln=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsx)("path",{fill:"url(#video-summary_svg__a)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M11.75 10.73q-.165 0-.27-.105a.36.36 0 0 1-.1-.258q0-.152.1-.252.105-.105.27-.105h4.723q.158 0 .258.105.105.1.105.252a.35.35 0 0 1-.105.258.34.34 0 0 1-.258.105zm0 1.7q-.165 0-.27-.106a.36.36 0 0 1-.1-.258q0-.152.1-.252.105-.105.27-.105h2.771q.159 0 .258.106.105.1.106.251a.35.35 0 0 1-.106.258.34.34 0 0 1-.258.106zm.088 5.8q-.37 0-.58-.193-.205-.2-.205-.586v-3.258q0-.387.205-.586.21-.198.58-.199h4.33q.78 0 .78.785v3.258q0 .78-.78.78zm-2.766.217V9.56q0-.915.451-1.377.457-.463 1.366-.463h6.222q.909 0 1.36.463.456.462.457 1.377v8.888q0 .921-.457 1.377-.451.457-1.36.457H10.89q-.908 0-1.366-.457-.45-.457-.45-1.377m.944-.017q0 .439.228.674.235.234.691.234h6.13q.457 0 .685-.235.234-.234.234-.673V9.576q0-.439-.234-.674-.227-.24-.686-.24h-6.129q-.457 0-.69.24-.23.235-.23.674z"}),(0,g.jsx)("defs",{children:(0,g.jsxs)("linearGradient",{id:"video-summary_svg__a",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]})})]})),Pn=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsx)("path",{fill:"url(#video-subtitle_svg__a)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M11.274 7.735a.56.56 0 0 0-.697.878l.001.001.012.01a2 2 0 0 1 .123.11h-1.96a.56.56 0 1 0 0 1.12h.654c.28.834.652 1.507 1.36 2.312-.742.559-1.66.94-2.309 1.038a.56.56 0 0 0 .17 1.11c.878-.135 2.027-.627 2.93-1.343.607.52 1.428.996 1.954 1.28a.56.56 0 0 0 .534-.986c-.502-.272-1.177-.67-1.67-1.07a7.9 7.9 0 0 0 1.44-2.34h.487a.56.56 0 0 0 0-1.122h-2.128a4.762 4.762 0 0 0-.867-.971l-.023-.018-.007-.006-.002-.002zm.31 3.662c-.49-.56-.772-1.025-.983-1.542h1.993a6.9 6.9 0 0 1-1.01 1.542",clipRule:"evenodd"}),(0,g.jsx)("path",{fill:"#fff",d:"M15.819 7.884a.56.56 0 1 0 0 1.122h1.818c.695 0 1.258.563 1.258 1.258v1.819a.56.56 0 1 0 1.122 0v-1.82a2.38 2.38 0 0 0-2.38-2.379z"}),(0,g.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M17.067 12.588a.56.56 0 0 0-.525.365l-2.316 6.21a.561.561 0 0 0 1.05.391l.543-1.454h2.497l.542 1.454a.561.561 0 0 0 1.051-.392l-2.316-6.209a.56.56 0 0 0-.526-.365m0 2.166.83 2.225h-1.66z",clipRule:"evenodd"}),(0,g.jsx)("path",{fill:"#fff",d:"M8.543 15.16a.56.56 0 0 0-.56.56v1.82a2.38 2.38 0 0 0 2.38 2.38h1.818a.56.56 0 1 0 0-1.122h-1.819a1.26 1.26 0 0 1-1.258-1.258v-1.82a.56.56 0 0 0-.56-.56"}),(0,g.jsx)("defs",{children:(0,g.jsxs)("linearGradient",{id:"video-subtitle_svg__a",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]})})]})),Rn="https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/video-summary.9de87f1d.png",Dn=()=>{const e=(0,l.B)(),[t,n]=(0,L.Y)("videoSummaryDisableAll"),[s,a]=(0,L.Y)("videoSummaryDisableHosts"),[o,i]=(0,L.Y)("videoSubtitleDisableAll"),[r,c]=(0,L.Y)("videoSubtitleDisableHosts"),d=ft(Tn,Rn)?Rn:Tn,u=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/video-subtitle-translation.239e8cc7.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/video-subtitle-translation.f577629c.png");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_video")}),(0,g.jsx)(Bt,{caption:e("flow_web_ext_setting_video_title_summary"),illustration:d,globalDisable:t,onGlobalDisableChange:n,globalDisableIcon:(0,g.jsx)(Ln,{}),globalDisableDescription:e("flow_web_ext_setting_video_switch"),disableHosts:s,onDeleteHost:e=>a(xt(s,e))}),(0,g.jsx)(Bt,{style:{marginTop:36},caption:e("flow_web_ext_setting_video_title_subtitles"),illustration:u,globalDisable:o,onGlobalDisableChange:i,globalDisableIcon:(0,g.jsx)(Pn,{}),globalDisableDescription:e("flow_web_ext_setting_video_switch"),disableHosts:r,onDeleteHost:e=>c(xt(r,e))})]})},Fn=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsxs)("g",{clipPath:"url(#float-btn-entry_svg__a)",children:[(0,g.jsx)("path",{fill:"url(#float-btn-entry_svg__b)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M8.97 19.406q-1.023 0-1.568-.545-.543-.538-.544-1.555V10.07q0-1.017.544-1.556.545-.543 1.568-.544h10.054q1.03 0 1.568.544.544.54.544 1.556v7.237q0 1.017-.544 1.555-.54.545-1.568.545zm.167-1.544h9.72q.359 0 .544-.179.192-.18.192-.562v-6.867q0-.383-.192-.562-.185-.18-.544-.18h-9.72q-.36 0-.55.18-.186.18-.186.562v6.867q0 .382.186.562.19.18.55.18m5.467.198V9.28h1.424v8.78zm2.638-6.406a.48.48 0 0 1-.347-.138.456.456 0 0 1 0-.652.48.48 0 0 1 .347-.137h1.13q.204 0 .341.137a.44.44 0 0 1 0 .652.46.46 0 0 1-.34.138zm0 1.692a.48.48 0 0 1-.347-.137.44.44 0 0 1-.138-.323q0-.185.138-.323a.48.48 0 0 1 .347-.138h1.13q.204 0 .341.138a.433.433 0 0 1 0 .646.46.46 0 0 1-.34.137zm0 1.7a.48.48 0 0 1-.347-.138.44.44 0 0 1-.138-.323.43.43 0 0 1 .138-.323.48.48 0 0 1 .347-.138h1.13q.204 0 .341.138a.433.433 0 0 1 0 .646.46.46 0 0 1-.34.137z"})]}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("linearGradient",{id:"float-btn-entry_svg__b",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]}),(0,g.jsx)("clipPath",{id:"float-btn-entry_svg__a",children:(0,g.jsx)("path",{fill:"#fff",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"})})]})]})),Bn=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsx)("path",{fill:"url(#chat-float-card_svg__a)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M12.4 21.271q-.171.225-.375.27a.5.5 0 0 1-.376-.039.47.47 0 0 1-.23-.283q-.067-.192.039-.462l1.951-5.168H9.645a.53.53 0 0 1-.369-.132.47.47 0 0 1-.138-.342q0-.218.178-.449l6.163-7.85q.172-.225.376-.277a.48.48 0 0 1 .369.04.47.47 0 0 1 .237.283q.066.197-.04.461l-1.95 5.175h3.763q.224 0 .363.132.145.131.145.336 0 .217-.178.448zm.39-1.832-.231-.106 4.357-5.774h-4.094l2.268-4.91.23.098-4.363 5.781h4.1z"}),(0,g.jsx)("defs",{children:(0,g.jsxs)("linearGradient",{id:"chat-float-card_svg__a",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]})})]}));var On=n(34350);const Un=()=>{const e=(0,l.B)(),[t,n]=(0,L.Y)("sidebarButtonDisabledAll"),[s,a]=(0,L.Y)("sidebarButtonDisabledHosts"),[o,i]=(0,L.Y)("chatFloatCardDisableAll"),r=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/sider.82b0f068.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/sider.77a87299.png"),c=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/chat-float-card.8d9dbfaf.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/chat-float-card.e2ff2396.png");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_sidebar")}),(0,g.jsx)(Bt,{caption:e("flow_web_ext_setting_sidebar_title_icon",{brandName:(0,On.L2)()}),illustration:r,globalDisableIcon:(0,g.jsx)(Fn,{}),globalDisableDescription:e("flow_web_ext_setting_sidebar_switch_icon"),globalDisable:t,onGlobalDisableChange:n,disableHosts:s,onDeleteHost:e=>a(xt(s,e))}),(0,g.jsx)(Bt,{style:{marginTop:36},caption:e("flow_web_ext_setting_sidebar_title_inputbox_card"),illustration:c,globalDisableIcon:(0,g.jsx)(Bn,{}),globalDisableDescription:e("flow_web_ext_setting_sidebar_switch_inputbox_card"),globalDisable:o,onGlobalDisableChange:i})]})},qn=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsx)("path",{fill:"url(#search-summary_svg__a)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M11.75 10.73q-.165 0-.27-.105a.36.36 0 0 1-.1-.258q0-.152.1-.252.105-.105.27-.105h4.723q.158 0 .258.105.105.1.105.252a.35.35 0 0 1-.105.258.34.34 0 0 1-.258.105zm0 1.7q-.165 0-.27-.106a.36.36 0 0 1-.1-.258q0-.152.1-.252.105-.105.27-.105h2.771q.159 0 .258.106.105.1.106.251a.35.35 0 0 1-.106.258.34.34 0 0 1-.258.106zm.088 5.8q-.37 0-.58-.193-.205-.2-.205-.586v-3.258q0-.387.205-.586.21-.198.58-.199h4.33q.78 0 .78.785v3.258q0 .78-.78.78zm-2.766.217V9.56q0-.915.451-1.377.457-.463 1.366-.463h6.222q.909 0 1.36.463.456.462.457 1.377v8.888q0 .921-.457 1.377-.451.457-1.36.457H10.89q-.908 0-1.366-.457-.45-.457-.45-1.377m.944-.017q0 .439.228.674.235.234.691.234h6.13q.457 0 .685-.235.234-.234.234-.673V9.576q0-.439-.234-.674-.227-.24-.686-.24h-6.129q-.457 0-.69.24-.23.235-.23.674z"}),(0,g.jsx)("defs",{children:(0,g.jsxs)("linearGradient",{id:"search-summary_svg__a",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]})})]})),Hn=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsx)("path",{fill:"url(#search-result-preview_svg__a)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M11.75 10.73q-.165 0-.27-.105a.36.36 0 0 1-.1-.258q0-.152.1-.252.105-.105.27-.105h4.723q.158 0 .258.105.105.1.105.252a.35.35 0 0 1-.105.258.34.34 0 0 1-.258.105zm0 1.7q-.165 0-.27-.106a.36.36 0 0 1-.1-.258q0-.152.1-.252.105-.105.27-.105h2.771q.159 0 .258.106.105.1.106.251a.35.35 0 0 1-.106.258.34.34 0 0 1-.258.106zm.088 5.8q-.37 0-.58-.193-.205-.2-.205-.586v-3.258q0-.387.205-.586.21-.198.58-.199h4.33q.78 0 .78.785v3.258q0 .78-.78.78zm-2.766.217V9.56q0-.915.451-1.377.457-.463 1.366-.463h6.222q.909 0 1.36.463.456.462.457 1.377v8.888q0 .921-.457 1.377-.451.457-1.36.457H10.89q-.908 0-1.366-.457-.45-.457-.45-1.377m.944-.017q0 .439.228.674.235.234.691.234h6.13q.457 0 .685-.235.234-.234.234-.673V9.576q0-.439-.234-.674-.227-.24-.686-.24h-6.129q-.457 0-.69.24-.23.235-.23.674z"}),(0,g.jsx)("defs",{children:(0,g.jsxs)("linearGradient",{id:"search-result-preview_svg__a",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]})})]})),zn=()=>{const e=(0,l.B)(),[t,n]=(0,L.Y)("searchDisabledAll"),[s,a]=(0,L.Y)("searchDisabledHosts"),[o,i]=(0,L.Y)("linkPreviewDisabledAll"),[r,c]=(0,L.Y)("linkPreviewDisabledHosts"),d=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/search.b9e474e5.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/search.efb61719.png"),u=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/search-result-preview.f5ecad88.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/search-result-preview.69c11879.png");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_search_summary")}),(0,g.jsx)(Bt,{caption:e("flow_web_ext_setting_search_summary_title_summary"),illustration:d,globalDisableIcon:(0,g.jsx)(qn,{}),globalDisableDescription:e("flow_web_ext_setting_search_summary_switch_summary"),globalDisable:t,onGlobalDisableChange:n,disableHosts:s,onDeleteHost:e=>a(xt(s,e))}),(0,g.jsx)(Bt,{style:{marginTop:36},caption:e("flow_web_ext_setting_search_summary_title_preview"),illustration:u,globalDisableIcon:(0,g.jsx)(Hn,{}),globalDisableDescription:e("flow_web_ext_setting_search_summary_switch_preview"),globalDisable:o,onGlobalDisableChange:i,disableHosts:r,onDeleteHost:e=>c(xt(r,e))})]})},Kn=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsxs)("g",{clipPath:"url(#recommend-feed_svg__a)",children:[(0,g.jsx)("path",{fill:"url(#recommend-feed_svg__b)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M10.537 11.625a.4.4 0 0 1-.287-.111.4.4 0 0 1-.111-.287q0-.165.111-.27a.4.4 0 0 1 .287-.111h4.465q.17 0 .281.111.111.105.112.27a.4.4 0 0 1-.112.287.38.38 0 0 1-.281.111zm0 5.074a.4.4 0 0 1-.287-.105.37.37 0 0 1-.111-.276q0-.17.111-.28a.38.38 0 0 1 .287-.118h4.465q.17 0 .281.117a.38.38 0 0 1 .112.281q0 .164-.112.276a.4.4 0 0 1-.281.105zm-1.465 2.678q-1.002 0-1.535-.533-.533-.528-.533-1.524v-7.09q0-1.001.533-1.529.534-.527 1.535-.527h9.85q1.008 0 1.535.533.533.528.533 1.523v7.09q0 .996-.533 1.524-.528.533-1.535.533zm.164-1.512h9.522q.351 0 .533-.175.188-.182.188-.557v-6.72q0-.375-.188-.552-.182-.175-.533-.175H9.236q-.351 0-.539.175-.18.177-.181.551v6.72q0 .375.181.557.188.176.54.176m.78-2.73q-.38 0-.598-.223t-.217-.61v-1.077q0-.387.217-.61t.598-.222h7.974q.387 0 .598.222.216.223.217.61v1.078q0 .385-.217.61-.21.221-.598.222zm.521-.973h2.654a.38.38 0 0 0 .282-.111.4.4 0 0 0 .111-.287.381.381 0 0 0-.393-.38h-2.654a.4.4 0 0 0-.287.11.37.37 0 0 0-.111.27q0 .17.111.287.111.111.287.111"})]}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("linearGradient",{id:"recommend-feed_svg__b",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]}),(0,g.jsx)("clipPath",{id:"recommend-feed_svg__a",children:(0,g.jsx)("path",{fill:"#fff",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"})})]})]})),Vn=()=>{const e=(0,l.B)(),[t,n]=(0,L.Y)("disableSearchAddonsGlobal"),[s,a]=(0,L.Y)("disableSearchAddonsHosts"),o=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/feed.aa82d45f.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/feed.991be187.png");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_recommend")}),(0,g.jsx)(Bt,{illustration:o,globalDisableIcon:(0,g.jsx)(Kn,{}),globalDisableDescription:e("flow_web_ext_setting_recommend_switch"),globalDisable:t,onGlobalDisableChange:n,disableHosts:s,onDeleteHost:e=>a(xt(s,e))})]})},Wn=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},e),{},{children:[(0,g.jsx)("path",{fill:"url(#podcast-summary_svg__a)",d:"M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14"}),(0,g.jsx)("path",{fill:"#fff",d:"M11.875 10.856q-.165 0-.27-.106a.36.36 0 0 1-.1-.258q0-.152.1-.252.105-.105.27-.105h4.723q.158 0 .258.105.105.1.105.252a.35.35 0 0 1-.105.258.34.34 0 0 1-.258.105zm0 1.699q-.165 0-.27-.106a.36.36 0 0 1-.1-.258q0-.152.1-.252.105-.105.27-.105h2.771q.159 0 .258.106.105.1.106.251a.35.35 0 0 1-.106.258.34.34 0 0 1-.258.106zm.088 5.8q-.37 0-.58-.193-.205-.2-.205-.586v-3.258q0-.387.205-.586.21-.198.58-.199h4.33q.78 0 .78.785v3.258q0 .78-.78.78zm-2.766.217V9.684q0-.915.451-1.377.457-.463 1.366-.463h6.222q.909 0 1.36.463.456.462.457 1.377v8.888q0 .921-.457 1.377-.451.457-1.36.457h-6.222q-.908 0-1.366-.457-.45-.457-.45-1.377m.944-.017q0 .439.228.674.235.234.691.234h6.13q.457 0 .685-.235.234-.234.234-.673V9.7q0-.439-.234-.674-.227-.24-.686-.24H11.06q-.457 0-.69.24-.23.235-.23.674z"}),(0,g.jsx)("defs",{children:(0,g.jsxs)("linearGradient",{id:"podcast-summary_svg__a",x1:28,x2:-4.777,y1:28,y2:20.278,gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#44ADFE"}),(0,g.jsx)("stop",{offset:1,stopColor:"#5580FF"})]})})]})),Gn=()=>{const e=(0,l.B)(),[t,n]=(0,L.Y)("podcastSummaryDisableAll"),[s,a]=(0,L.Y)("podcastSummaryDisableHosts"),o=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/podcast-summary.e4b2725e.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/podcast-summary.006e282f.png");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_podcast")}),(0,g.jsx)(Bt,{style:{marginTop:36},illustration:o,globalDisable:t,onGlobalDisableChange:n,globalDisableIcon:(0,g.jsx)(Wn,{}),globalDisableDescription:e("flow_web_ext_setting_podcast_switch"),disableHosts:s,onDeleteHost:e=>a(xt(s,e))})]})};var Qn=n(88010),Yn=n(85886),$n=n(78285);const Xn=[{id:1,tab_name:"flow_web_ext_setting_general_select_voice_rec",recommend_type:1},{id:2,tab_name:"flow_web_ext_setting_general_select_voice_female",tab_key:"female",recommend_type:10},{id:3,tab_name:"flow_web_ext_setting_general_select_voice_male",tab_key:"male",recommend_type:10},{id:4,tab_name:"flow_web_ext_setting_general_select_voice_char",tab_key:"characters",recommend_type:10},{id:5,tab_name:"flow_web_ext_setting_general_select_voice_accent",tab_key:"accent",recommend_type:10}];var Zn=n(48512),Jn=n(49178);const es="speaker-selector-oh7mrC",ts="categories-Garn0U",ns="tab-Y0aL2A",ss="tab-active-SEgViS",as="list-container-u_Hxnd",os="enable-shadow-ervn8v",is="speaker-list-Ut7cp4",rs="speaker-item-XsLIAB",ls="selected-icon-rohU0f",cs="speaker-main-cGgbh_",ds="speaker-avatar-Cejryl",us="speaker-info-cANi7A",hs="speaker-name-kIpUVM",ms="speaker-tags-rQabqF",ps=({speaker:e,active:t,onSelect:n,audioLoading:s,audioPlaying:a})=>{var o;return(0,g.jsxs)("div",{onClick:()=>n(e),className:rs,children:[(0,g.jsxs)("div",{className:cs,children:[(0,g.jsx)("img",{src:e.avatarUrl,alt:e.name,className:ds}),(0,g.jsxs)("div",{className:us,children:[(0,g.jsx)("div",{className:hs,children:e.name}),(0,g.jsx)("div",{className:ms,children:null===(o=e.tags)||void 0===o?void 0:o.map((e=>(0,g.jsx)("span",{children:e},e)))})]})]}),(()=>{if(t)switch(!0){case s:return(0,g.jsx)(Jn.L,{size:22});case a:return(0,g.jsx)(Zn.d,{size:22});default:return(0,g.jsx)(De.eWz,{className:ls})}})()]},e.id)},gs=({onSelect:e})=>{var t;const n=(0,l.B)(),[s,o]=(0,a.useState)(1),i=(0,a.useRef)(null),{voicesMap:d,loadVoicesByTab:u}=(()=>{const[e,t]=(0,a.useState)({}),n=(0,a.useRef)(e);return n.current=e,{voicesMap:e,loadVoicesByTab:e=>{const s=n.current[e]||{page_index:0,data:[],loading:!1,hasMore:!0},a=Xn.find((t=>t.id===e));if(a&&!s.loading&&s.hasMore){t((t=>(0,V.A)((0,V.A)({},t),{},{[e]:(0,V.A)((0,V.A)({},s),{},{loading:!0})})));const n=s.page_index+1;$n.B.getVoices({page_index:n,page_size:30,recommend_type:a.recommend_type,tab_key:a.tab_key}).then((({hasMore:a,voices:o})=>{t((t=>(0,V.A)((0,V.A)({},t),{},{[e]:(0,V.A)((0,V.A)({},s),{},{data:[...s.data,...o],page_index:n,hasMore:a,loading:!1})})))}))}}}})(),h=null===(t=(0,L.Y)("voiceSpeaker")[0])||void 0===t?void 0:t.id,m=(0,a.useRef)(null),[p,_]=(0,a.useState)(!0),[v,f]=(0,a.useState)({speakerId:h,loading:!1,playing:!1}),x=d[s]||{},{data:I=[],loading:b=!0,hasMore:A}=x;(0,a.useEffect)((()=>{I.length||u(s)}),[s]),(0,a.useEffect)((()=>{const e=i.current;if(e){const t=(0,Yn.A)((()=>{const{offsetHeight:t,scrollTop:n,scrollHeight:a}=e;t+n>a-400&&u(s),_(t+n<a)}),300,{leading:!0,trailing:!0});return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[s]),(0,a.useEffect)((()=>{const e=document.createElement("audio");m.current=e;const t=()=>{f((e=>(0,V.A)((0,V.A)({},e),{},{loading:!1})))},n=()=>{f((e=>(0,V.A)((0,V.A)({},e),{},{playing:!1})))};return e.addEventListener("loadeddata",t),e.addEventListener("ended",n),()=>{e.removeEventListener("loadeddata",t),e.removeEventListener("ended",n),e.pause()}}),[]);const y=t=>{e(t),m.current&&(m.current.pause(),f({speakerId:t.id,loading:!0,playing:!0}),m.current.src=t.preview.previewMp3Url,m.current.play())};return(0,g.jsxs)("div",{className:es,children:[(0,g.jsx)("div",{className:ts,children:Xn.map((e=>(0,g.jsx)("span",{className:r()(ns,{[ss]:e.id===s}),onClick:()=>{o(e.id)},children:n(e.tab_name)},e.id)))}),(0,g.jsx)(c.tK,{spinning:b&&!I.length,wrapperClassName:r()(as,{[os]:A||p}),children:(0,g.jsx)("div",{ref:i,className:is,style:{height:"min(400px, calc(100vh - 320px))"},children:I.map((e=>(0,g.jsx)(ps,{speaker:e,active:e.id===v.speakerId,onSelect:y,audioLoading:v.loading,audioPlaying:v.playing},e.id)))})})]})},_s={modal:"modal-XXF22b",speaker:"speaker-AGtJ48",name:"name-Y5RQum",icon:"icon-QRg7XI"},vs=()=>{const e=(0,l.B)(),t=(0,a.useRef)(null),[n,s]=(0,a.useState)(!1),[o,i]=(0,L.Y)("voiceSpeaker"),[r,d]=(0,a.useState)(null);return(0,g.jsxs)("div",{className:_s["select-handler"],ref:t,children:[(0,g.jsxs)("div",{className:_s.speaker,onClick:()=>s(!0),children:[(0,g.jsx)("img",{src:null==o?void 0:o.avatarUrl}),(0,g.jsx)("span",{className:_s.name,children:null==o?void 0:o.name}),(0,g.jsx)(h.Pl,{className:_s.icon})]}),(0,g.jsx)(c.aF,{centered:!0,getPopupContainer:()=>t.current,width:480,title:e("flow_web_ext_setting_general_select_voice"),visible:n,onCancel:()=>s(!1),closable:!1,maskClosable:!1,keepDOM:!1,className:_s.modal,footer:(0,g.jsxs)("div",{children:[(0,g.jsx)("button",{style:{display:"none"},type:"button"}),(0,g.jsx)(Qn.c,{type:"quartary",autoFocus:!1,onClick:()=>s(!1),children:e("flow_web_ext_general_cancel")}),(0,g.jsx)(Qn.c,{onClick:()=>{r&&i(r),s(!1)},children:e("flow_web_ext_general_confirm")})]}),children:(0,g.jsx)(gs,{onSelect:e=>d(e)})})]})},fs=()=>{const e=(0,l.B)();return(0,g.jsx)(tn,{icon:(0,g.jsx)(h.fz,{}),title:e("flow_web_ext_setting_general_select_voice"),showNextIcon:!1,component:(0,g.jsx)(vs,{})})};n(26263);var xs=n(305);const Is="user-zD6o67",bs="name-lqjJaM",As="number-ProLRY",ys="link-cJfMbx",js="container-imUOpR",ws="avatar-sEV9_N",Ss="icon-OH0umq",ks=()=>{const e=(0,l.B)(),[t]=(0,L.Y)("authInfo");return(0,g.jsx)("div",{className:js,children:null!=t&&t.isAuthenticated?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("img",{src:null==t?void 0:t.avatarUrl,alt:"avatar",className:ws}),(0,g.jsxs)("div",{className:Is,"data-testid":"auth-user-info",children:[(0,g.jsx)("div",{className:bs,children:null==t?void 0:t.nickname}),(0,g.jsx)("div",{className:As,children:null==t?void 0:t.username})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.de,{className:Ss}),(0,g.jsxs)("div",{className:Is,children:[(0,g.jsx)("div",{className:bs,children:e("flow_web_ext_setting_my_account")}),(0,g.jsx)("div",{className:ys,onClick:()=>{(0,ct.DT)({trackMeta:{previous_page:xs.g6.setting,login_entrance:"setting"}})},children:e("flow_web_ext_login")})]})]})})},Ms=()=>{const e=(0,l.B)(),[t]=(0,L.Y)("authInfo");return(0,g.jsx)(tn,{icon:(0,g.jsx)(De.f4X,{}),title:e("flow_web_ext_setting_general_setup"),showNextIcon:!0,onClick:()=>{null!=t&&t.isAuthenticated?window.open(Z.KT,"_blank"):(0,ct.DT)({trackMeta:{previous_page:xs.g6.setting,login_entrance:"setting"}})}})},Cs=()=>{const e=(0,l.B)(),[t]=(0,L.Y)("authInfo");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_general")}),(0,g.jsx)(ks,{}),(0,g.jsxs)(en,{children:[(null==t?void 0:t.isAuthenticated)&&(0,g.jsx)(Ms,{}),!1,(null==t?void 0:t.isAuthenticated)&&(0,g.jsx)(fs,{})]})]})},Es="desc-yK_jYC",Ns=()=>{const[e,t]=(0,L.Y)("autoTranslatePageHosts"),n=(0,l.B)(),s=ft("https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/translate-page.ddaab7fc.png","https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/translate-page.d7eabad3.png");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:M,children:n("flow_web_ext_setting_translation")}),(0,g.jsx)("div",{className:Es,children:n("flow_web_ext_setting_translation_notice")}),(0,g.jsx)("img",{className:E,src:s}),e.length>0?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:C,children:n("flow_web_ext_setting_translation_sitelist")}),(0,g.jsx)("div",{className:N,children:e.map((n=>(0,g.jsx)(wt,{url:n,favicon:`https://s2.googleusercontent.com/s2/favicons?domain=${n}&sz=32`,onDelete:()=>(n=>{t(e.filter((e=>e!==n)))})(n)},n)))})]}):null]})},Ts=()=>{const e=(0,l.B)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:k,children:e("flow_web_ext_setting_enabledsites")}),(0,g.jsx)(Ns,{})]})};var Ls=n(33451),Ps=n(74552),Rs=n(48133),Ds=n(7892),Fs=n(49392),Bs=n(98502);let Os=function(e){return e[e.UPLOADING=0]="UPLOADING",e[e.FAILED=1]="FAILED",e[e.FINISHED=2]="FINISHED",e}({});const Us=e=>(0,g.jsx)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),{},{children:(0,g.jsx)("path",{fill:"#fff",d:"M3.525 16q-1.21 0-1.87-.613Q1 14.773 1 13.599V6.474q0-1.176.676-1.825.676-.65 1.85-.649h7.524q1.209 0 1.842.649.633.65.633 1.817v7.06q0 1.176-.662 1.825-.654.65-1.863.649zm11.1-3.57V7.62l2.368-2.04q.244-.21.489-.332.252-.13.496-.13.454 0 .734.295Q19 5.71 19 6.2v7.658q0 .491-.288.786-.28.296-.734.296-.244 0-.496-.13a2.7 2.7 0 0 1-.49-.339z"})})),qs=e=>(0,g.jsx)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none",viewBox:"0 0 30 30"},e),{},{children:(0,g.jsx)("path",{fill:"#fff",d:"M5.146 16.287q0-2.042.762-3.83a9.872 9.872 0 0 1 5.23-5.241 9.6 9.6 0 0 1 4.668-.728q.408.045.783.121l-2.67-2.637a1.2 1.2 0 0 1-.221-.331 1 1 0 0 1-.077-.397q0-.465.298-.773.31-.32.761-.32.464 0 .761.31l4.524 4.612q.343.33.343.794 0 .22-.089.42a1.1 1.1 0 0 1-.254.375l-4.524 4.568q-.286.298-.76.298-.442 0-.751-.309a1.03 1.03 0 0 1-.31-.761q0-.21.078-.387.088-.187.232-.342l3.001-2.968a8 8 0 0 0-.916-.132 9 9 0 0 0-1.037-.056 7.5 7.5 0 0 0-3.001.596 7.7 7.7 0 0 0-2.428 1.656 7.7 7.7 0 0 0-1.644 2.45 7.7 7.7 0 0 0-.585 3.012 7.6 7.6 0 0 0 .596 3A8 8 0 0 0 9.56 21.75a7.8 7.8 0 0 0 2.45 1.655 7.7 7.7 0 0 0 3.001.585q1.59 0 2.98-.585a7.6 7.6 0 0 0 2.449-1.655 7.9 7.9 0 0 0 1.655-2.461 7.6 7.6 0 0 0 .596-3.001q0-.497.287-.806.298-.309.772-.309.497 0 .795.309.309.31.309.806a9.8 9.8 0 0 1-.762 3.85 9.7 9.7 0 0 1-2.107 3.145 9.7 9.7 0 0 1-3.145 2.108 9.7 9.7 0 0 1-3.829.761 9.8 9.8 0 0 1-3.85-.761 9.6 9.6 0 0 1-3.135-2.108 10.1 10.1 0 0 1-2.118-3.144 9.8 9.8 0 0 1-.762-3.852"})})),Hs=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},e),{},{children:[(0,g.jsx)("rect",{width:18,height:18,fill:"#000",fillOpacity:.6,rx:9}),(0,g.jsx)("path",{fill:"#fff",d:"M5.797 12.199a.6.6 0 0 1-.16-.278.66.66 0 0 1 .005-.318.6.6 0 0 1 .15-.27L8.123 9l-2.33-2.33a.6.6 0 0 1-.15-.269.7.7 0 0 1 0-.318.6.6 0 0 1 .155-.277.55.55 0 0 1 .277-.16.7.7 0 0 1 .323 0 .56.56 0 0 1 .273.151L9 8.122l2.326-2.326a.56.56 0 0 1 .274-.15.622.622 0 0 1 .596.16.6.6 0 0 1 .159.276.63.63 0 0 1-.152.592L9.878 8.999l2.326 2.33a.56.56 0 0 1 .15.274.66.66 0 0 1-.004.318.56.56 0 0 1-.155.277.57.57 0 0 1-.277.155.66.66 0 0 1-.318.005.54.54 0 0 1-.274-.155L9 9.877l-2.33 2.33a.57.57 0 0 1-.273.146.63.63 0 0 1-.319 0 .6.6 0 0 1-.281-.155"})]})),zs=e=>(0,g.jsxs)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:32,height:33,fill:"none",viewBox:"0 0 32 33"},e),{},{children:[(0,g.jsx)("g",{clipPath:"url(#add_icon_svg__a)",children:(0,g.jsx)("path",{fill:"#666",d:"M7.826 16.45q0-.45.322-.772.322-.333.772-.332h5.986V9.369q0-.45.322-.771.323-.323.772-.323.459 0 .781.323.323.322.323.771v5.977h5.976q.45 0 .772.332.321.322.322.771 0 .46-.322.781a1.07 1.07 0 0 1-.772.313h-5.976v5.996q0 .44-.323.762a1.06 1.06 0 0 1-.781.322q-.45 0-.771-.322a1.04 1.04 0 0 1-.323-.762v-5.996H8.92q-.45 0-.772-.312a1.06 1.06 0 0 1-.322-.782"})}),(0,g.jsx)("defs",{children:(0,g.jsx)("clipPath",{id:"add_icon_svg__a",children:(0,g.jsx)("path",{fill:"#fff",d:"M0 .5h32v32H0z"})})})]}));var Ks=n(3822);const Vs={container:"container-ou61ck",animated:"animated-AZqZm1",forward:"forward-VYEA19",entering:"entering-hJHlR8",entered:"entered-SnBprv",exiting:"exiting-ykszQ7",exited:"exited-JwjwUa",unmounted:"unmounted-olh9bD"},Ws=({isEnabled:e=!0,isFinished:t,className:n,style:s,children:o})=>{const[i,l]=(0,a.useState)(0);return(0,bn.$$z)((()=>{l(Math.min(i+20,80))}),t&&e?void 0:1e3,{immediate:!0}),(0,bn.w5E)((()=>{l(t?100:0)}),[t]),(0,g.jsx)(Ks.Ay,{in:!t&&e,mountOnEnter:!0,timeout:300,children:e=>(0,g.jsxs)(g.Fragment,{children:[null==o?void 0:o(r()(Vs.animated,Vs.reverse,Vs[e])),"exited"!==e&&"unmounted"!==e&&(0,g.jsx)("div",{className:r()(n,Vs.container,Vs.animated,Vs.forward,Vs[e]),style:s,children:(0,g.jsx)(c.ke,{percent:i,type:"circle",size:"small",stroke:"white",width:20,strokeWidth:2.5,strokeLinecap:"square",orbitStroke:"rgba(255,255,255,0.6)"})})]})})},Gs={container:"container-thsmXK",entered:"entered-LptaNC",entering:"entering-OVZxOt",exiting:"exiting-afwVZw",exited:"exited-e5mOjc",unmounted:"unmounted-i8Xk9t",loading:"loading-RtE_nN",icon:"icon-BsZEBa",rotate:"rotate-c2fTUQ",rotation:"rotation-divbev"},Qs=({loading:e,title:t,toast:n})=>{const s=(0,a.useRef)();return(0,a.useEffect)((()=>{e?s.current=n.success({icon:(0,g.jsx)("div",{className:Gs.loading,children:(0,g.jsx)("img",{className:r()(Gs.icon,Gs.rotate),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAlGSURBVHgB7VxJbxxFFH7dM+PxvmHHMXEcs0iIiANSOMAFzIFjTigSB35Mfg2XSJzgwIlISCwHH+AQxAFkiIlxbPBux/ZMN++rfq9d0x4blOnuadD7pKeqrprp5e1VXdVEBoPBYDAYDAaDwWAwGAwGg8FgMBj+7wio+mgwNZnqTMHo6Gj94OAgkHrEdRobG4vCMIx2d3fb3B4xnTGh3qKKo07VQ8g0JATGg9mxEoAfjYyMxPqH/f39gIUQjo+PB3t7ezQxMdEIgiAGbW9vQxiglpyjUqiSAAaZhoeGhkaOj499pisC//jw8JDYAmAFMayAhaBdjvE7Ozskv8cz1qRPhdGmiqBG/cfg8PDwbK1Wm6rX607juQxarcR7sECo0WgQH8f8Ozo6Okr/eHp6SgMDA6708ezZM5qamoq5VBerggvm5ubq3FeHpVDirvqKkPoHaOY8040oiobANABMk3pqAbAIFkSgzGf340rWfmLtj9n9uGMuA3Y//jXi6enp9ICZTxwr4na7Hcj11cX1Df26+BST40yz2SS4DK7GGcbHg4ODEEjEzI9ZCOr7I7gf9Iv7US1Gv1/voNnZWdrc3Ez7FxYWaG1tTfthbn1xS2VbQMjMvMFMn5FrOwXguBqIu0hdBZ0rR6AWwC6oI4hC+xEHUIcVqPZPTk6mv5mZmXElM9/9d35+3l1SmX/79m2UcMUN6gPKFAAecIndzejJyYl/XcdAaDt5QgHULSnYBQWs/YG6IC5DsZ40CDPzNQAnJ5d+Zrwr19fX46WlpbT/0aNHrrxz5w6K0mNiWS4I3F1gqiNoKlNYEOoSIrgiPobbcW3M/NQF4ZAJkVazGLS1M88RCoGJ8O8ha3+8tbUVs++PNzY21HoiCIADfcz34tpYCM4alpeX6eHDhzh3NgMrDGUIYJAfdIkzFd/FxMpwaXPHKEUoaAPTEXUP6PmyFQ20NSF3HWZ+vLq6iv6Itd7dz8rKis9wN9ZQJSkaRbugAaZFZr5eJ2BhOP/OjEYADpRcZ/LQJ0x/CCFXfN5UEeeCtagg/VExfD8Yj9jhGH3v3j3Xfv/+fdyHux0qAUVeZIAZu8SMbkiuHmtJ5yaO68P9QPPBrA2mYyoOahVQCCdYZnz04MED18mK79rK0n6iYi1gkZkK3x/KgCkQN6SUWgX/DlHzNyqW+YBahVpDDOaz1rsUFppfJvOBoixgTgiMj0XrAaf5sARKpgxazPynXN+l/iCNDV5bqQIoYi5ogKcOrp+dQdEoFq2/AG5HFvOYEh/dL+AestMVpaKIvPc1zvXrmL/hEvM4AUryrI2nAtCwSv1lfiWQdwx4gZL5FWILcH4elgAhiNtR//87GfMd8hbAfPa8YD6EgdRampDp7JHBIU8BqPan2Q1IYoFaBGbRnpIhRZ4CeBHaDt+PkkQAXPcF8pgMHcgrCxpjRrvZNNV4D8guIIQnlMznGDzkZQEz4mJ8jXczm9IOxv9FhgvIRQDM9Gm4HmZ27J9XXBIEgAk10/4uyMMFjTM1hPmBlugQd4T6Ohm6Ig8LGPcY3THHI9qPmcgTMnRFHgKYwCoG6pxX0hQU5Q4ZLkUeAhhptVpp2qnCkBKwQdcV6DUG4P941xszw3GcrueREkIwAVyBXi0Ab8ed32eGu7Qz446OyHAlerUAx2jV/vSkfCwCqcwSwKqiVwGkK8s8l+PDsp9/QM/jAH8dp1iCCsPwL9CzC5IMKAWY7wmirHVH/1nkMRIOxOdTJgNyfWS4Er1mQY7TGU0PvLKKG0AqhV4ZhNeKadopKWjsDczGyXAlerWAVACa/0v6qefFNiOzgiuQhwtK3ZCmoiIMXek8RoZLkcdc0CEYrkTn0xF6PE2GS5HHuqCxKIommbD+x1966B8/IUNX5GEBm1Jmg7G2YbWEBeNLkIcAtkmW+HlzQlmaI0NX5PVSPrWCWq2Gc8YomVQAS2TZUFfktTYUUfdmwGi321gT6lbCgVgIWHcP5uNd8Z9k6EBeFoAlJ25tv2o9ShALRNPRl5iGydCBPFdHN8IwfEE2QTvt52NsjNZ1obgW9pHa6jgPeS5NXMWGC6m7LEi137OKWS5fIUOKPC0gipKNAGBympJKLEBVLQEZ0RZV73UlllZiV3c6ui8DRUwXv8uajq3q+k2GC0tWuP+M+76i/m1N8oF7vcuu8hbrj/MInE5/x6P5L6gEFLFD5gAPg4ruCYALUiuQdmRFi5TsFejnRo1JvteP+X6u4/4QsySTu0mJYH6iglGEAI75YRCQpxGAQUhNyRuYiUBUCHBb/UhP4Qo/4vtwH5gA8+FBRVGA65QI4IAKRFHfRnjKDzLLNIwH87RfU1NYRcjtuL7uqtmk8vAW04ck26kAzdo8S0AdW6k2qEAU+XEKBNp5fogBYXaannIZqlDEGq5x+TKXGEsUuZDrGtNdpjflONA0WSxAXaS6z++pYOssUgBYsYtV0bf44WoqABkZd2RJlAgG2ojYMSr/PaT8gMnA95k+QF2YTnJ9V8L3+5bKv9nl46+p4BhVRBaUBXzse5R8N0KvqaS7Z9Kxgpc5wfR/lvJ5/DAEik+hvc3nXJQ2f9wTUmeGpoxXS/iMEgsoFGUIAEBG8Q4l2u2uq7GAMpv6qJMpmNDDgA5CwKwrLAobPWAd+975m0LI429QMhYBIbd3bkZTTOrC9C71z5l+oBJQlgAAzAMtUyKEqxjgB+u0H3HEPyZPgz0GXziX9KXaTfKiyGv3f4+VfJ8y/UolocwvRMGvr1Lyon4Kmh3iC3qe36VOZuv4wQ/eHaS+XMcbmsdnYgxJXyBppp5P70vPg+2zn1DBWU8WZX+iCzk/UrszSVNx/QtW4DMJwpD00HchjqH+b/EjMFgF4P3HF0TgBWBfSCuUaH7pa1nLdEFZYGn7G5RMzqUj5sz0RYdVUBKkyW8XxneLI9pN3rtphQoGM7NfUh83j/dTAAp8whIDI4xMff9OXqBOU1jv/UKHj1eLyDC7QyCe319j+oYqMDVeBQEoIIjXmV6l87QU6Jja1rZQIqq/EsMXRuYLLfobMP5bKSuBKglA4b4zx4QJMUxTNDOaT0RdX/wDWVeElBVTHL8w/UgV3K9QRQFkgUkxLO4al7Ip9aZqPAvolAWkn7XcypBtEjEYDAaDwWAwGAwGg8FgMBgMBoPB0Ff8DZGbA78LsLmgAAAAAElFTkSuQmCC"})}),content:t,duration:Math.pow(10,8),showClose:!1}):s.current&&(n.close(s.current),s.current=void 0)}),[e]),(0,g.jsx)(Ks.Ay,{in:e,mountOnEnter:!0,unmountOnExit:!0,timeout:150,children:e=>(0,g.jsx)("div",{className:r()(Gs.container,Gs[e])})})};var Ys=n(43140);const $s={container:"container-MyiC_3",content:"content-XOCUsx",textarea:"textarea-A2HVq9",white:"white-BZhvC0",grey:"grey-ndeQiB",input:"input-Bzb8FZ",count:"count-pX2zzS",red:"red-aK7JTO","file-list":"file-list-QU5Yof",fileList:"file-list-QU5Yof",item:"item-UjgmRq",background:"background-KmR0W4",close:"close-_LyUVE",icon:"icon-DJhw2f",uploading:"uploading-hR1vhG",failed:"failed-eCGhQ0","video-overlay":"video-overlay-LzeJRe",videoOverlay:"video-overlay-LzeJRe",adder:"adder-ZPFzWC","add-icon":"add-icon-cp2WId",addIcon:"add-icon-cp2WId","submit-button":"submit-button-qACIBh",submitButton:"submit-button-qACIBh",tapable:"tapable-Ify9jT",hoverable:"hoverable-sOQPvO"},Xs=({className:e,contentClassName:t,textAreaClassName:n,fileUploadClassName:o,style:i,theme:l="white",onChooseMedia:d,onUploadMedia:u,onSubmit:h,onChange:m,submitButtonClassName:p,submitButtonDisabled:_=!1,textAreaPlaceholderTitle:v,submitButtonTitle:f,showFullPageSubmitLoading:x,notAllAssetsFinishedTitle:I,oversizeToastTitle:b,allowedMediaType:A,renderTextArea:y,mobile:j=!1})=>{var w;const[S,k]=(0,a.useState)(""),M=(0,a.useRef)(null),C=(e=>(0,a.useMemo)((()=>c.EY.create({getPopupContainer:()=>e.current})),[]))(M),[E,N]=(0,a.useState)([]),[T,L]=(0,a.useState)(!1),P=(()=>{const e=(0,a.useRef)(0);return()=>e.current++})();(0,a.useEffect)((()=>{null==m||m({content:S,choosedMediaList:E})}),[S,E]);const R=function(){var e=(0,s.A)((function*(e){const t=(0,bn.zVE)(e.base64PreviewImage);return t?yield u({type:"file",mimeType:"image/png",mediaType:"image",value:t},C):null}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,s.A)((function*(){if(!S)return;if(E.some((e=>e.status!==Os.FINISHED)))return void C.error(I);const e=E.filter((e=>"image"===e.mediaData.mediaType)),t=E.find((e=>"video"===e.mediaData.mediaType)),n=e.map((e=>e.uploaded)).filter((e=>Boolean(e)));L(!0);try{var s,a,o;const e=t&&(yield R(t));yield h({content:S,image_list:n,video_cover_height:null==e?void 0:e.image_height,video_cover_width:null==e?void 0:e.image_width,video_cover_url:null!==(s=null==e?void 0:e.image_uri)&&void 0!==s?s:"",video_play_url:null!==(a=null==t||null===(o=t.uploaded)||void 0===o?void 0:o.image_uri)&&void 0!==a?a:"",extra_params:JSON.stringify({is_private_video:1,is_private_image:1}),multi_image:"1"},C)}finally{L(!1)}}));return function(){return e.apply(this,arguments)}}(),F=()=>{const e=["image"];return E.filter((e=>"video"===e.mediaData.mediaType)).length<1&&e.push("video"),A?e.filter((e=>null==A?void 0:A.includes(e))):e},{run:B}=(0,bn.xDQ)(function(){var e=(0,s.A)((function*(e){const t=null!=e?e:P(),n=F(),s=!(0,Fs.A)(e)&&E.find((t=>t.id===e));if(s){const{status:e,mediaData:{mediaType:t}}=s;if(e!==Os.FAILED)throw Error(`Not allow to reupload because it's not failed status: ${e}`,{cause:s});n.includes(t)||n.push(t)}const a=s||(yield d({allowedMediaType:n},C));if(a)if(((e,t)=>{const n=e.mediaData.mediaType;if(!t.includes(n))throw Error(`Not allowed media type: ${n}, only allowed ${t.join(", ")} now.`)})(a,n),"image"===(o=a).mediaData.mediaType&&o.size>5242880||"video"===o.mediaData.mediaType&&o.size>52428800)C.warning(b);else{var o;N((0,Bs.jM)((n=>{const s=n.find((t=>t.id===e));s?s.status=Os.UPLOADING:n.push((0,V.A)((0,V.A)({},a),{},{id:t,status:Os.UPLOADING}))})));try{const e=yield u(a.mediaData,C);N((0,Bs.jM)((n=>{const s=n.find((e=>e.id===t));s&&(s.status=Os.FINISHED,s.uploaded=e)})))}catch(i){N((0,Bs.jM)((e=>{const n=e.find((e=>e.id===t));n&&(n.status=Os.FAILED)})))}}}));return function(t){return e.apply(this,arguments)}}(),{leading:!0,trailing:!1,wait:500}),O={placeholder:v,value:S,onChange:e=>{k(e.slice(0,300))},className:$s.input,rows:5,autosize:!0};return(0,g.jsxs)("div",{"data-testid":"feedback_submit_panel",className:r()($s.container,e),style:i,ref:M,children:[(0,g.jsxs)("div",{className:r()($s.content,t),children:[(0,g.jsxs)("div",{className:r()($s.textarea,$s[l],n),children:[null!==(w=null==y?void 0:y(O))&&void 0!==w?w:(0,g.jsx)(c.fs,(0,V.A)({},O)),(0,g.jsxs)("div",{"data-testid":"feedback_submit_panel_input_count",className:r()($s.count,{[$s.red]:S.length>=300}),children:[S.length,"/",300]})]}),null!=A&&A.length?(0,g.jsxs)("div",{className:$s["file-list"],children:[E.map((e=>(0,g.jsxs)("div",{"data-testid":"feedback_image",className:r()($s.item,o),children:[(0,g.jsx)(Ws,{className:$s.uploading,isFinished:e.status===Os.FINISHED,isEnabled:e.status!==Os.FAILED,children:t=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("img",{className:r()($s.background,t),src:e.base64PreviewImage}),e.status===Os.FAILED&&(0,g.jsx)("div",{className:r()($s.failed,$s.tapable,t,{[$s.hoverable]:!j}),onClick:()=>{B(e.id)},children:(0,g.jsx)(qs,{className:$s.icon})}),e.status===Os.FINISHED&&"video"===e.mediaData.mediaType&&(0,g.jsx)("div",{className:r()($s["video-overlay"]),children:(0,g.jsx)(Us,{className:$s.icon})})]})}),(0,g.jsx)("div",{className:r()($s.close,$s.tapable,{[$s.hoverable]:!j}),onClick:()=>{var t;t=e.id,N((0,Bs.jM)((e=>{const n=e.findIndex((e=>e.id===t));-1!==n&&e.splice(n,1)})))},children:(0,g.jsx)(Hs,{className:$s.icon})})]},e.id))),E.length<4&&(0,g.jsxs)("div",{className:r()($s.item,$s.adder,$s.tapable,$s[l],{[$s.hoverable]:!j},o),onClick:()=>B(),children:[(0,g.jsx)(zs,{className:$s["add-icon"]}),(0,g.jsxs)("div",{className:$s.count,children:[E.length,"/",4]})]})]}):null]}),(0,g.jsx)(Ys.r,{"data-testid":"feedback_submit_panel_submit",className:r()($s["submit-button"],p),width:"full",onClick:(0,s.A)((function*(){x?D():yield D()})),disabled:!S||_,children:f}),x&&(0,g.jsx)(Qs,{loading:T,title:x.submittingToastTitle,toast:C})]})};var Zs=n(44495);const Js=e=>(0,g.jsx)("svg",(0,V.A)((0,V.A)({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),{},{children:(0,g.jsx)("path",{fill:"#fff",d:"M3.525 16q-1.21 0-1.87-.613Q1 14.773 1 13.599V6.474q0-1.176.676-1.825.676-.65 1.85-.649h7.524q1.209 0 1.842.649.633.65.633 1.817v7.06q0 1.176-.662 1.825-.654.65-1.863.649zm11.1-3.57V7.62l2.368-2.04q.244-.21.489-.332.252-.13.496-.13.454 0 .734.295Q19 5.71 19 6.2v7.658q0 .491-.288.786-.28.296-.734.296-.244 0-.496-.13a2.7 2.7 0 0 1-.49-.339z"})})),ea="itemContent-ghjyDH",ta="avatar-YeEUHQ",na="contentInfo-yr3z3r",sa="contentHeader-AQbluT",aa="time-deTmvM",oa="content-DnZS9L",ia="media-ic6tjL",ra="item-FJnSEf",la="image-xXvESI",ca="video-overlay-a7FLyN",da="icon-yc8zuK",ua=e=>Number(e)<10?`0${e}`:e,ha=e=>{if(!e)return;const t=new Date(1e3*Number(e)),n=`${t.getFullYear()}/`,s=`${t.getMonth()+1<10?`0${t.getMonth()+1}`:t.getMonth()+1}/`,a=`${t.getDate()} `,o=`${t.getHours()}`,i=`${t.getMinutes()}`,r=`${t.getSeconds()}`;return`${n+s+a+ua(o)}:${ua(i)}:${ua(r)}`},ma=({item:e,userAvatar:t,className:n,style:s,selfUserTitle:a,botUserTitle:o})=>{const{content:i,pub_date:l,type:d,image_list:u,video_cover_url:h}=e;return(0,g.jsxs)("div",{"data-testid":"feedback_history_item",className:r()(ea,n),style:s,children:[(0,g.jsx)("div",{className:ta,children:(0,g.jsx)(c.eu,{src:0===e.type?t:"https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/flow-ext-doubao/cdn-media-assets/doubao_logo.5604ea40.jpeg",size:"default"})}),(0,g.jsxs)("div",{className:na,children:[(0,g.jsxs)("div",{className:sa,children:[(0,g.jsx)("strong",{children:0===d?a:o}),(0,g.jsx)("div",{className:aa,children:ha(l)})]}),(0,g.jsx)("div",{className:oa,children:i}),(0,g.jsxs)("div",{className:ia,children:[null==u?void 0:u.map((({image_url:e},t)=>(0,g.jsx)("div",{className:ra,children:(0,g.jsx)(c._V,{className:la,src:e,preview:!1})},t))),h&&(0,g.jsxs)("div",{className:ra,children:[(0,g.jsx)(c._V,{className:la,src:h,preview:!1}),(0,g.jsx)("div",{children:(0,g.jsx)("div",{className:ca,children:(0,g.jsx)(Js,{className:da})})})]})]})]})]})},pa="container-vgxrLI",ga="item-XSlLXP",_a="bottom-loading-ybUqyL",va="show-scrollbar-nzY_Fv",fa="empty-qHPWSq",xa="emptyHistory-Dl72KA",Ia=({className:e,emptyClassName:t,style:n,showScrollBar:o=!0,userAvatar:i,onFeedbackListFetch:l,emptyListTitle:d,selfUserTitle:u,botUserTitle:h,forceLoading:m=!1})=>{const p=(0,a.useRef)(null),{data:_,loading:v,loadingMore:f,noMore:x}=(0,bn.hUb)(function(){var e=(0,s.A)((function*({current:e,pageSize:t}){var n,s,a;const o=t*(e-1)-1;if(-1!==o&&(null==_||null===(n=_.list)||void 0===n||null===(n=n[o])||void 0===n||!n.id))return{list:[],total:null==_?void 0:_.total};const i=yield l({max_id:null==_||null===(s=_.list)||void 0===s||null===(s=s[o])||void 0===s?void 0:s.id,count:t});return{list:i,total:(null!==(a=null==_?void 0:_.total)&&void 0!==a?a:0)+i.length+1}}));return function(t){return e.apply(this,arguments)}}(),{ref:p,initPageSize:20,incrementSize:20}),I=m||v;return(0,g.jsx)("div",{"data-testid":"feedback_history_panel",ref:p,className:r()(pa,e,{[fa]:!(null!=_&&_.list.length),[va]:o}),style:n,children:I?(0,g.jsx)(c.tK,{size:"middle"}):(0,g.jsx)(g.Fragment,{children:null!=_&&_.list&&_.list.length>0?(0,g.jsxs)(g.Fragment,{children:[_.list.map((e=>(0,g.jsx)(ma,{className:ga,userAvatar:i,item:e,selfUserTitle:u,botUserTitle:h},e.id))),!x&&f&&(0,g.jsx)("div",{className:_a,children:(0,g.jsx)(c.tK,{size:"middle"})})]}):(0,g.jsx)("div",{className:r()(xa,t),children:d})})})};var ba=n(96770),Aa=n(10633),ya=n(47686),ja=n(28159),wa=n(41967),Sa=n(85371),ka=n(97164);const Ma=e=>{try{return JSON.stringify(e)}catch(t){return console.error({error:t}),""}};class Ca extends Error{constructor(e){super(),(0,Aa.A)(this,"code",void 0),(0,Aa.A)(this,"extra",void 0),this.code=e.code,this.extra=e.extra}}const Ea=function(){var e=(0,s.A)((function*(e){const{data:t,isPost:n=!1,commonParams:s,logger:a,onPost:o,onGet:i}=e,r=(e=>{const t={};for(const n of(0,ya.A)(e)){const s=e[n];(0,ja.A)(s)||(0,wa.A)(s)||(0,ka.A)(s)||(0,Sa.A)(s)?t[n]=s:t[n]=Ma(s)||String(s)}return t})((0,V.A)((0,V.A)({},t),s)),l={"Content-Type":"application/x-www-form-urlencoded"};try{const e=n?yield o({data:r,headers:l}):yield i({params:r,headers:l});if("error"===e.message)throw new Ca({code:e.err_code,extra:e});return e}catch(c){throw null==a||a.persist.error({eventName:"feedback_request_error",error:c}),c}}));return function(t){return e.apply(this,arguments)}}(),Na=function(){var e=(0,s.A)((function*(e){const{url:t,data:n,isPost:a=!1,logger:o,aid:i,deviceId:r,appName:l,appkey:c,feedbackAxiosInstance:d,baseUrl:u="",reqQueryParams:h}=e,m=e=>(0,ba.A)(u)?u(e):u+e;return Ea({data:n,isPost:a,logger:o,commonParams:{aid:i,device_id:r,appName:l,appkey:c},onPost:(g=(0,s.A)((function*({params:e,headers:n,data:s}){const{data:a}=yield d.post(m(t),s,{params:(0,V.A)((0,V.A)({},e||{}),h||{}),headers:n});return a})),function(e){return g.apply(this,arguments)}),onGet:(p=(0,s.A)((function*({params:e,headers:n}){const{data:s}=yield d.get(m(t),{params:(0,V.A)((0,V.A)({},e||{}),h||{}),headers:n});return s})),function(e){return p.apply(this,arguments)})});var p,g}));return function(t){return e.apply(this,arguments)}}(),Ta=function(){var e=(0,s.A)((function*(e,t){const{channel:n}=t,s=(0,V.A)((0,V.A)({},e),{},{channel:n,extra_persistent_params:JSON.stringify({samantha_web:1})});return Na((0,V.A)({url:"/feedback/2/post_message/",data:s,isPost:!0},t))}));return function(t,n){return e.apply(this,arguments)}}();var La=n(75328);const Pa=["getUploadAuthToken"],Ra=["userId","appId","logger"],Da=e=>{let{getUploadAuthToken:t}=e,n=(0,Ls.A)(e,Pa);const o=(0,a.useRef)();return(0,s.A)((function*(){if(!o.current||(()=>{if(!o.current)return!0;const{auth:{expired_time:e,current_time:t}={}}=o.current;return!e||!t||new Date(e).getTime()<new Date(t).getTime()})()){const{data:e={}}=yield t(n);o.current=e}return o.current}))},Fa=e=>{let{userId:t,appId:n,logger:o}=e,i=(0,Ls.A)(e,Ra);const r=Da(i),l=(0,a.useRef)();return c=function(){var e=(0,s.A)((function*(e){var s;const a=yield r();if(null===(s=l.current)||void 0===s||!s.client){const e=new La.G({imageConfig:a,userId:t,appId:n});l.current=e}const o=l.current;return new Promise(((t,n)=>{const s=(e=>{if("path"===e.type)throw Error("Cannot get Blob from PathMediaData");return"base64"===e.type?(0,bn.zVE)(e.value):e.value})(e);o.uploadImage(s,{complete:e=>{var s;const{Uri:a,ImageHeight:o=0,ImageWidth:i=0}=null!==(s=e.uploadResult)&&void 0!==s?s:{};a?t({image_uri:a,image_height:o,image_width:i}):n(new Error("uploaded result is empty"))},error:e=>{n(e)}})}))}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.A)((function*(e){try{return yield c(e)}catch(t){throw o.error({eventName:"feedback_upload_to_imagex_error",error:t}),t}}));return function(t){return e.apply(this,arguments)}}();var c},Ba=e=>{const t=Fa(e);return function(){var e=(0,s.A)((function*(e){if("path"===e.type)throw Error("Not support to upload PathMedia");return t(e)}));return function(t){return e.apply(this,arguments)}}()},Oa="feedback-submit-panel-WP3yui",Ua="feedback-history-panel-xT_ikV",qa="file-input-MrSr3U",Ha="content-xXWMNx",za="textarea-EM0AFI",Ka="fileUpload-kIJu2M",Va="submitButton-R0JdhW",Wa="feedbackHistoryEmptyPanel-a6RJgZ",Ga=["userAvatar","userId","t","showFeedbackList","getFeedbackList","getUploadAuthToken","visible","onClose","showFileList","submitButtonDisabled"],Qa={image:["jpeg","jpg","png","gif","bmp"],video:["mp4","quicktime","x-m4v","x-flv","x-matroska","webm","3gpp"]};var Ya=function(e){return e.SUBMIT="submit",e.HISTORY="history",e}(Ya||{});const $a=e=>{let{userAvatar:t,userId:n,t:o,showFeedbackList:i=!0,getFeedbackList:r,getUploadAuthToken:l,visible:d,onClose:u,showFileList:h=!0,submitButtonDisabled:m}=e,p=(0,Ls.A)(e,Ga);const{logger:_,aid:v}=p,[f,x]=(0,a.useState)(),I=(0,a.useRef)(null),b=(0,a.useRef)(null),[A,y]=(0,a.useState)(0),[j,w]=(0,a.useState)(Ya.SUBMIT);(0,bn.iKL)((()=>{var e;null===(e=b.current)||void 0===e||e.complete()})),(0,a.useEffect)((()=>{w(Ya.SUBMIT)}),[d]);const S=Ba({scene:"feedback",data_type:"image",userId:n,appId:v,logger:_,getUploadAuthToken:l}),k=function(){var e=(0,s.A)((function*(){if(!I.current)throw Error("File input element is not exist");return b.current&&(b.current.complete(),b.current=null),b.current=new Ps.B,I.current.value="",I.current.click(),yield(0,Rs._)(b.current)}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,s.A)((function*({allowedMediaType:e}){if(!e.length)return!1;x(e),yield(0,bn.BKw)(200);try{const e=yield k();if(1!==e.length)return!1;const t=e[0],n=(0,bn.puP)(t.type)?yield(0,bn.bV$)(t):t,s=n&&(yield(0,bn.tSJ)(n));return{base64PreviewImage:null!=s?s:"",mediaData:{type:"file",value:t,mimeType:t.type,mediaType:(0,bn.puP)(t.type)?"video":"image"},size:t.size}}catch(t){if(t instanceof Ds.G)return!1;throw t}}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,s.A)((function*(e){try{const{feedback_id:t}=yield Ta(e,p);_.persist.success({eventName:"feedback_submit_success",meta:{feedback_id:t}}),c.y8.success({content:o("feedback_submit_success"),showClose:!1}),u({type:"success"}),y(A+1)}catch(t){throw c.y8.error({content:o("feedback_submit_failed"),showClose:!1}),_.persist.error({eventName:"feedback_submit_error",error:t}),t}}));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{children:[(0,g.jsxs)(mt,{activeKey:j,onChange:e=>w(e),children:[(0,g.jsx)(ht,{itemTitle:o("submit_feedback"),itemKey:Ya.SUBMIT,children:(0,g.jsx)(Xs,{className:Oa,contentClassName:Ha,textAreaClassName:za,fileUploadClassName:Ka,submitButtonClassName:Va,theme:"grey",onChooseMedia:M,onUploadMedia:S,onSubmit:C,submitButtonDisabled:m,textAreaPlaceholderTitle:o("feedback_placeholder"),submitButtonTitle:o("feedback_submit_button"),oversizeToastTitle:o("feedback_file_large_error"),notAllAssetsFinishedTitle:o("feedback_file_uploading_error"),allowedMediaType:(()=>{if(!h)return[];return["image"]})(),renderTextArea:e=>(0,g.jsx)(Zs.p,(0,V.A)({theme:"default"},e))})}),i&&(0,g.jsx)(ht,{itemTitle:o("feedback_history"),itemKey:Ya.HISTORY,children:(0,g.jsx)(Ia,{className:Ua,emptyClassName:Wa,emptyListTitle:o("no_feedback_history"),selfUserTitle:o("feedback_history_user"),botUserTitle:o("feedback_platform_cn"),onFeedbackListFetch:function(){var e=(0,s.A)((function*(e){const{appkey:t}=p,{data:n=[]}=yield r((0,V.A)((0,V.A)({},e),{},{appkey:t}));return n}));return function(t){return e.apply(this,arguments)}}(),userAvatar:t||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABDgAAAQ4AgMAAACRfoQcAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExUReHw/5muzMfY7a/C3GnhjlIAAAa3SURBVHja7MEBAQAAAICQ/q/uCAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgNm1d6MEoigMwBcYA3QMLcHI2JwSDDhowDiUQGKqNGEPNmAsTdCLoczuwJ4rj8DM2e8r4Z+953HvAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8E5dfL/H2UWjcReO1sHUVIY+94SZ2vguf0VmVvhtH8lz6bhPZovTbdVRmxceRrVWObF767D4amktjGAeWCqli2nqPcFryWTn04Kw4LWXrJsJp6cSOQb2bwUxirYsIxeNIm7W3tKVD8egMIhSPqnQoHnnqOMXNT2ViYen72jKOUEurSqqWVveCaumvmdRcmmdSc+nOKEJrqRqL1lI1Fq2lcxuhtRzZWNyX7jcWW8tOhE5b9VmdtjOIs548wGVTY0c2M3ZUjB2VlfU+W5vCsokpLFu4Rs+WhtLswVCazd2FZXMzejY1o2czM3r2KI6KF8mKDa6yssFla3GIw0rb7PfiqOOw4SchDnGcuf1x/yOO03G4DvN1nDDydYhDHOL4axx+ePF1iEMc4hCHOKxwVjhxiMNdqTi8s3iF82QtDr+7iKO18m/YD3v3j9NGHERx3GsrhYNccgSqKKXvkYLBFFFCmZKSkku4p4xASpcyEpdwT0mVDimiIeBI3pnFSwJKxX6+Rxjtvnlvfv8ydg5mFrbZKoddx/akO7HwFxqrTk47OQvnpKRztE5Z/1/mIktmj0d3f0cvUx7d3T+9jJlS94b1s+TC3DnYyx7bkZnps26z7WWsz7oJ2z3pbtF/CTONJdMIcJmxMXphKbFk5pQ0M6OkmYaSejWwn13DDi+O9tKQjsKK68jMuY7M1CQsMxZYCrvabGbqXymwpIU9C06ZCQ9WWBLSzJSQFpY+jswO5egLLovBfxz3Tr3NtVcjtPX4MsI9b2/igV8jrBlf3N3dno0AAAAAAAAAAAAAAAAAAACGx/j828/zryM8cHETaxa3tqSP3q2iZegFGf+IwuezQVfjJjosrp1VKFyrhno8/lMGfsrnexQGfgbsvTv0EzvxBCdktHA19LsIuvLhV8mcuI2ycOn2xcwnOlo4YjkyBz6OwrGPI7PwcRSOfRyZA+8nFo54jsw+Q1q4lFYyHwf/tmbldOjPFFeOCWnmgJAOSEwn8UwOhzITFFySI+VM2+s4WY9kOp7J677p2d+S/xV/ywv6Sl2B0leG8CJHE2s4sc6/IreUvCK3pGz/bD7I9pl9lrRwypJmjrTZzOFrfRRPq03vOBGPligMfaDeRBCPHukwMd2NIB5VOjiPJB3E41FgEVu2BBbz9DTrMCH8M+tgxLYqqeWFN7FGiksmjBFLSkpLs5LS0o6S8qVJSWlpx5PypVuV1FpcrJHxt2yftDQ5jXvY9NRYtJbSWLSW0li0lpYIraU0Fq2lJBatZUtjMU3v7Bi0MrkZhRmIbfqsTtsSodOWyaBO+6jPmg9uVqt12o7tkGlLnpVpk+1gPIrtYDxaIhiPLbbDwuQDkwjGo6VRjo4L48OKC+PDOsMfA6BkStnSYkr5sJalcmQi2FLleMqjGw8mj86WtjTKsWXnj2XaTWQRWkpkEVpKZBFaSjmElpa5cjxKcJYWUoKT4ZSjh1UkHAFbhUibCOXo5nvrcMrRVw7zn5aJcnTKYf7T0iiHcjw1GzQdVI7+chiWKkcPM+VQDuX453JYaPnN3t3jJBBFYQC9mYRG1+IeXAIFj7GAhCXQkFjJWwo1FlZWxsRNGFpKQ2/raCPeFmjMyzmZFXwJYX7evd+fkTjEIQ5xiEMc4hCHOMThJv1/GXmE80QrDi8HvUkXh69w4nCgwekfcTg56JitQ9gmFkqpxnsy005Zb1Iym5ijzWaGzrOxlQTZ0jqT7Naym6zaDJX01qhlEzsHs7EFndnCNtusWv2cTBVdZTOlAtlC01VW1cIlE2202VIvXNJXJYrJnQLW7C10bDZahP/sXza7Lhe6j6bclItMa0T4ufzaRGO6z3K+fYQ8jj6iQd1rOUu/jzY9vpfTPdRoVfd0aiDrTbSs2w4nZHHYRPuuti/DsNqVo9Vu/nOVo918PXwdtgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfLcHByQAAAAAgv6/bkegAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMwEs3G65hPtBG4AAAAASUVORK5CYII="})})]}),(0,g.jsx)("input",{className:qa,multiple:!1,type:"file",ref:I,accept:f&&(E=f,null==E?void 0:E.map((e=>{var t,n;return null!==(t=null===(n=Qa[e])||void 0===n?void 0:n.map((t=>`${e}/${t.toLowerCase()}`)))&&void 0!==t?t:[`${e}/*`]})).flat()).join(", "),onChange:e=>{var t,n;const s=[...null!==(t=e.target.files)&&void 0!==t?t:[]];null===(n=b.current)||void 0===n||n.next(s)}})]},A);var E};var Xa=n(56101),Za=n(10429),Ja=n(92830),eo=n(24521),to=n(59585),no=n.n(to),so=n(29439),ao=n(5779),oo=n(66190);const io="content-XCbOeX",ro="expanded-qcHVls",lo="operation-btns-kU0ebQ",co=({payload:e,defaultJSON:t=!1})=>{const[n,s]=(0,a.useState)(t),o=(0,a.useMemo)((()=>"string"==typeof e?e:JSON.stringify(e,null,2)),[e]);return(0,g.jsxs)("div",{className:r()(io,{[ro]:n}),children:[n?(0,g.jsx)("pre",{children:o}):(0,g.jsx)("span",{children:o}),(0,g.jsxs)("div",{className:lo,children:[(0,g.jsx)(so.A,{onClick:()=>{no()(o),c.y8.success({content:"Copied !",showClose:!1,duration:3})}}),n?(0,g.jsx)(ao.A,{onClick:()=>s(!n)}):(0,g.jsx)(oo.A,{onClick:()=>s(!n)})]})]})};var uo=n(89112),ho=n(50479);const mo={container:"container-wtUg6M","operation-area":"operation-area-EGmSg2",operationArea:"operation-area-EGmSg2","log-meta-info":"log-meta-info-m2qwfK",logMetaInfo:"log-meta-info-m2qwfK","log-meta-head":"log-meta-head-_CR0zT",logMetaHead:"log-meta-head-_CR0zT","mark-icon":"mark-icon-EDGqbs",markIcon:"mark-icon-EDGqbs","log-id":"log-id-dyyoaJ",logId:"log-id-dyyoaJ","list-item":"list-item-ffXrw7",listItem:"list-item-ffXrw7",type:"type-KwwuV8",action:"action-M0LMD2",from:"from-gVdMwK",api:"api-xbaS5S","slardar-event-name":"slardar-event-name-R6Bsy4",slardarEventName:"slardar-event-name-R6Bsy4"},po=new uo.qK(1e3),go=[{label:"HTTP",value:"http-request"},{label:"Stream",value:"fetch-stream"},{label:"Slardar",value:"slardar"},{label:"WebSocket",value:"websocket"}],_o=["fetch-stream","websocket"],vo=e=>{var t,n,s,a;const{_meta:o,time:i,payload:r}=e,l=null==o?void 0:o.filter((e=>"update"===e.action)),d=null==o?void 0:o.filter((e=>"open"===e.action)),u=null==o?void 0:o.filter((e=>"finish"===e.action)),h=null==o?void 0:o.filter((e=>"close"===e.action)),m=(e,t,n=t)=>e.length?(0,g.jsx)(c.mF,{tab:`${t}(${e.length})`,itemKey:n,children:(0,g.jsx)(c.B8,{bordered:!0,dataSource:e,renderItem:e=>(0,g.jsx)(c.B8.Item,{className:mo["list-item"],children:(0,g.jsx)(co,{payload:e.payload})})})}):null,p=null===(t=d[0])||void 0===t||null===(t=t.payload)||void 0===t?void 0:t.logId,_=`${(null==r||null===(n=r.port)||void 0===n||null===(n=n.sender)||void 0===n||null===(n=n.tab)||void 0===n?void 0:n.title)||(null==r||null===(s=r.port)||void 0===s||null===(s=s.sender)||void 0===s?void 0:s.url)} - ${null==r||null===(a=r.body)||void 0===a||null===(a=a.payload)||void 0===a||null===(a=a.req)||void 0===a?void 0:a.url}`;return(0,g.jsxs)("div",{style:{width:"100%"},children:[(0,g.jsxs)("div",{className:mo["log-meta-info"],children:[(0,g.jsxs)("span",{style:{color:"#f75487"},className:mo["log-meta-head"],children:[(0,g.jsx)(Xa.A,{className:mo["mark-icon"]}),(0,g.jsx)("span",{className:mo.time,children:i})]}),(0,g.jsx)("span",{className:mo.type,children:"fetch-stream"}),(0,g.jsx)("span",{className:mo.from,children:_})]}),p?(0,g.jsxs)("div",{className:mo["log-id"],children:[(0,g.jsx)("span",{children:"LogId:"}),p]}):null,(0,g.jsxs)(c.tU,{defaultActiveKey:"open",children:[m([{payload:r}],"start"),m(d,"open"),m(l,"update"),m(u,"finish"),m(h,"close")]})]})},fo=e=>{const{time:t,action:n,type:s,payload:a}=e;return(0,g.jsxs)("div",{style:{width:"100%"},children:[(0,g.jsxs)("div",{className:mo["log-meta-info"],children:[(0,g.jsxs)("span",{style:{color:"#1fa41f"},className:mo["log-meta-head"],children:[(0,g.jsx)(Za.A,{className:mo["mark-icon"]}),(0,g.jsx)("span",{className:mo.time,children:t})]}),(0,g.jsx)("span",{className:mo.type,children:s}),(0,g.jsx)("span",{className:mo.action,style:{backgroundColor:"send"===n?"#efcaef":"#c5e497"},children:n})]}),(0,g.jsx)(co,{payload:a})]})},xo=e=>{const{time:t,action:n,type:s,payload:a}=e;return(0,g.jsxs)("div",{style:{width:"100%"},children:[(0,g.jsxs)("div",{className:mo["log-meta-info"],children:[(0,g.jsxs)("span",{style:{color:"#62a0c7"},className:mo["log-meta-head"],children:[(0,g.jsx)(Ja.A,{className:mo["mark-icon"]}),(0,g.jsx)("span",{className:mo.time,children:t})]}),(0,g.jsx)("span",{className:mo.type,children:s}),(0,g.jsx)("span",{className:mo.action,children:n}),(0,g.jsx)("span",{className:mo["slardar-event-name"],children:null==a?void 0:a.name})]}),(0,g.jsx)(co,{payload:a})]})},Io=e=>{var t;const{time:n,type:s,payload:a}=e,o=null==a?void 0:a.logId;return(0,g.jsxs)("div",{style:{width:"100%"},children:[(0,g.jsxs)("div",{className:mo["log-meta-info"],children:[(0,g.jsxs)("span",{style:{color:"#c78962"},className:mo["log-meta-head"],children:[(0,g.jsx)(eo.A,{className:mo["mark-icon"]}),(0,g.jsx)("span",{className:mo.time,children:n})]}),(0,g.jsx)("span",{className:mo.type,children:s}),(0,g.jsx)("span",{className:mo.api,children:null==a||null===(t=a.config)||void 0===t?void 0:t.url})]}),o?(0,g.jsxs)("div",{className:mo["log-id"],children:[(0,g.jsx)("span",{children:"LogId:"}),o]}):null,(0,g.jsx)(co,{payload:a})]})},bo=()=>{const[e,t]=(0,a.useState)(po.values().length),[n,s]=(0,a.useState)(_o);(0,a.useEffect)((()=>{(0,ho.c)("log-event-debug").onMessage.addListener((e=>{const{type:n,action:s,payload:a}=e,o=`${Date.now().toString()}_${Math.random().toString(16).slice(2,4)}`;po.set(o,{time:(new Date).toLocaleString(),type:n,action:s,payload:a}),t(po.values().length)}))}),[]);const o=(0,a.useMemo)((()=>{const e=po.values().filter((e=>n.includes(e.type))),t=[];for(const n of e)if("fetch-stream"!==n.type)t.push(n);else{var s,a;const e="start"===n.action?null===(s=n.payload)||void 0===s?void 0:s.body.id:null===(a=n.payload)||void 0===a?void 0:a.id,o=t.find((t=>"fetch-stream"===t.type&&t._sid===e));o?o._meta.push(n):t.push((0,V.A)((0,V.A)({},n),{},{_sid:e,_meta:[n]}))}return t}),[e,n]),i=e=>{switch(e.type){case"fetch-stream":return(0,g.jsx)(vo,(0,V.A)({},e));case"websocket":return(0,g.jsx)(fo,(0,V.A)({},e));case"slardar":return(0,g.jsx)(xo,(0,V.A)({},e));case"http-request":return(0,g.jsx)(Io,(0,V.A)({},e));default:return null}};return(0,g.jsxs)("div",{className:mo.container,children:[(0,g.jsxs)("div",{className:mo["operation-area"],children:[(0,g.jsx)(c.$n,{type:"danger",onClick:()=>{po.clear(),t(0)},children:"\u6e05\u7a7a Cache"}),"  ",(0,g.jsxs)("span",{children:["\u5171\u8ba1 ",po.values().length," \u6761"]}),(0,g.jsx)("div",{children:(0,g.jsx)(c.$Q,{style:{margin:"8px 0"},onChange:e=>{s(e)},options:go,defaultValue:n,direction:"horizontal","aria-label":"\u65e5\u5fd7\u8fc7\u6ee4\u9879"})})]}),(0,g.jsx)(c.B8,{bordered:!0,dataSource:o,renderItem:e=>(0,g.jsx)(c.B8.Item,{className:mo["list-item"],children:i(e)})})]})};var Ao=n(86548),yo=n(76482);const jo="list-item-X7bNtL",wo="from-IkTajm",So="actions-gqTZbp",ko="action-list-doPZRw",Mo=({tKey:e,tValue:t,onClose:n,visible:s})=>{const[o,i]=(0,a.useState)(JSON.stringify(t,null,2));return(0,g.jsx)(c.aF,{centered:!0,onOk:()=>{yo.A.setItem(e,(0,Ao.O)(o)),n()},onCancel:n,visible:s,width:480,title:`Edit Storage of ${e}`,children:(0,g.jsx)("textarea",{rows:16,defaultValue:o,value:o,onChange:e=>i(e.target.value),style:{display:"block",width:"100%",maxHeight:600,resize:"none",outline:"none",border:"1px solid #333"}})})},Co=()=>{const[e,t]=(0,a.useState)({}),[n,o]=(0,a.useState)([]),[i,r]=(0,a.useState)({modalVisible:!1,targetKey:"",targetValue:""});(0,a.useEffect)((()=>{(0,s.A)((function*(){try{const e=yield yo.A.getAll(),n=Object.keys(e),s=n.reduce(((t,n)=>(0,V.A)({[n]:(0,Ao.O)(e[n],"{}")},t)),{});t(s),yo.A.watch(n.reduce(((e,n)=>(0,V.A)({[n]:e=>{t((t=>{let s=(0,V.A)({},t);return void 0===e.newValue?delete s[n]:s=(0,V.A)((0,V.A)({},s),{},{[n]:e.newValue}),s}))}},e)),{}))}catch(e){}}))()}),[]);const l=function(){var e=(0,s.A)((function*(){yo.A.clear();const e=yield yo.A.getAll();t(e)}));return function(){return e.apply(this,arguments)}}(),d=(0,a.useMemo)((()=>n.length?n:Object.keys(e).sort()),[n,e]);return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:ko,children:[(0,g.jsx)(c.$n,{type:"danger",onClick:l,children:"\u6e05\u7a7a Storage"}),(0,g.jsx)(c.l6,{filter:!0,showClear:!0,style:{width:360},placeholder:"\u641c\u7d22 storage",dropdownMatchSelectWidth:!0,onChange:e=>o(e?[e]:[]),children:Object.keys(e).sort().map((e=>(0,g.jsx)(c.l6.Option,{value:e,children:e},e)))})]}),(0,g.jsx)(c.B8,{bordered:!0,dataSource:d,renderItem:t=>(0,g.jsxs)(c.B8.Item,{className:jo,children:[(0,g.jsx)("span",{className:wo,children:t}),(0,g.jsxs)("span",{className:So,children:[(0,g.jsx)(h.bz,{onClick:()=>no()(JSON.stringify(e[t]))}),(0,g.jsx)(h.PW,{onClick:()=>r({modalVisible:!0,targetKey:t,targetValue:e[t]})}),(0,g.jsx)(h.xV,{onClick:()=>(e=>{yo.A.remove(e)})(t)})]}),(0,g.jsx)(co,{payload:e[t]})]})}),i.targetKey&&(0,g.jsx)(Mo,{visible:i.modalVisible,tKey:i.targetKey,tValue:i.targetValue,onClose:()=>{r((e=>(0,V.A)((0,V.A)({},e),{},{modalVisible:!1})))}},i.targetKey)]})},Eo=({enabled:e,onClose:t})=>{const[n,s]=(0,a.useState)(e),o=(0,L.Y)("authInfo")[0];return(0,g.jsxs)(c.aF,{visible:n,onCancel:()=>{s(!1),null==t||t()},title:"Debug Panel",width:"75vw",closeOnEsc:!1,maskClosable:!1,children:[(0,g.jsxs)("div",{style:{fontSize:12},children:[(0,g.jsx)("b",{children:"UserId:"})," ",null==o?void 0:o.userId,", ",(0,g.jsx)("b",{children:"ExtVersion:"})," ",(0,On.HF)()]}),(0,g.jsxs)(c.tU,{type:"line",contentStyle:{maxHeight:"calc(100vh - 320px)",overflowY:"auto"},children:[(0,g.jsx)(c.mF,{tab:"SW-LOG",itemKey:"sw-log",children:(0,g.jsx)(bo,{})}),(0,g.jsx)(c.mF,{tab:"STORAGE",itemKey:"storage",children:(0,g.jsx)(Co,{})})]})]})};var No=n(51272);const To=n(35803).A.create({timeout:1e4});var Lo=n(46694);const Po="container-LKVCqi",Ro=()=>{var e;const t=(0,l.B)(),[n]=(0,L.Y)("authInfo"),[s,o]=(0,a.useState)(!1),[i,r]=(0,a.useState)(0);return(0,g.jsxs)("div",{className:Po,children:[(0,g.jsx)("h2",{className:k,onClick:e=>e.shiftKey&&r((e=>e+1)),children:t("flow_web_ext_setting_contact_us")}),(0,g.jsx)($a,{userAvatar:null==n?void 0:n.avatarUrl,userId:null!==(e=null==n?void 0:n.userId)&&void 0!==e?e:"",t,logger:ee.c6,aid:Number(Z.sZ),appName:"cici-browser-plugin",appkey:"cici-browser-plugin-web",deviceId:(0,Lo.IP)(),getFeedbackList:No.K.setting.GetFeedbackList.bind(No.K.setting),getUploadAuthToken:No.K.resource.GetUploadAuthToken.bind(No.K.resource),visible:s,onClose:()=>{o(!1)},feedbackAxiosInstance:To,channel:"extension",baseUrl:Z.C1,reqQueryParams:{version_code:(0,On.HF)()}}),i>=7?(0,g.jsx)(Eo,{enabled:!0,onClose:()=>r(0)}):null]})};var Do=n(48544),Fo=n(9012),Bo=n(20997),Oo=n(71431),Uo=n(50427),qo=n(65144);const Ho=Oo.A;const zo={autoWrap:!0,ignoreUrls:[/\.(js|css|html)$/gm,/builder-runtime\.hot-update\.json$/gm,/firebaseinstallations\.googleapis\.com/gm,/(.*)\.zijieapi\.com\/list/gm,/(.*)\.byteoversea\.com/gm],collectBodyOnError:!0,extraExtractor:(e,t)=>{const n=function(e){return(0,ja.A)(e)?e.startsWith("{")?(0,Ao.O)(e,{}):{}:(0,Bo.A)(e)&&e?e:{code:"INVALID_JSON"}}(e),s=t?(0,Fo.A)(t,"response.status"):void 0;return((e,t)=>200===t&&(0,Bo.A)(e)&&"code"in e&&0!==e.code)(n,s)?{code:`${n.code}`}:!!((e,t)=>200===t&&(0,Bo.A)(e)&&"message"in e&&"success"!==e.message&&"data"in e&&(0,Bo.A)(e.data)&&"error_code"in e.data&&(0,wa.A)(e.data.error_code))(n,s)&&{error_code:`${n.data.error_code}`,description:"description"in n.data&&(0,ja.A)(n.data.description)?n.data.description:""}}},Ko=()=>({bid:"flow_web_ext",env:(0,qo.RA)(),release:(0,On.HF)(),pid:location.pathname,domain:"cn"===(0,Uo.J)()?"mon.zijieapi.com":"mon-va.byteoversea.com",plugins:{ajax:zo,fetch:zo,jsError:{ignoreErrors:[]},pageview:{extractPid:()=>location.pathname}}});function Vo(e){Ho("context.merge",e)}function Wo(e,t){Vo(t),function(e){Ho&&Ho("init",(0,V.A)((0,V.A)({},Ko()),e))}(e),Ho("start")}var Go=n(75787),Qo=n(11021),Yo=n(24473),$o=n(33388),Xo=n(22234),Zo=n(56642),Jo=n(41543);var ei=n(1921);const ti=()=>{const e=(0,Yo.Uk)(),t=function(e){const[t,n]=(0,a.useState)((0,Xo.A)((0,T.TK)("appSettings")[e],Jo.K[e])),[s]=(0,L.Y)("appSettings");return(0,a.useEffect)((()=>{const a=(0,Xo.A)(s[e],Jo.K[e]);(0,Zo.x)(t,a)||n(a)}),[s,e]),t}("search_addons")||{},[n,s]=(0,a.useState)("general-section"),o=[{itemKey:"general-section",caption:e("flow_web_ext_setting_general"),component:(0,g.jsx)(Cs,{})},{itemKey:"enabled-websites-section",caption:e("flow_web_ext_setting_enabledsites"),component:(0,g.jsx)(Ts,{})},{itemKey:"sidebar",caption:e("flow_web_ext_setting_sidebar"),component:(0,g.jsx)(Un,{})},{itemKey:"toolbar-configuration",caption:e("flow_web_ext_setting_toolbarconfig"),component:(0,g.jsx)(Ut,{})},{itemKey:"search-engin-summary",caption:e("flow_web_ext_setting_search_summary"),component:(0,g.jsx)(zn,{})},{itemKey:"writing",caption:e("flow_web_ext_setting_writing"),component:(0,g.jsx)(Nn,{}),disable:!1},{itemKey:"video-summary",caption:e("flow_web_ext_setting_video"),component:(0,g.jsx)(Dn,{})},{itemKey:"podcast-summary",caption:e("flow_web_ext_setting_podcast"),component:(0,g.jsx)(Gn,{})},{itemKey:"recommend-feed",caption:e("flow_web_ext_setting_recommend"),component:(0,g.jsx)(Vn,{}),disable:!t.feed_card_show},{itemKey:"shortcuts",caption:e("flow_web_ext_setting_shortcut"),component:(0,g.jsx)(kn,{})},{itemKey:"contact-section",caption:e("flow_web_ext_setting_contact_us"),component:(0,g.jsx)(Ro,{})}],i=(0,a.useMemo)((()=>o.filter((e=>!0!==e.disable)).find((e=>e.itemKey===n))||o[0]),[n]);(0,$o.A)(document,"body");return(0,a.useEffect)((()=>{var e;Wo({}),Ho("sendPageview",null!=e?e:location.pathname);const t=new URLSearchParams(window.location.search),n=t.get("enter_method");(0,Go.Gk)({enter_method:n||G.cz.other});const a=t.get("settting_key");a&&s(a)}),[]),(0,g.jsx)(l.C,{t:e,children:(0,g.jsx)("div",{className:r()(v,"cici-ext-always-light","semi-always-light"),children:(0,g.jsxs)("div",{className:f,children:[(0,g.jsx)("div",{className:x,"data-testid":"option-menu-container",children:(0,g.jsxs)("div",{className:I,children:[(0,g.jsxs)("div",{className:b,children:[(0,g.jsx)("img",{className:A,src:(0,On.Nf)(),alt:"logo"}),(0,g.jsx)("span",{className:y,children:(0,On.L2)()})]}),(0,g.jsx)(c.so,{className:j,selectedKeys:[n],onClick:({itemKey:e=""})=>{s(e)},items:o.filter((e=>!0!==e.disable)).map((e=>({itemKey:e.itemKey,text:e.caption,className:`option-${e.itemKey}`})))})]})}),(0,g.jsx)("div",{className:w,children:(0,g.jsx)("div",{"data-testid":`option-${i.itemKey}`,className:S,children:i.component},i.itemKey)})]})})})},ni=()=>{var e;const t=(0,T.TK)("authInfo");var n;Vo({real_user_id:t.userId,real_device_id:null!==(e=(0,Lo.IP)())&&void 0!==e?e:void 0,country:(0,T.ue)().country,version:(0,On.HF)()}),t.userId&&(n={userId:t.userId,deviceId:(0,Lo.IP)(),release:(0,On.HF)(),pid:location.pathname},Ho("config",n))};(0,s.A)((function*(){yield(0,T.lv)(),yield Do.Ay.initTea(),yield(0,Yo.LE)(),yield(0,ei.S)(),yield ge(),ni(),(0,Qo.c)({name:"update-auth-info",body:{reason:"options: start load"}}),o.createRoot(document.getElementById("root")).render((0,g.jsx)(ti,{}))}))()},27675:(e,t,n)=>{n.d(t,{Bc:()=>d,Pe:()=>h});var s=n(14065),a=n(60258),o=(n(11646),n(93196)),i=n(51242),r=n(60822),l=(n(37524),n(71905),n(11021)),c=(n(30065),n(41351));n(17753);function d(e,t){return u.apply(this,arguments)}function u(){return(u=(0,s.A)((function*(e,t){r.l.getState().isSidePanelMode&&!c._.isInSidePanel?yield(0,l.c)({name:"send-message-to-chat",body:{msg:t,chatType:e}}):(0,o.C)(t,{chatType:e})}))).apply(this,arguments)}function h(e,t,n){const s=e===i.H.NewThread;return{botId:n,conversationId:s?void 0:t,localConversationId:s?t:void 0,conversationType:s?a.Cr.CocoWebSub:void 0}}},46043:(e,t,n)=>{n.d(t,{CE:()=>x,Lv:()=>b,N0:()=>L,Qx:()=>y,Yb:()=>N,aZ:()=>w,gP:()=>v,s6:()=>k,y6:()=>C});var s=n(44557),a=n(14065),o=n(16604),i=n(46745),r=n(28920),l=n(89739),c=n(71905),d=n(39275),u=n(58735),h=n(89207);const m=new Map;function p(e){var t;return{id:-1,tags:[],language:null!==(t=(0,o.wz)((0,c.TK)("uiLanguage")))&&void 0!==t?t:navigator.language,collection_type:e,source_url:location.href}}function g(e){return _.apply(this,arguments)}function _(){return(_=(0,a.A)((function*(e){const t=yield(0,h.S6)({method:"POST",url:`${l.kD}/collection/create`,data:e});if(t instanceof Error)throw t;return t}))).apply(this,arguments)}function v(e){return f.apply(this,arguments)}function f(){return(f=(0,a.A)((function*(e){const t={collection:(0,s.A)((0,s.A)({},p(i.e.TextFragment)),{},{text_fragment:{ctx_text:e.contextText,selection_text:e.selectionText,anchor_offset:e.anchorOffset}})};return yield g(t)}))).apply(this,arguments)}function x(e,t){return I.apply(this,arguments)}function I(){return(I=(0,a.A)((function*(e,t){const n={collection:(0,s.A)((0,s.A)({},p(i.e.TranslateResult)),{},{summary:t.translatedText,summary_msg_id_str:e,translate_result:{selection_text:t.selectionText,translate_language:t.translate_lang}})};return yield g(n)}))).apply(this,arguments)}function b(e,t){return A.apply(this,arguments)}function A(){return(A=(0,a.A)((function*(e,t){const n={collection:(0,s.A)((0,s.A)({},p(i.e.ExplainResult)),{},{summary:t.explainedText,summary_msg_id_str:e,explain_result:{selection_text:t.selectionText}})};return yield g(n)}))).apply(this,arguments)}function y(e,t){return j.apply(this,arguments)}function j(){return(j=(0,a.A)((function*(e,t){const n={collection:(0,s.A)((0,s.A)({},p(i.e.SearchResult)),{},{summary:t.generatedText,summary_msg_id_str:e,search_result:{search_text:t.searchText}})};return yield g(n)}))).apply(this,arguments)}function w(e,t,n){return S.apply(this,arguments)}function S(){return(S=(0,a.A)((function*(e,t,n){const a={collection:(0,s.A)((0,s.A)({},p(i.e.Web)),{},{fingerprint:t,web:{text_content:e.text_content,html_content:e.html_content,title:e.title,dir:e.dir,description:e.description,cover_image_url:e.cover_image_url,snapshot_img_key:e.snapshot_img_key}})};if(n&&(a.collection.source_url=n),!t)return yield g(a);const o=m.get(t);if(o)return o;const r=new Promise(((e,t)=>g(a).then(e).catch(t))).finally((()=>m.delete(t)));return m.set(t,r),r}))).apply(this,arguments)}function k(e){return M.apply(this,arguments)}function M(){return(M=(0,a.A)((function*(e){const t={collection:(0,s.A)((0,s.A)({},p(i.e.Pdf)),{},{fingerprint:yield(0,r.K)(i.e.Pdf),pdf:e})};return yield g(t)}))).apply(this,arguments)}function C(e,t){return E.apply(this,arguments)}function E(){return(E=(0,a.A)((function*(e,t){const n={collection:(0,s.A)((0,s.A)({},p(i.e.SocialWebCard)),{},{social_web_card:e})};return t&&(n.collection.source_url=t),yield g(n)}))).apply(this,arguments)}function N(e,t,n,s){return T.apply(this,arguments)}function T(){return(T=(0,a.A)((function*(e,t,n,a){n.highlights_message_id=n.highlights_message_id||void 0,n.timeline_msg_id_str=n.timeline_msg_id_str||void 0;const o=yield(0,r.K)(i.e.VideoSummary),l={collection:(0,s.A)((0,s.A)({},p(i.e.VideoSummary)),{},{fingerprint:o,summary:e,memos:a,summary_msg_id_str:t,video_summary:n})},c=m.get(o);if(c)return c;const d=new Promise(((e,t)=>g(l).then(e).catch(t))).finally((()=>m.delete(o)));return m.set(o,d),d}))).apply(this,arguments)}function L(e=!0){return new Promise(((t,n)=>{const s=document.querySelector(`#${u.Yq}`),{display:a}=(null==s?void 0:s.style)||{};let o;e&&s&&(s.style.display="none",o=setTimeout((()=>{s.style.display=a,o=void 0}),2e3)),setTimeout((()=>{(0,d.cs)("capture-visible-tab").then((n=>{t(n.data),e&&s&&(s.style.display=a),void 0!==o&&clearTimeout(o)})).catch((e=>{void 0!==o&&clearTimeout(o),n(e)}))}),100)}))}},32572:(e,t,n)=>{var s=n(22910),a=n(89739),o=n(46694),i=n(89207);(0,s.n)({httpClient:i.sY,getCommonParams:o.wH,baseURL:a.C1})},41650:(e,t,n)=>{n.d(t,{QH:()=>g,ae:()=>u,mL:()=>m,o2:()=>h,p6:()=>l,vP:()=>r});var s=n(61540),a=n(54483),o=n(31525),i=n(21642);let r=function(e){return e.arxiv_view_pdf="arxiv_view_pdf",e.chrome_pdf_viewer="chrome_pdf_viewer",e.side_bar_popover="side_bar_popover",e.search_result_card="search_result_card",e.video_page_summarize="video_page_summarize",e.highlight_result_card_translate="highlight_result_card_translate",e.highlight_result_card_explain="highlight_result_card_explain",e.highlight_function_bar="highlight_function_bar",e.right_click="right_click",e.collect_this_page="collect_this_page",e.webimage_collect="webimage_collect",e.video_memo_save="video_memo_save",e}({}),l=function(e){return e.videosummary="videosummary",e.searchresult="searchresult",e.textfragment="textfragment",e.TranslateResult="TranslateResult",e.ExplainResult="ExplainResult",e.web="web",e.pdf="pdf",e}({});function c(e=location.hostname){return e}function d(){let e=(0,s.M5)(location.href);return e.startsWith("search_engine_")&&(e="search_engine"),e}function u(e,t){(0,s.z8)(a.Ur.collectionButtonShow,{show_from:e,current_page:d(),collect_type:t,collect_from_site:c()})}function h(e,t){(0,s.z8)(a.Ur.collectionButtonClickSave,{click_from:e,collect_type:t,current_page:d(),collect_from_site:c()})}function m(e,t,n,o){(0,s.z8)(a.Ur.collectionButtonClickSaveStatus,{click_from:e,current_page:d(),collect_from_site:c(),success:t,collect_type:n,collect_id:o})}function p(){if(!(0,i.ku)())return;const e=window.getSelection();(null==e?void 0:e.toString().trim())?u(r.right_click,l.textfragment):u(r.collect_this_page,l.web)}function g(){document.addEventListener("contextmenu",p),(0,o.A)((()=>{document.removeEventListener("contextmenu",p)}))}},75787:(e,t,n)=>{n.d(t,{Gk:()=>o});var s=n(61540),a=n(54483);const o=({enter_method:e})=>{(0,s.z8)(a.Ur.enterPage,{enter_method:e})}},54483:(e,t,n)=>{n.d(t,{Ur:()=>r,Yd:()=>o,Z5:()=>a,_h:()=>i,cz:()=>l,g6:()=>s});let s=function(e){return e.setting="setting",e.landing="landing",e.welcome="extension_welcome",e.login="login",e.uninstall="uninstall",e.extensionOther="extension_other",e.baidu="search_engine_baidu",e.google="search_engine_google",e.bing="search_engine_bing",e.toutiao="search_engine_toutiao",e.youtube="youtube",e.bilibili="bilibili",e.chat="chat",e.chatgpt="chatgpt",e.mail="mail_page",e.xiaoyuzhou="xiaoyuzhou",e.apple="apple",e.webOther="web_otherpage",e}({}),a=function(e){return e.onboarding="onboarding",e.selectAssistantMenu="highlight_function_bar",e.selectAssistantMoreMenu="highlight_function_bar_dropdown",e.selectAssistantResult="highlight_result_card",e.searchAssistant="search_result_card",e.videoAssistant="video_page_summarize",e.chatAssistantPopover="sidebar_action_popover",e.chatAssistantPopoverSettings="sidebar_action_popover_settings",e.sendMessageInChat="send_message_in_chat",e.mailCreate="mail_create",e.mailUpdate="mail_update",e.mailEntryButton="mail_entry_button",e.mailPositive="mail_positive",e.mailNegative="mail_negative",e.mailNeedMore="mail_need_more",e.arxiv="arxiv",e.pdf="pdf",e.context_menu="context_menu",e.shortcut="shortcut",e.inputText="input_text",e.collect="collect",e.searchResultPreview="search_result_preview",e.deepSearchMode="deep_search_mode",e}({}),o=function(e){return e.setting="setting",e.addASkill="add_a_skill",e.discoverSkill="discover_skill",e}({}),i=function(e){return e.insert="insert_below",e.replace="replace_selection",e.suggest="suggest",e.share="share",e.summarizeVideo="summarize_video",e.immersionGuideTips="immersion_guide_tips",e.immersionGuideIcon="immersion_guide_icon",e.summarizePodcast="summarize_podcast",e.translatePage="translate_this_page",e.summarizePage="summarize_this_page",e.languageSettings="language_settings",e.displayOriginalText="display_original_text",e.alwaysTranslatePage="always_translate_this_page",e.viewInWeb="view_in_web",e.settings="settings",e.historyChats="history_chats",e.collection="collection",e.allConversation="all_conversation",e.understandContext="understand_context",e.download="download",e.updateLog="update_log",e.highlightSelectionBar="highlight_selection_bar",e.fold="fold",e.expand="expand",e.expanded="expanded",e.collapsed="collapsed",e.regeneration="regeneration",e.formalize="formalize",e.elaborate="elaborate",e.shorten="shorten",e.write="help_me_write",e.rewrite="rewrite",e.changeReplyLang="change_reply_lang",e.hideUntilNext="hide_until_next",e.closeWritingAssistant="close_writing_assistant",e.closeGrammerCheck="close_grammar_check",e.writingLanguage="language_setting",e.btnCopy="copy",e.btnInsert="insert",e.btnReplace="replace",e.dismiss="dismiss",e.understandContextOn="understand_context_on",e.understandContextOff="understand_context_off",e}({}),r=function(e){return e.copy="copy",e.regenerate="click_regenerate",e.continueInChat="continue_in_chat",e.retry="retry",e.enterPage="enter_page",e.generationFailure="generation_failure",e.share="share",e.viewDAU="view_dau",e.activeDAU="active_dau",e.sendMessage="send_message",e.showSelectAssistantMenu="highlight_function_bar_show",e.showSelectAssistantBtn="highlight_function_bar_function_show",e.clickSelectAssistantMenuBtn="highlight_function_bar_click",e.showSelectAssistantResult="highlight_result_show",e.clickSelectAssistantResultBtn="highlight_result_action",e.closeSelectAssistantResult="highlight_result_close",e.showChatAssistant="side_bar_entrance_show",e.showChatAssistantPopover="show_side_bar_popover",e.clickChatAssistantPopover="click_side_bar_popover",e.showChatAssistantPopoverSettings="show_side_bar_settings_popover_button",e.clickChatAssistantPopoverSettings="click_side_bar_settings_popover_button",e.showChatHeaderBtn="show_chat_header_button",e.clickChatHeaderBtn="click_chat_header_button",e.showChatFloatCard="highlight_action_module_sidebarshow",e.clickChatFloatCard="highlight_action_module_sidebarclick",e.showSearchAssistant="search_result_card_show",e.searchResultCardClick="search_result_card_click",e.showSearchAssistantSuggest="show_suggested_prompt",e.showSearchAssistantSuggestQuestion="show_suggested_prompt_single_question",e.clickSearchAssistantSuggest="click_suggested_prompt",e.closeSearchAssistant="search_result_card_disappear",e.showDeepSearchAssistant="search_summarize_result_show",e.showSources="sources_show",e.clickSources="sources_click",e.collapseDeepSearchCard="search_card_collapse",e.showDeepSearchBtn="deep_search_button_show",e.clickDeepSearchBtn="deep_search_button_click",e.showVideoAssistant="video_summarize_module_show",e.clickVideoAssistantSummarizeBtn="video_summarize_module_click",e.showVideoAssistantSummarizeResult="video_summarize_result_show",e.clickVideoAssistantSummarizeResult="video_summarize_result_click",e.showVideoAssistantHighlightsTimeline="highlights_timeline_singleshow",e.clickVideoAssistantHighlightsTimeline="highlights_timeline_singleclick",e.clickVideoImmersion="video_immersion_click",e.showVideoImmersion="video_immersion_show",e.immersionTimeLine="immersion_timeline",e.showVideoImmersionGuideTips="video_immersion_guide_tips_show",e.clickVideoImmersionGuideTips="video_immersion_guide_tips_click",e.showVideoImmersionGuideIcon="video_immersion_guide_icon_show",e.clickVideoImmersionGuideIcon="video_immersion_guide_icon_click",e.clickPodcastAssistantSummarizeBtn="podcast_summarize_module_click",e.showMailEntryButton="mail_entry_button_show",e.clickMailEntryButton="mail_entry_button_click",e.clickInputBar="input_bar_click",e.showMailThreadResult="mail_thread_result_show",e.clickMailThreadResult="mail_thread_result_click",e.insertMailThreadResult="mail_thread_result_insert",e.closeMailThreadResult="mail_thread_result_close",e.quickReplyButtonShow="ai_reply_button_show",e.hoverQuickReplyButton="hover_ai_reply_button",e.showPdfAssistant="pdf_read_show",e.clickReadPdfBtn="pdf_read_click",e.showDisableMenu="disable_menu_show",e.clickDisableMenu="confirm_close_function",e.chooseLanguage="choose_language_result",e.newSkillAdd="new_skill_add",e.skillEditClick="skill_edit_click",e.skillEditDelete="skill_edit_delete",e.skillPopupSave="skill_popup_save",e.skillPopupIconClick="skill_popup_icon_click",e.skillPopupCancel="skill_popup_cancel",e.skillPopupClose="skill_popup_close",e.exampleClick="example_click",e.examplePopupClose="example_popup_close",e.collectionButtonShow="collection_button_show",e.collectionButtonClickSave="collection_button_click_save",e.collectionButtonClickSaveStatus="collection_button_click_save_status",e.writingSettingClick="mail_entry_setting_click",e.writingSkilShow="skill_module_show",e.writingSkillClick="click_suggested_content",e.linkPreviewEntryShow="search_result_preview_icon_show",e.linkPreviewResultShow="search_result_preview_result_show",e.linkPreviewResultClick="search_result_preview_result_click",e.doubaoDownloadPopupShow="doubao_download_popup_show",e.doubaoDownloadPopupClick="doubao_download_popup_click",e.takeNoteShow="take_note_show",e.takeNotePadShow="take_note_pad_show",e.takeNotePadClick="take_note_pad_click",e.takeNoteBtnClick="video_tool_bar_take_note_click",e.takeNoteStatus="take_note_pad_click_status",e}({}),l=function(e){return e.clickSidebar="click_side_bar",e.selectAssistantMenu="highlight_function_bar",e.selectAssistantResult="highlight_result_card",e.searchAssistant="search_result_card",e.videoAssistant="video_page_summarize",e.onboarding="onboarding",e.chatHeader="chat_header",e.disableMenu="close_function",e.other="other",e.default="default",e}({})},61540:(e,t,n)=>{n.d(t,{M5:()=>m,z8:()=>p});var s=n(44557),a=n(54483),o=n(8050),i=n(48544),r=(n(60822),n(38671)),l=(n(37524),n(71905),n(41264)),c=n(24768),d=n(62325),u=n(34350),h=n(58735);const m=e=>{if(e.startsWith((0,u.Yh)()))return a.g6.setting;if(e.includes(h.o2))return a.g6.landing;if(e.includes(h.EP))return a.g6.login;if(e.includes(h.JE))return a.g6.welcome;if(e.includes(h.j0))return a.g6.uninstall;if(e.includes(h.Cp))return a.g6.extensionOther;const t=(0,l.Ay)(e);return t?a.g6[t.name]:(0,r.jB)("youtube")?a.g6.youtube:(0,r.jB)("bilibili")?a.g6.bilibili:(0,d.nW)(e)?a.g6.mail:/https?:\/\/(\w+\.)?chatgpt\.com\//gi.test(e)?a.g6.chatgpt:(0,c.gw)(e)?a.g6.xiaoyuzhou:(0,c.Dd)(e)?a.g6.apple:function(e){try{const t=new URL(e);if(/^https?:?$/.test(t.protocol))return t.host.replace(/\./gi,"_")}catch(t){}return a.g6.webOther}(e)},p=(e,t,n=!0,a=!0)=>{var r;const l=m(location.href);null===(r=i.Ay.Tea)||void 0===r||r.event(e,(0,s.A)({current_page:l},t)),n&&(0,o.gR)(e,(0,s.A)({current_page:l},t)),a&&(0,o.zl)(e,(0,s.A)({current_page:l},t))}},93215:(e,t,n)=>{n.d(t,{Bp:()=>i,ih:()=>o});var s=n(61540),a=n(54483);n(75787),n(71905);const o=({button_name:e,show_from:t})=>{(0,s.z8)(a.Ur.showSelectAssistantBtn,{button_name:e,show_from:t})},i=({button_name:e,click_from:t=a.Z5.selectAssistantMenu})=>{(0,s.z8)(a.Ur.clickSelectAssistantMenuBtn,{button_name:e,click_from:t})}},26263:(e,t,n)=>{n.d(t,{Bq:()=>d,jk:()=>u});var s=n(61540),a=n(54483),o=n(99301);let i=function(e){return e.selectAssistant="highlight_result",e.searchAssistant="search_result_card",e.chatAssistant="side_bar_entrance",e.youtubeAssistant="youtube_summarize",e.searchAddons="search-addons",e.linkPreview="link-preview",e}({}),r=function(e){return e.page="disable_page",e.global="disable_all",e.temp="hide_till_next_time",e}({});const l=e=>{let t="";switch(e){case o.lf.chatAssistant:t=i.chatAssistant;break;case o.lf.searchAssistant:t=i.searchAssistant;break;case o.lf.selectAssistant:t=i.selectAssistant;break;case o.lf.searchAddons:t=i.searchAddons;break;case o.lf.linkPreview:t=i.linkPreview}return t},c=e=>{let t="";switch(e){case o.iI.temp:t=r.temp;break;case o.iI.page:t=r.page;break;case o.iI.global:t=r.global}return t},d=e=>{(0,s.z8)(a.Ur.showDisableMenu,{enter_method:l(e)})},u=(e,t)=>{(0,s.z8)(a.Ur.clickDisableMenu,{enter_method:l(t),button_name:c(e)})}},99301:(e,t,n)=>{n.d(t,{c$:()=>o,iI:()=>a,lf:()=>s,th:()=>i});let s=function(e){return e.chatAssistant="sidebarButton",e.searchAssistant="search",e.selectAssistant="quick",e.grammar="grammar",e.inputAssistant="input",e.searchAddons="search-addons",e.videoSummary="videoSummary",e.videoSubtitle="videoSubtitle",e.podcastSummary="podcastSummary",e.linkPreview="linkPreview",e.sidebarFloatCard="sidebarFloatCard",e}({}),a=function(e){return e.temp="temp",e.page="page",e.global="global",e}({}),o=function(e){return e.HUOSHAN="huoshan",e.DOUBAO="doubao",e.GPT="gpt",e.GOOGLE="google",e.MICROSOFT="microsoft",e.DEEPL="deepl",e}({}),i=function(e){return e.HUOSHAN="0",e.LLM="1",e.GOOGLE="2",e.MICROSOFT="3",e}({})},89739:(e,t,n)=>{n.d(t,{C1:()=>r,FI:()=>a,Jk:()=>u,KT:()=>l,Vl:()=>h,_E:()=>p,eG:()=>m,kD:()=>d,lx:()=>c,nD:()=>i,sZ:()=>o,zs:()=>g});var s=n(99301);const a="www.doubao.com",o="586864",i="production",r="https://www.doubao.com",l=`https://${a}/chat/settings`,c="web",d=`https://${a}/samantha`,u=`https://${a}/alice`,h=`https://${a}/chat/collection`,m="release_version",p=[{name:"flow_web_ext_sidebar_hide_1",key:s.iI.temp,id:1},{name:"flow_web_ext_sidebar_hide_2",key:s.iI.page,id:2},{name:"flow_web_ext_sidebar_hide_3",key:s.iI.global,id:3}],g={[s.lf.sidebarFloatCard]:{global:"chatFloatCardDisableAll",page:"chatFloatCardDisableHosts"},[s.lf.videoSubtitle]:{global:"videoSubtitleDisableAll",page:"videoSubtitleDisableHosts"},[s.lf.videoSummary]:{global:"videoSummaryDisableAll",page:"videoSummaryDisableHosts"},[s.lf.podcastSummary]:{global:"podcastSummaryDisableAll",page:"podcastSummaryDisableHosts"},[s.lf.chatAssistant]:{global:"sidebarButtonDisabledAll",page:"sidebarButtonDisabledHosts"},[s.lf.searchAssistant]:{global:"searchDisabledAll",page:"searchDisabledHosts"},[s.lf.selectAssistant]:{global:"quickDisabledAll",page:"quickDisabledHosts"},[s.lf.grammar]:{global:"disableGlobalGrammar",page:"disableGrammarHosts"},[s.lf.inputAssistant]:{global:"InputAssistantDisabledAll",page:"InputAssistantDisabledHosts"},[s.lf.searchAddons]:{global:"disableSearchAddonsGlobal",page:"disableSearchAddonsHosts"},[s.lf.linkPreview]:{global:"linkPreviewDisabledAll",page:"linkPreviewDisabledHosts"}}},59292:(e,t,n)=>{n.d(t,{r:()=>i});var s=n(11646),a=n(67697),o=n(4580);function i(e,t="image"){return(0,o.ab)(),new Promise(((n,o)=>{try{const i=s.ozw.getState(),{local_key:r}=i.preprocessFile(e,t);let l;s.ozw.subscribe((e=>e.preprocessTaskMap[r]),(e=>{l&&clearTimeout(l),l=setTimeout((()=>{const e=new Error("collect_tos_process_file_faild");a.vF.persist.error({eventName:"tos process file faild",error:e}),o(e)}),1e4),null!=e&&e.failed?o(new Error("upload file faild")):null!=e&&e.key&&n(e.key)}))}catch(i){console.error("upload image failed",i),o(i)}}))}},4601:(e,t,n)=>{n.d(t,{Vv:()=>r,n_:()=>i});var s=n(39275);function a(e){(0,s.cs)({name:"remove-fetch-cross-header",body:e})}let o;function i(e){return new Promise(((t,n)=>{const i=()=>{o=e,(0,s.cs)({name:"add-fetch-cross-header",body:e}).then((({data:s})=>{try{o=s,fetch(e).then((e=>{if(!e.ok)throw new Error("Network response was not ok");e.blob().then((n=>t({blob:n,type:e.headers.get("Content-Type")||"image/jpg"}))).catch(n)})).catch(n).finally((()=>{a(o)}))}catch(i){a(s),n(i)}var o})).catch(n).finally((()=>{o=void 0}))},r=()=>{o?setTimeout((()=>r()),50):i()};r()}))}function r(e,t){const{compressImage:n=!0,maxWidth:s=600,maxHeight:a=600,qulity:o}=t||{};return new Promise(((t,r)=>{i(e).then((({blob:e,type:i})=>{n?function(e,t,n,s="image/jpeg",a){return new Promise(((o,i)=>{const r=new FileReader;r.onload=e=>{var r;const c=new Image;c.onload=()=>{const e=document.createElement("canvas"),r=e.getContext("2d"),d=Math.min(t/c.width,n/c.height);e.width=c.width*d,e.height=c.height*d,null==r||r.drawImage(c,0,0,e.width,e.height),e.toBlob((e=>e&&l(e).then(o).catch(i)),s,a)},c.onerror=i,c.src=(null===(r=e.target)||void 0===r?void 0:r.result)||""},r.onerror=i,r.readAsDataURL(e)}))}(e,s,a,i,o).then(t).catch(r):l(e).then(t).catch(r)})).catch(r)}))}function l(e){return new Promise(((t,n)=>{const s=new FileReader;s.onload=function(e){var n;t((null===(n=e.target)||void 0===n?void 0:n.result)||"")},s.onerror=function(e){n(e)},s.readAsDataURL(e)}))}},64903:(e,t,n)=>{n.d(t,{q4:()=>g,l$:()=>p});var s=n(5687),a=n(89380),o=n(43714),i=n.n(o),r=n(56411),l=n(3400),c=n(81379);function d(e,t=[]){const n=(0,a.A)(e);let s="";for(const a of n){if((0,c.DC)(a))continue;if(!(a instanceof HTMLElement)){s+=a.textContent||"";continue}const e=a.tagName.toLowerCase();if(r.A2.includes(e)){const n=r.hT[e],o={};for(const{key:e,getter:t}of(null==n?void 0:n.attrs)||[]){const n=t?t(a):a.getAttribute(e);n&&(o[e]=n)}t.push({tag:e,originContent:(0,c.UU)(a.textContent||""),attrs:o});const i=t.length-1,{output:l}=d(Array.from(a.childNodes),t);s+=`<b${i}>${l}</b${i}>`;continue}const{output:n}=d(Array.from(a.childNodes),t);s+=n}return{output:(0,c.UU)(s),metaInfo:t}}const u=(e,t=[])=>{(0,s.A)(t,((t,n)=>{const{tag:s,originContent:a}=t,o=new RegExp(`<\\s*[bB]\\s*${n}\\s*>([\\s\\S]*?)<\\s*/\\s*[bB]\\s*${n}\\s*>`),{openTag:i,closeTag:l}=function(e){const{tag:t,attrs:n={}}=e;let s="";for(const[a,o]of Object.entries(n))s+=` ${a}="${o}"`;return["li","ol"].includes(t)?{openTag:`<ul><${t}${s}>`,closeTag:`</${t}></ul>`}:"code"===t?{openTag:"`",closeTag:"`"}:{openTag:`<${t}${s}>`,closeTag:`</${t}>`}}(t),c=r.Jy.includes(s)?`${i}${a}${l}`:`${i}$1${l}`;e=e.replace(o,c)})),e=(e=(0,l.qP)(e)).replaceAll(/\n/g,"<br />");try{return i()(e)}catch(n){return e}};var h=n(22198);n(36332),n(99824);let m;function p(e){if(e.commonAncestorContainer instanceof Element){(0,h.M)(e.commonAncestorContainer);const t=e.cloneContents(),n=(0,h.u)(Array.from(t.childNodes));m=[];return n.map((e=>d(e,m))).map((e=>e.output)).join("\n")}m=void 0}function g(e){return u(e,m||[])}},3400:(e,t,n)=>{function s(e){const t=e.getAttribute("data-cici-select-uid");if(t){const e=document.querySelector(`[data-cici-select-uid="${t}"]`);if(e)return getComputedStyle(e)}}function a(e){return e.replaceAll(/<\s*\/?\s*[bB]\s*\d+\s*>/g,"")}n.d(t,{D6:()=>s,qP:()=>a})},48544:(e,t,n)=>{n.d(t,{Ay:()=>f,FM:()=>p,Mz:()=>_});var s=n(10633),a=n(14065),o=n(85371),i=n(21511),r=n(76021),l=(n(11855),n(90152)),c=n(89739),d=n(71905),u=n(13748),h=(n(9584),n(34350)),m=n(1e4);let p=function(e){return e.deepSearchEntryMode="deepSearchEntryMode",e.enableNewChat="enableNewChat",e.enableWebAISearch="enableWebAISearch",e.enableChatCtx="enableChatCtx",e.enableLinkPreview="enableLinkPreview",e.searchCardAutoSummary="searchCardAutoSummary",e}({});const g=(0,r.A)((()=>{(0,i.A)(Object.keys(p)).forEach((e=>{v.Tea.getVar(e,null,(t=>{(0,d.vE)("abTestValue",{[e]:t},!0)}))}))}));function _(e,t){const n=(0,d.TK)("abTestValue");return(0,o.A)(n[e])&&v.Tea.getVar(e,t,(t=>{(0,d.vE)("abTestValue",{[e]:t},!0)})),(0,o.A)(n[e])?t:n[e]}const v=new class{constructor(){var e=this;(0,s.A)(this,"Tea",null),(0,s.A)(this,"initTea",(0,a.A)((function*(){const t=yield(0,l.Y)(),n=(0,d.Fc)();m.A.init({app_id:Number(c.sZ),channel:"cn",log:!1,enable_ab_test:!0,ab_channel_domain:"https://abtestvm.bytedance.com"}),m.A.config({_staging_flag:0,extension_version:(0,h.HF)(),user_unique_id:t,user_id:null==n?void 0:n.userId,user_is_login:Boolean(null==n?void 0:n.isAuthenticated)}),m.A.start(),e.updateTea(m.A),g();const s={name:"auth-info-updated",handle:e=>{const{authInfo:t}=e||{};m.A.config({user_id:null==t?void 0:t.userId,user_is_login:Boolean(null==t?void 0:t.isAuthenticated)})}};(0,u.c)(s)}))),(0,s.A)(this,"updateTea",(e=>{this.Tea=e}))}getInstance(){return m.A}},f=v},40257:(e,t,n)=>{n.d(t,{EB:()=>_,F6:()=>d,Ln:()=>x,MV:()=>v,On:()=>i,Qn:()=>u,Rs:()=>h,Sf:()=>p,Sy:()=>l,W2:()=>y,_q:()=>r,dO:()=>g,dc:()=>a,eI:()=>f,fV:()=>A,hn:()=>o,i9:()=>b,rR:()=>I,so:()=>c,sq:()=>m,tL:()=>s});const s="LOCAL_USER",a=18e4,o=6e4,i=4e3,r=15e3,l=6e4,c=3e4,d=6e4,u=50,h=20,m="ONBOARDING_MESSAGE_ID",p=5e3,g=19e3,_=2e3,v=1e4,f=20971520,x="THINKING_MESSAGE_ID",I="MOCK_REPLY_MESSAGE_ID",b="ASSISTANT_CONV_ID_WITHOUT_CACHE",A=500,y=30},28171:(e,t,n)=>{n.d(t,{Il:()=>m,SR:()=>p});var s=n(44557),a=n(37462),o=n(41967),i=n(34870),r=n(45498),l=n(50655),c=n(67697);const d=(e,t)=>({duration:{},addDurationPoint(t,n){e((e=>({duration:(0,s.A)({[t]:(0,o.A)(n)?n:(0,l.Tw)()},e.duration)})))},addDurationPoints(t){e((e=>({duration:(0,s.A)((0,s.A)({},Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(0,o.A)(t)?t:(0,l.Tw)()])))),e.duration)})))},error:(t,n)=>{e({reason:t,innerError:n})}}),u=e=>{const{isEnableDebug:t}=e,n=(0,i.eh)(d);return t?(0,r.vt)()((0,i.lt)(n,{name:"flow-web-chat-tracing-store"})):(0,r.vt)()(n)};const h=function e(...t){const{_useTracingStore:n}=e.prototype;if(n)return n(...t);throw Error("useTracingStore is not initialized")};function m(e){const{_useTracingStore:t}=h.prototype||{};if(!t){const t=u(e);Object.setPrototypeOf(h.prototype,t),Object.defineProperties(h,(0,s.A)({},Object.getOwnPropertyDescriptors(t))),h.prototype._useTracingStore=t}}const p=()=>{try{const e=h.getState();return{addDurationPoint:e.addDurationPoint,addDurationPoints:e.addDurationPoints,error:e.error}}catch(e){return c.vF.error({message:"useTracingStore.getState error",error:e}),{addDurationPoint:a.A,addDurationPoints:a.A,error:a.A}}}},60767:(e,t,n)=>{n.d(t,{BN:()=>g,mS:()=>_});var s=n(33451),a=n(44557),o=n(34870),i=n(45498),r=n(98502),l=n(67697),c=n(24634),d=n(28171),u=n(17033);const h=["skillType","eventName"],m=(...e)=>{const[t,n]=e;return(0,a.A)((0,a.A)({},u.n),{},{updateActiveSkillIdMap:(e,n)=>{t((0,r.jM)((t=>{t.activeSkillIdMap[e]=n})))},resetActiveSkillIdMap:()=>{t((()=>({activeSkillIdMap:{}})))},createSkillReportEvent:e=>{var o;let{skillType:i,eventName:c}=e,d=(0,s.A)(e,h);return t((0,r.jM)((e=>{var t;null===(t=e.skillReportEvents[i])||void 0===t||null===(t=t[c])||void 0===t||t.cancel(),e.skillReportEvents[i]={[c]:(0,l.XB)((0,a.A)((0,a.A)({eventName:c},d),{},{once:!0}))}}))),null===(o=n().skillReportEvents[i])||void 0===o?void 0:o[c]},getSkillReportEvent:({skillType:e,eventName:t})=>{var s;return null===(s=n().skillReportEvents[e])||void 0===s?void 0:s[t]},updateUserPreferences:(e,n)=>{t((0,r.jM)((t=>{t.userPreferences[e]=n})))},updateSystemConfig:e=>{t((()=>({systemConfig:e})))}})},p=e=>{const{prefix:t,isEnableDebug:n,reduxDevToolsSnapshot:s}=e,a=(0,c.B)({prefix:t}),r=(0,o.Zr)((0,o.eh)(m),a);return n&&s?(0,i.vt)()((0,o.lt)(r,{name:`${t}-chat-input-store`})):(0,i.vt)()(r)};const g=function e(...t){const{_useChatInputStore:n}=e.prototype;if(n)return n(...t);throw Error("useChatInputStore is not initialized")};function _(e){const{_useChatInputStore:t}=g.prototype||{};if(!t){const t=p((0,a.A)({},e));Object.setPrototypeOf(g.prototype,t),Object.defineProperties(g,(0,a.A)({},Object.getOwnPropertyDescriptors(t))),g.prototype._useChatInputStore=t}(0,d.Il)(e)}},56793:(e,t,n)=>{n.d(t,{k:()=>o});var s=n(44557);const a={ugcMusicAutoPlay:!1},o=e=>(0,s.A)((0,s.A)({},a),{},{setUgcMusicAutoPlay:t=>{e((()=>({ugcMusicAutoPlay:t})))}})},56356:(e,t,n)=>{n.d(t,{Xy:()=>a});var s=n(22953);const a=(0,s.p)()},70119:(e,t,n)=>{n.d(t,{AU:()=>u,Sx:()=>i,aj:()=>c,dG:()=>m,gm:()=>d,i1:()=>r,if:()=>l,vM:()=>h});var s=n(60258),a=n(46931),o=n(51242);const i=e=>e===s.Cr.CocoWeb||e===s.Cr.Coco,r=e=>e===s.Cr.CocoWebSub||e===s.Cr.CocoSub,l=e=>i(null==e?void 0:e.conversation_type),c=e=>r(null==e?void 0:e.conversation_type),d=(e,t)=>{const n=l(e),s=c(e);return n||s||t===o.H.NewThread||t===o.H.UnloginMainBot},u=e=>e===a.YK.Coco||e===a.YK.CocoWeb,h=e=>e===a.YK.User,m=e=>e===a.YK.GuanFang},15841:(e,t,n)=>{n.d(t,{$2:()=>f,Az:()=>p,Qe:()=>_,aK:()=>v,uV:()=>h,yz:()=>m,zO:()=>x});var s=n(44557),a=n(94654),o=n(35841),i=n(99964),r=n(40257),l=n(84013),c=n(29581),d=n(67697),u=n(81793);const h=()=>(0,a.A)(),m=({ctx:{conversationId:e,localConversationId:t}})=>{const n=t||e;if(!n)throw new Error("conversationId is empty");return n},p=({ctx:e,resolved:t},n=c.pU.getState())=>{const{cancelReason:s}=g({store:i.ozw.getState(),conversation:n.conversationMap[t.conversationId]});if(s)return d.vF.persist.info({eventName:"send_message_cancel",meta:{local_message_id:t.localMessageId,from:i.aUK.Socket,conversation_id:e.conversationId,conversation_type:e.conversationType,reason:s}}),Boolean(s)},g=({store:e,conversation:t})=>{const n=u.gO.get("chatBotService"),s=null!=t&&t.bot_id?null==n?void 0:n.getBot(t.bot_id):{};return null!=s&&s.disabled?{cancelReason:"bot deleted"}:e.rateLimitConfig.isLimited?{cancelReason:"rate limit"}:{}};function _({conversationId:e,store:t}){const{lastAvailableMessageLink:n}=(0,l.to)(e);null!=n&&n.regen_head&&t.updateMessageList({conversationId:e,immerUpdate(e){const{draftMessageLinks:t,draftRegenerateMessageMap:s,draftMessageMap:a,draftLocalMessageMap:o}=e,r=(0,i.A4i)({localMessageMap:o,messageMap:a});t.forEach((t=>{if(t.regen_head===n.regen_head){var a;delete t.regen_head,(null===(a=s.messageMap)||void 0===a?void 0:a[t.messageId])&&delete s.messageMap[t.messageId];const n=t.isLocalMessage?r(t):void 0;n&&(0,i.HN1)(n)&&(0,i.kap)(e,t)}}))}})}const v=(e,t)=>{const{replace:n,remove:a,regenerate:o,scene:r,resolved:c,resume:d}=e,h=u.gO.get("chatConfigService"),m=function({conversationId:e,store:t}){var n;const s=(0,l.WP)(e);if(!s)return;if((0,i.Jij)(s))return;const a=(0,i.WZZ)(t.messageLinkMap[e],(n=>Boolean(n.regen_head)&&(0,i.$4u)((0,l.Tc)(e,n,t))));return!a||null!=a&&a.isLocalMessage||(null===(n=(0,l.Tc)(e,a,t))||void 0===n?void 0:n.reply_id)!==s.reply_id?void 0:a.messageId}({store:t,conversationId:c.conversationId});return(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({stream:"1"},(null==h?void 0:h.answerWithSuggest)&&{answer_with_suggest:"1"}),(null==h?void 0:h.namedEntityHighlight)&&{wiki:"2"}),(null==h?void 0:h.answerWithVideo)&&{media_search_type:"1"}),n?{replace:"1"}:{}),a?{delete:"1"}:{}),o?{regen:"1"}:{}),d?{resume:"1"}:{}),n||d||a||o||!m?{}:{lastRegenerateSelectedMessageId:m}),"onboarding_suggestion"===r?{onboarding_v2:"1"}:{}),"keyboard_unlog"===r?{scene:r}:{}),c.localCreateExt)},f=(e,t)=>{var n;return t?null===(n=e.find((({resolved:e})=>{return(null==(n=e)||null===(s=n.localContent)||void 0===s?void 0:s.preprocess_key)===t;var n,s})))||void 0===n?void 0:n.resolved.localMessageId:void 0},x=(e,t)=>e?Date.now()+r.hn:t!==o.cM.File?Date.now()+r._q:void 0},60305:(e,t,n)=>{n.d(t,{c:()=>i});var s=n(35754),a=n(99964),o=n(21006);const i=e=>{const t=a.ozw.getState();return(0,s.A)(e.map((e=>{var n;const{conversationId:s}=e.ctx;if(!s)return e;if(e.replace&&null!==(n=(0,o.Tc)(s,e.replace.messageLink,t))&&void 0!==n&&null!==(n=n.ext)&&void 0!==n&&n.collection_id){var i;const n=(0,o.Tc)(s,e.replace.messageLink,t),r=null==n||null===(i=n.ext)||void 0===i?void 0:i.collection_id;if(!r||!(0,a.pu_)(n))return e;const l=t.messageLinkMap[s],c=t.messageMap[s];return l.filter((e=>{var n;return(0,a.c84)(c[e.messageId],t.userInfo.secUserId)&&(null===(n=c[e.messageId])||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.collection_id)===r})).map((t=>t.messageId===n.message_id?e:{ctx:e.ctx,scene:e.scene,replace:{messageLink:t}}))}return e})))}},93207:(e,t,n)=>{n.d(t,{Az:()=>s.Az,c8:()=>i.c,kk:()=>o.kk,fr:()=>o.fr,YV:()=>o.YV,QP:()=>o.QP,JG:()=>o.JG,Bu:()=>o.Bu,vm:()=>a.v,p8:()=>r.p});n(64295);var s=n(15841);n(67697),n(99964);var a=n(37278),o=(n(13832),n(71135));n(61577),n(67366);var i=n(60305),r=n(47445);n(67322)},64295:(e,t,n)=>{n(2942),n(67322)},67322:(e,t,n)=>{n(67697),n(99964),n(81793)},47445:(e,t,n)=>{n.d(t,{p:()=>k});var s=n(44557),a=n(53719),o=n(2633),i=n(35754),r=n(92431),l=n(94654),c=n(44644),d=n(67697),u=n(35841),h=n(71135),m=n(15841),p=n(99964),g=n(84013),_=n(35485),v=n(9049),f=n(81793),x=n(92792);const I={onboarding_first_met:"onboarding_first_met_sug",onboarding_welcome_back:"onboarding_welcome_back_sug"},b=e=>{const{blob:t,type:n,from:s,store:a,botId:o,localKey:i,localMessageId:r}=e;var l;if(i)return{localKey:i,key:(null===(l=a.preprocessTaskMap[i])||void 0===l?void 0:l.key)||""};{const e=a.preprocessFile(t,n,{moduleActionId:"",conversationId:"",chatType:"other_default",skillType:0,skillId:"",uploadFrom:"upload_pinbutton",botId:o,from:s,uploadCollectionWay:"single",uploadId:r,uploadWay:"browse folder"},{preHandle:{version:"pre_handle"}});return{localKey:e.local_key,key:e.key}}},A={parseTextPayload:(e,t,n)=>({content_type:u.cM.Text,contentObj:{text:e.text.trim()},isReady:!0,localCreateExt:(0,s.A)((0,s.A)({},e.extraExt),{},{source:n})}),parseImagePayload:(e,t,n,a,o)=>{const i=[];let r,l=!1;if("image_key"in e)i.push({key:e.image_key,image_ori:e.image_ori,image_thumb:e.image_thumb}),l=!0;else{const{localKey:s,key:a}=b({type:"image",blob:e.image,localKey:e.local_key,botId:n,store:t,from:e.from,localMessageId:o});i.push({key:a}),r={preprocess_key:s},l=Boolean(a)}return{content_type:u.cM.Image,contentObj:{image_list:i},isReady:l,localContent:r,localCreateExt:(0,s.A)((0,s.A)({},e.extraExt),{},{source:a})}},parseFilePayload:(e,t,n,a,o)=>{const i=[];let r,l=!1;if("file_key"in e)i.push({file_name:e.file_name,key:e.file_key}),l=!0;else{const{localKey:s,key:a}=b({type:"file",blob:e.file,localKey:e.local_key,botId:n,store:t,from:e.from,localMessageId:o});i.push({file_name:(0,c.p_C)("name")(e.file),key:a||""}),r={preprocess_key:s},l=Boolean(a)}return{content_type:u.cM.File,contentObj:{file_list:i},isReady:l,localContent:r,localCreateExt:(0,s.A)((0,s.A)({},e.extraExt),{},{source:a})}},parseCompositePayload:(e,t,n,a,o)=>{let i,r=!0;const l=e=>{const s=[];return e.forEach(((e,a)=>{if("key"in e)s.push(e);else{const{localKey:l,key:d}=b({type:"file",blob:e.blob,localKey:e.local_key,botId:n,store:t,from:e.from,localMessageId:o});s.push({file_name:(0,c.p_C)("name")(e.blob),key:d||""}),0===a&&(i={preprocess_key:l}),r&&(r=Boolean(d))}})),s};return{contentObj:(0,h.fr)(e)?{text:e.compositeContent.text,image_model:{image_list:l(e.compositeContent.images)}}:(0,h.kk)(e)?{text:e.compositeContent.text,file_model:{file_list:l(e.compositeContent.files)}}:(0,h.YV)(e)?{text:e.compositeContent.text,link_model:{url:e.compositeContent.links[0]}}:{},content_type:u.cM.Composite,isReady:r,localContent:i,localCreateExt:(0,s.A)((0,s.A)({},e.extraExt),{},{source:a})}},parseNestedPayload:(e,t)=>{const{nestedItems:n,text:a}=e,o=n.reduce(((e,t)=>(0,h.$g)(t)?[...e,{entity_type:t.type,entity_content:{file:{file_name:t.fileName,key:t.fileKey,size:t.size}},identifier:t.identifier,file_parse_state:t.parseState,file_name_state:t.reviewState}]:e),[]);return 0===o.length?{content_type:u.cM.Text,contentObj:{text:a.trim()},isReady:!0,localCreateExt:(0,s.A)((0,s.A)({},e.extraExt),{},{source:t})}:{content_type:u.cM.Nested,contentObj:{text:a.trim(),entities:o},isReady:!0,localCreateExt:(0,s.A)((0,s.A)({},e.extraExt),{},{source:t})}},parseCopySendPayload:(e,t,n)=>{if(!e.copySend)return;const{messageLink:a}=e.copySend,o=a?(0,g.Tc)(n,a,t):void 0;return(0,p.xYz)(o)?y.parseNestedMessage(o,(0,s.A)({},e.extraExt)):{content_type:null==o?void 0:o.content_type,contentObj:null==o?void 0:o.contentObj,localContent:null==o?void 0:o.localContent,isReady:!0,localCreateExt:(0,s.A)({},e.extraExt)}},parseSinglePayload:(e,t,n,s,a,o)=>(0,h.Bu)(e)?A.parseNestedPayload(e,a):"text"in e?A.parseTextPayload(e,t,a):"image"in e||"image_key"in e?A.parseImagePayload(e,t,n,a,o):"file"in e||"file_key"in e?A.parseFilePayload(e,t,n,a,o):(0,h.Fh)(e)?A.parseCompositePayload(e,t,n,a,o):"copySend"in e&&e.copySend?A.parseCopySendPayload(e,t,s):void 0},y={parseTextMessage:(e,t,n)=>({content_type:u.cM.Text,isReady:!0,contentObj:{text:(0,p.P5b)(e)},localCreateExt:(0,s.A)({},n)}),parseImageMessage:(e,t,n)=>{var a,o;const i=e.contentObj.image_list[0].key||(null===(a=t.preprocessTaskMap[(null==e||null===(o=e.localContent)||void 0===o?void 0:o.preprocess_key)||""])||void 0===a?void 0:a.key);return{content_type:u.cM.Image,isReady:Boolean(i),contentObj:{image_list:[{key:i}]},localContent:e.localContent,localCreateExt:(0,s.A)({},n)}},parseFileMessage:(e,t,n)=>{var a,o,i;const r=e.contentObj.file_list[0].key||(null===(a=t.preprocessTaskMap[(null==e||null===(o=e.localContent)||void 0===o?void 0:o.preprocess_key)||""])||void 0===a?void 0:a.key);return{content_type:u.cM.File,isReady:Boolean(r),contentObj:{file_list:[{key:r,file_name:null===(i=e.contentObj.file_list)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.file_name}]},localContent:e.localContent,localCreateExt:(0,s.A)({},n)}},parseCompositeMessage:(e,t,n)=>{var a,o,i,r,l,d;if((0,p.U9e)(e))return{content_type:u.cM.Composite,contentObj:{text:(null===(l=e.contentObj.text)||void 0===l?void 0:l.trim())||"",link_model:{url:(null===(d=e.contentObj.link_model)||void 0===d?void 0:d.url)||""}},isReady:!0,localCreateExt:(0,s.A)({},n)};const h=(0,p.zlu)(e),m=(0,p.aXB)(e),g=h?null===(a=e.contentObj.image_model)||void 0===a?void 0:a.image_list:m?null===(o=e.contentObj.file_model)||void 0===o?void 0:o.file_list:void 0;var _;if(null==g||!g[0])return{content_type:u.cM.Text,contentObj:{text:(null===(_=e.contentObj.text)||void 0===_?void 0:_.trim())||""},isReady:!0,localCreateExt:(0,s.A)({},n)};const v=g.map((({key:n})=>{var s,a;return n||(null===(s=t.preprocessTaskMap[(null==e||null===(a=e.localContent)||void 0===a?void 0:a.preprocess_key)||""])||void 0===s?void 0:s.key)}));return{contentObj:h?{text:(null===(i=e.contentObj.text)||void 0===i?void 0:i.trim())||"",image_model:{image_list:v.map((e=>({key:e})))}}:m?{text:(null===(r=e.contentObj.text)||void 0===r?void 0:r.trim())||"",file_model:{file_list:g.map(((e,t)=>({file_name:(0,c.p_C)("file_name")(e),key:v[t]||""})))}}:{},content_type:u.cM.Composite,isReady:v.every((e=>!!e)),localContent:e.localContent,localCreateExt:(0,s.A)({},n)}},parseNestedMessage:(e,t)=>{const n=(0,r.A)(e.contentObj);return n.entities.forEach((e=>{delete e.file_name_state,delete e.file_parse_state})),{content_type:u.cM.Nested,contentObj:n,isReady:!0,localCreateExt:(0,s.A)({},t)}},parseSingleMessage:(e,t,n)=>{const o=(0,s.A)({source:n},(0,a.A)(null==e?void 0:e.ext,["msg_template_id","collection_id","input_skill","need_create_thread","ugc_plugin_auth_infos","reference_content","immersive_reading_files","pdf_hover_position","samantha_context"]));return(0,p.pu_)(e)&&(0,p.P5b)(e)?y.parseTextMessage(e,t,o):(0,p.Jij)(e)?y.parseImageMessage(e,t,o):(0,p.Bvk)(e)?y.parseCompositeMessage(e,t,o):(0,p.xYz)(e)?y.parseNestedMessage(e,o):(0,p.mlu)(e)?y.parseFileMessage(e,t,o):void 0}},j=(e,t,n,s)=>{var a,i;let r=I[e.scene]||e.scene;const l=e.ctx.botId||(0,_.Qo)(e.ctx.conversationId)||"",u=A.parseSinglePayload(e,n,l,t,r,s);if(u)return[u];const{replace:h,resume:m,remove:v,regenerate:f,resend:x,newChat:b}=e,j=null!==(a=null===(i=h||m||v||x||b)||void 0===i?void 0:i.messageLink)&&void 0!==a?a:f?{messageId:f.sentMessageId,isLocalMessage:!1,regen_head:f.regenerateHeadMessageId}:void 0,w=(null==b?void 0:b.conversationId)||t,S=j?(0,g.Tc)(w,j,n):void 0,k=f?((e,t)=>{var n;if(!e)return[];const s=null==e||null===(n=e.ext)||void 0===n?void 0:n.collection_id;if(!s)return[e];const a=p.ozw.getState(),o=a.messageLinkMap[t],i=a.messageMap[t];return o.filter((e=>{var t;return(0,p.c84)(i[e.messageId],a.userInfo.secUserId)&&(null===(t=i[e.messageId])||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.collection_id)===s})).map((e=>(0,g.Tc)(t,e,a))).filter(c.q3w)})(S,w):[S].filter(c.q3w),M=k.map((t=>{var s;const a=(null==t||null===(s=t.ext)||void 0===s?void 0:s.source)||e.scene;r=f||h&&"edit"!==e.scene||x?a:e.scene;const o=y.parseSingleMessage(t,n,r);var i,l,c,d;m&&null!=o&&o.localCreateExt&&(o.localCreateExt.ugc_plugin_auth_infos=null!==(i=null===(l=e.extraExt)||void 0===l?void 0:l.ugc_plugin_auth_infos)&&void 0!==i?i:"");b&&null!=o&&o.localCreateExt&&(o.localCreateExt.need_create_thread=null!==(c=null===(d=e.extraExt)||void 0===d?void 0:d.need_create_thread)&&void 0!==c?c:"");return o})).filter(c.q3w);if(!(0,o.A)(M))return M;throw d.vF.persist.warning("sendMsgUnsupportedTypeOrScene"),Error("Unsupported MessageType")},w=(e,t)=>{var n;const s=t.botId||(0,_.Qo)(t.conversationId)||"",a=f.gO.get("chatBotService"),o=null==a?void 0:a.getBot(s),i=null!==(n=t.conversationType)&&void 0!==n?n:(0,v.e)(t.conversationId),r=(0,_.CB)("",t.conversationId,o,i);let l=function(e){return e.Text="text",e.Picture="pic",e.File="file",e}({});const c={[u.cM.Text]:l.Text,[u.cM.Image]:l.Picture,[u.cM.File]:l.File};return{bot_id:s,chat_type:r,conversation_type:i,message_type:(d=e.content_type,d&&c[d]||l.Text)};var d},S=e=>{const t=p.ozw.getState(),{regenerate:n,replace:a,preGeneratedlocalMessageId:o}=e,i=o||(null==n?void 0:n.sentLocalMessageId)||(0,m.uV)(),r=(0,m.yz)(e),l=j(e,r,t,i);return a&&l.forEach((e=>{e.localCreateExt&&delete e.localCreateExt.collection_id})),l.map((t=>(0,s.A)((0,s.A)({},e),{},{resolved:(0,s.A)((0,s.A)({},t),{},{localMessageId:i,conversationId:r,isRegenerate:Boolean(n)},w(t,e.ctx))})))},k=e=>{if(e.length<=0)return;e.forEach((e=>{e.reportParams=(0,s.A)((0,s.A)((0,s.A)({},e.reportParams),(0,x.t)(e)),(0,x.Xv)(e))}));const t=(0,i.A)(e.map(S)).filter(c.q3w);if(0===t.length)return;if(1===t.length)return t;if(t.every((e=>{var t;return!(null===(t=e.resolved.localCreateExt)||void 0===t||!t.collection_id)})))return t;const n=(0,l.A)();return t.map((e=>(e.resolved.localCreateExt=(0,s.A)((0,s.A)({},e.resolved.localCreateExt),{},{collection_id:n}),e)))}},37278:(e,t,n)=>{n.d(t,{v:()=>M});var s=n(44557),a=n(20716),o=n(29581),i=n(81801),r=n(2814),l=n(15841),c=n(67697),d=n(99964),u=n(40257);var h=n(9012),m=n(44644),p=n(35841);const g=(e,t,n)=>{var s;const a=(0,l.$2)(n,e);if(!a)return"";const o=null===(s=n.find((({resolved:e})=>e.localMessageId===a)))||void 0===s?void 0:s.resolved;return o?o.content_type===p.cM.Image?(e=>JSON.stringify({image_list:[{key:e}]}))(t):o.content_type===p.cM.File?((e,t)=>(0,m.e4x)({src:"user-sent",file_list:[{key:e,file_name:(0,h.A)(t,"contentObj.file_list[0].file_name","")}]}))(t,o):"":""};var _=n(60483);var v=n(13832),f=n(92792);const x=(e,t,n,s)=>{const[a]=e,o=d.ozw.getState();if((0,d.hTZ)(a),t.isReady){var i,r,l;const{send_message:a}=o.getReportEvents(n.conversation_id||"",n.local_message_id||"");(0,f.eT)({isRegenerate:t.isRegenerate,immerUpdateMessage:e,newLocalMessageId:u.rR,conversationId:null!==(i=n.conversation_id)&&void 0!==i?i:"",replyId:t.isRegenerate?null!==(r=null==s?void 0:s.sentMessageId)&&void 0!==r?r:"":t.localMessageId,sectionId:n.section_id,timeout:null==n||null===(l=n.ext)||void 0===l?void 0:l.timeout,scene:String(null==a?void 0:a.getMeta().scene),localMessageStatus:d.FQ7.WaitingAck,createdFrom:"send-message",message:{ext:(0,f.Gm)(o)}}),(0,f.dk)({isRegenerate:t.isRegenerate,immerUpdateMessage:e,newLocalMessageId:u.rR,regenHead:null==s?void 0:s.regenerateHeadMessageId})}},I=(e,t,n,s)=>{t.updateMessageList({conversationId:e.conversationId,immerUpdate:(...t)=>{const[a]=t,{draftMessageLinks:o,draftLocalMessageMap:i}=a;i[e.localMessageId]=n;const r={isLocalMessage:!0,messageId:e.localMessageId};e.isRegenerate||o.push(r),x(t,e,n,s)}})},b=(e,t)=>{e.updateMessageList({conversationId:t.conversationId,immerUpdate:({draftLocalMessageMap:{[t.localMessageId]:e}})=>{null!=e&&e.local&&(e.local.failed=!0,e.local.status=d.FQ7.PreprocessFailed)}})},A=(e,t,n,s)=>{t?e.updateMessageList({conversationId:t.conversationId,immerUpdate:(...e)=>{const[a]=e,{draftLocalMessageMap:{[t.localMessageId]:o},draftMessageLinks:i}=a;null!=o&&o.local&&(o.local.failedExpired=Date.now()+u.hn,o.local.status=s?d.FQ7.SendingRegenerate:d.FQ7.Sending),o.content=n,o.create_time=Date.now();const r=i.findIndex((e=>e.messageId===t.localMessageId));~r&&r!==i.length-1&&i.push(...i.splice(r,1)),x(e,t,o,s)}}):console.error("\u4e0d\u7b26\u5408\u9884\u671f\u7684\u5206\u652f")};var y=n(89910),j=n(67366);const w=e=>!(null==e||!e.key),S=e=>!e||e.failed,k=e=>{const t=d.ozw.getState(),{sendingMessages:n,localMessages:s,payloads:a,sendMessageCallback:o,customSendWaitTimeout:i,protocolType:l}=e;r.B.emit("message.beforeSend",n),r.B.emit("message.willSend",n),(0,v.R)({messages:n,customSendWaitTimeout:i,protocolType:l}),s.forEach((e=>y.QO.logSendMessage(e))),a.some((({scene:e})=>"onboarding"===e))?y.QO.trackOnBoardingMessageSentEvent():(a.forEach(((e,t)=>y.QO.trackSendMessageEvent(e,s[t]))),n.forEach(((e,t)=>y.QO.trackSendMessageStartEvent(e,{skill_id:a[t].skill_id}))),a.forEach((e=>{y.QO.trackUploadParseStatus(t,e)})),null==o||o(n))},M=(e,{chatType:t,sendMessageCallback:n,customSendWaitTimeout:r,protocolType:h})=>{const v=d.ozw.getState(),f=e[0].resolved.conversationId||"",x=e.every((({resolved:e})=>e.isReady));if(e.some((({ctx:e,resolved:t})=>(0,l.Az)({ctx:e,resolved:t},o.pU.getState()))))return;(0,d.P7$)(d.ozw,f),e.forEach((({resend:e,replace:t,remove:n,resume:s,regenerate:a})=>{var o,i,r,l;if(null!=e&&null!==(o=e.messageLink)&&void 0!==o&&o.messageId)v.logicalDeleteMessage({conversationId:f,messageLink:null==e?void 0:e.messageLink});else if(null!=t&&null!==(i=t.messageLink)&&void 0!==i&&i.messageId){var c;v.logicalDeleteMessage({conversationId:f,messageLink:null==t?void 0:t.messageLink,deleteReply:!0}),(0,j.PF)(null==t||null===(c=t.messageLink)||void 0===c?void 0:c.messageId)}else if(null!=s&&null!==(r=s.messageLink)&&void 0!==r&&r.messageId){var d;v.logicalDeleteMessage({conversationId:f,messageLink:null==s?void 0:s.messageLink,deleteReply:!0}),(0,j.PF)(null==s||null===(d=s.messageLink)||void 0===d?void 0:d.messageId)}else if(null!=n&&null!==(l=n.messageLink)&&void 0!==l&&l.messageId){var u;v.logicalDeleteMessage({conversationId:f,messageLink:null==n?void 0:n.messageLink,deleteReply:!0}),v.updateMessageList({conversationId:f,immerUpdate:(e,t)=>t.resetMessageLink(n.messageLink.messageId)}),(0,j.PF)(null==n||null===(u=n.messageLink)||void 0===u?void 0:u.messageId)}else null!=a&&a.sentMessageId&&(0,j.PF)(null==a?void 0:a.sentMessageId)})),e.some((({resolved:e})=>e.isRegenerate))||(0,l.Qe)({store:v,conversationId:f}),v.clearSuggestMessage(f);const y=e.map((e=>(({ctx:e,replace:t,remove:n,regenerate:a,resume:o,content_source:i,resolved:r},l)=>{var c;return(0,s.A)((0,s.A)((0,s.A)((0,s.A)({local_conversation_id:e.localConversationId,bot_id:e.botId,conversation_id:e.conversationId,section_id:l.lastSectionIdMap[r.conversationId]||"",local_message_id:r.localMessageId,message_type:p.Go.Message,content_type:r.content_type,content:(0,m.e4x)(r.contentObj),create_time:Date.now()},t||n||o?{message_id:null===(c=t||n||o)||void 0===c||null===(c=c.messageLink)||void 0===c?void 0:c.messageId}:{}),a?{reply_id:a.sentMessageId,local_message_id:a.sentLocalMessageId}:{}),r.content_type===p.cM.Text?{content_source:(null==i?void 0:i.source)||_.Z.Other,template_id:null==i?void 0:i.templateId}:{}),{},{ext:r.localCreateExt})})(e,o.pU.getState()))),M=y.map(((n,a)=>(e=>{const{msgPayload:t,resolved:n,messageExt:a,regenerate:o,store:i,ctx:r,scene:h,reportEvents:m,chatType:p,sec_scene:g,use_skill:_,skill_name:v,skill_id:f,reportParams:x,is_ogf:I}=e,b=(0,s.A)({start_local_conversation_id:r.localConversationId,start_conversation_id:r.conversationId,start_bot_id:r.botId,start_local_message_id:n.localMessageId,ext:a,conversation_type:r.conversationType,content_type:n.content_type,content_source:t.content_source,enter_from:r.enterFrom,scene:h,sec_scene:g,use_skill:_,skill_name:v,skill_id:f,is_ogf:I,chat_type:p},x);return d.ozw.getState().mergeReportEvents(n.conversationId,n.localMessageId,(0,s.A)((0,s.A)({},m),{},{send_message:(0,c.XB)({eventName:"send_message",meta:b,once:!0})},_&&v?{[`${v}_message`]:(0,c.XB)({eventName:`${v}_message`,meta:b})}:{})),(0,d.xfl)({localMessageStatus:n.isReady?o?d.FQ7.SendingRegenerate:d.FQ7.Sending:d.FQ7.Preprocessing,message:(0,s.A)((0,s.A)({},t),{},{reply_id:o?"0":t.reply_id,contentObj:n.contentObj,sec_sender:u.tL}),failedExpired:(0,l.zO)(n.isReady,n.content_type),sendLoadingExpired:Date.now()+u.On,messageLinks:i.messageLinkMap[n.conversationId],isRegenerate:n.isRegenerate,prevMessageId:n.isRegenerate?null==o?void 0:o.regenerateTailMessageId:void 0,localContent:n.localContent,enterFrom:r.enterFrom})})({is_ogf:(0,i.h)(),msgPayload:n,resolved:e[a].resolved,messageExt:(0,l.aK)(e[a],v),regenerate:e[a].regenerate,store:v,ctx:e[a].ctx,reportEvents:e[a].reportEvents,chatType:t,scene:e[a].scene,sec_scene:e[a].sec_scene,use_skill:e[a].use_skill,skill_name:e[a].skill_name,skill_id:e[a].skill_id,reportParams:e[a].reportParams})));if(M.forEach(((t,n)=>{e[n].remove||I(e[n].resolved,v,t,e[n].regenerate)})),x)k({sendingMessages:y.map(((t,n)=>(0,s.A)((0,s.A)({},t),{},{ext:(0,l.aK)(e[n],v)}))),localMessages:M,payloads:e,sendMessageCallback:n,customSendWaitTimeout:r,protocolType:h});else{const t=e.map((({resolved:e})=>{var t;return(null===(t=e.localContent)||void 0===t?void 0:t.preprocess_key)||""})).filter((e=>!!e));t.forEach((t=>{const n=v.preprocessTaskMap[t],s=e.find((e=>{var n;return(null===(n=e.resolved.localContent)||void 0===n?void 0:n.preprocess_key)===t}));var a;null!=n&&n.failed&&s&&v.reUpload(t,null!==(a=s.ctx.botId)&&void 0!==a?a:"")}));const o=d.ozw.subscribe((e=>t.map((t=>e.preprocessTaskMap[t]))),(t=>{if(t.some(S))return e.forEach((({resolved:e})=>b(v,e))),void o();if(t.every(w)){const a=new Map(t.map((t=>[(0,l.$2)(e,t.local_key),g(t.local_key,t.key,e)])));a.forEach(((t,n)=>{const s=((e,t)=>t?e.find((e=>e.resolved.localMessageId===t)):void 0)(e,n);A(v,null==s?void 0:s.resolved,t,null==s?void 0:s.regenerate)}));const i=y.map(((t,n)=>(0,s.A)((0,s.A)({},t),{},{ext:(0,l.aK)(e[n],v)},a.has(t.local_message_id)?{content:a.get(t.local_message_id)}:{})));(0,d.P7$)(d.ozw,f),v.clearSuggestMessage(f),k({payloads:e,localMessages:M,sendingMessages:i,sendMessageCallback:n,customSendWaitTimeout:r,protocolType:h}),o()}}),{equalityFn:a.A})}}},71135:(e,t,n)=>{n.d(t,{$g:()=>u,Bu:()=>d,Fh:()=>i,JG:()=>a,QP:()=>o,YV:()=>c,fr:()=>r,kk:()=>l});var s=n(99964);const a=e=>"image"in e||"image_key"in e,o=e=>"file"in e||"file_key"in e,i=e=>"compositeContent"in e,r=e=>i(e)&&"images"in e.compositeContent&&!!e.compositeContent.images,l=e=>i(e)&&"files"in e.compositeContent&&!!e.compositeContent.files,c=e=>i(e)&&"links"in e.compositeContent&&!!e.compositeContent.links,d=e=>"nestedItems"in e,u=e=>e.type===s.WRI.File},60530:(e,t,n)=>{var s=n(2942),a=(n(44644),n(67697),n(52216));let o=function(e){return e[e.State_Unknown=0]="State_Unknown",e[e.ReviewState=1]="ReviewState",e[e.ParseState=2]="ParseState",e}({});o.State_Unknown,o.ReviewState,o.ParseState,a.hI.ParseState_Default,a.hI.ParseState_Success,a.hI.ParseState_Failed,a.hI.ParseState_Processing,a.Cp.ReviewState_Default,a.Cp.ReviewState_Access,a.Cp.ReviewState_NotCompliant,a.Cp.ReviewState_Processing;n(30025),n(99964),n(81793),n(92753);new s.A({concurrency:1})},92753:(e,t,n)=>{n.d(t,{PF:()=>a});n(13430),n(60530);var s=n(61577);const a=e=>{var t,n;null===(t=s.Pv.getHttpChunkAdapter())||void 0===t||t.abortMessage({replyId:e}),null===(n=s.Pv.getHttpAdapter())||void 0===n||n.abortMessage({replyId:e})}},67366:(e,t,n)=>{n.d(t,{PF:()=>s.PF});n(13430),n(60530);var s=n(92753)},44591:(e,t,n)=>{n.d(t,{tW:()=>a});n(53854);var s=n(30025);n(81793);function a(e,t){const{conversation_id:n,reply_id:a,message_id:o}=t;n&&a&&o&&(0,s.k)(e,{isLocalMessage:!1,messageId:a})}},52704:(e,t,n)=>{n.d(t,{_V:()=>i});var s=n(67697),a=n(44591),o=n(92882);const i=(e,t)=>!!(0,o.KU)(t)&&(s.vF.persist.warning({message:"illegal_prompt",meta:{message_id:t.message_id}}),(0,a.tW)(e,t),!0)},13430:(e,t,n)=>{n(79859),n(92792),n(63399),n(92882),n(53854),n(30025),n(61577);n(44644),n(81793),n(67697);n(89910),n(52704),n(95544),n(92753)},40611:(e,t,n)=>{n.d(t,{Dj:()=>c,Gm:()=>h,dk:()=>u,eT:()=>d});var s=n(44557),a=n(20177),o=n(67697),i=n(92882),r=n(53854),l=n(40257);function c(e,t){var n,s;return(null===(n=e.localInfo)||void 0===n?void 0:n.from)!==r.aU.HttpChunk&&(null===(s=t.localInfo)||void 0===s?void 0:s.from)===r.aU.HttpChunk}function d(e){var t;const{conversationType:n,isRegenerate:a,immerUpdateMessage:r,newLocalMessageId:c,conversationId:d,replyId:u,sectionId:h,scene:m,message:p={},timeout:g=0,regenHead:_,localMessageStatus:v,createdFrom:f}=e,[x]=r,I={conversation_id:d,message_id:u,is_regenerate:a,conversation_type:n,scene:m};"ack"===f&&x.draftLocalMessageMap[c]?x.draftMessageReportEventMap[c]=(0,s.A)((0,s.A)({},x.draftMessageReportEventMap[c]),{},{receive_message:(0,o.XB)({eventName:"receive_message",meta:I})}):(x.draftLocalMessageMap[c]=(0,i.xf)({prevMessageId:a?null===(t=(0,i.WZ)(x.draftMessageLinks,(e=>e.regen_head===_&&!e.isLocalMessage)))||void 0===t?void 0:t.messageId:u,localMessageStatus:v,message:(0,s.A)((0,s.A)({},p),{},{conversation_id:d,section_id:h,local_message_id:c,reply_id:u}),failedExpired:Date.now()+(1e3*Number(g)||l.dc),messageLinks:x.draftMessageLinks,isRegenerate:a}),"send-message"!==f&&"replace_temporary_message"!==f&&(x.draftMessageReportEventMap[c]=(0,s.A)((0,s.A)({},x.draftMessageReportEventMap[c]),Object.fromEntries(["receive_message","receive_message_package","receive_total_messages"].map((e=>[e,(0,o.XB)({eventName:e,meta:I})]))))))}function u(e){const{isRegenerate:t,immerUpdateMessage:n,newLocalMessageId:o,regenHead:i,messageKey:r}=e,[l]=n,c=(0,a.A)(l.draftMessageLinks,(e=>e.messageId===o));if(c)c.regen_head=i;else{const e=(0,s.A)({isLocalMessage:!0,messageId:o},r?{messageKey:r}:{});t&&(e.regen_head=i),l.draftMessageLinks.push(e)}}const h=(e,t)=>{var n;return(null===(n=e.userOgfQuota)||void 0===n?void 0:n.nextMessageUseOgf)?(0,s.A)((0,s.A)({},t),{},{llm_model_type:"2"}):t}},92792:(e,t,n)=>{n.d(t,{BX:()=>s.B,Dj:()=>a.Dj,Gm:()=>a.Gm,Xv:()=>o.Xv,dk:()=>a.dk,eT:()=>a.eT,t:()=>o.t});var s=n(54767),a=n(40611),o=n(89910)},84013:(e,t,n)=>{n.d(t,{Tc:()=>s.Tc,WP:()=>s.WP,hy:()=>a.h,to:()=>s.to});var s=n(21006),a=n(81801)},21006:(e,t,n)=>{n.d(t,{Tc:()=>o,WP:()=>a,to:()=>i});var s=n(99964);const a=e=>{const t=s.ozw.getState(),n=t.messageLinkMap[e],a=(0,s.A4i)({localMessageMap:t.localMessageMap[e],messageMap:t.messageMap[e]}),o=(0,s.WZZ)(n,(e=>{const n=a(e);return!!n&&(0,s.$4u)(n)&&!!n.reply_id&&!(0,s.c84)(n,t.userInfo.secUserId)}));return o?a(o):void 0},o=(e,t,n=s.ozw.getState())=>(0,s.tP$)(n,e,t),i=e=>(0,s.bRb)(s.ozw.getState(),e)},27635:(e,t,n)=>{var s=n(99964),a=n(69853),o=n(44557),i=n(58367),r=(n(11855),n(84013)),l=n(37156),c=n(29581),d=n(40257);const u=(0,a.B)(((e,t)=>e.messageLinkMap[t]||[])),h=(0,a.B)(((e,t)=>e.messageListStatusMap[t]||{}));(0,a.B)(((e,t)=>{const n=h.raw(e,t),s=u.raw(e,t),a=h.raw(e,d.i9),o=u.raw(e,d.i9),r=(0,l.VN)(c.pU.getState(),t);return(null==r?void 0:r.conversation_type)===i.Cr.Coco&&0===s.length?{status:a,messageLinks:o,resolveConversationId:d.i9}:{status:n,messageLinks:s,resolveConversationId:t}})),(0,a.B)(((e,t)=>e.messageMap[t]||{})),(0,a.B)(((e,t)=>e.localMessageMap[t]||{})),(0,a.B)(((e,t,n)=>{var s;if(!n)return;return null===(s=(n.isLocalMessage?e.localMessageMap:e.messageMap)[t])||void 0===s?void 0:s[n.messageId]})),(0,a.B)(((e,t,n)=>{const a=(0,s.A4i)((0,s.tvN)(e,t)),o=[];for(const s of n){const e=a(s);e&&o.push(e)}return o})),(0,a.B)(((e,t,n)=>{var s;return n?null===(s=e.localMessageMap[t])||void 0===s?void 0:s[n]:void 0})),(0,a.B)(((e,t,n)=>{var a,i,r;const{regenerateMessageMap:{[t]:l},messageLinkMap:{[t]:c},messageMap:{[t]:d}}=e,u=(0,s.tP$)(e,t,n),h=(()=>{if(null!=u&&u.reply_id&&(0,s.oQq)(u))return(0,s.Jij)(u)?(0,s.rUA)({messageLinks:c,replyId:u.reply_id,getMessage:(0,s.A4i)({localMessageMap:e.localMessageMap[t],messageMap:e.messageMap[t]})}):n.regen_head?null==c?void 0:c.filter((e=>e.regen_head===n.regen_head||e.messageId===n.regen_head)).map((e=>(0,o.A)((0,o.A)({},e),{},{regen_head:e.regen_head||e.messageId}))):void 0})(),m=null===(a=[n,...null!=h?h:[]].map((e=>e.messageId in d?d[e.messageId]:null)).find((e=>null==e?void 0:e.reply_id)))||void 0===a?void 0:a.reply_id;return{activeRegenerateMessage:null!=h&&h.length?null==l||null===(i=l.messageMap)||void 0===i?void 0:i[n.messageId]:void 0,regenerateActiveIndex:null==h?void 0:h.findIndex((({messageId:e})=>e===n.messageId)),isRegenerateHead:Boolean(n.regen_head&&n.messageId),isRegenerateTail:Boolean(n.regen_head&&(null==h||null===(r=h[h.length-1])||void 0===r?void 0:r.messageId)===n.messageId),regenerateMessageLinks:h,replyFromMessage:m&&d[m]||void 0}})),(0,a.B)(((e,t,n)=>{const s=e.suggestMessageMap[t];return(null==s?void 0:s.replyId)===n?s:void 0})),(0,a.B)(((e,t)=>e.lastMessageMap[t])),(0,a.B)(((e,t)=>(e.messageLinkMap[t]||[]).filter((e=>e.isLocalMessage)).map((e=>(0,r.Tc)(null!=t?t:"",e))).some((e=>!(0,s.oSs)(e)))));n(67697);n(47519);n(81793)},11646:(e,t,n)=>{n.d(t,{A99:()=>s.A99,Azp:()=>a.Az,BuH:()=>a.Bu,JGj:()=>a.JG,QP5:()=>a.QP,Tww:()=>s.Tww,WRI:()=>s.WRI,YVR:()=>a.YV,c89:()=>a.c8,dz7:()=>s.dz7,frm:()=>a.fr,kkt:()=>a.kk,lTU:()=>s.lTU,mf0:()=>s.mf0,oSs:()=>s.oSs,ozw:()=>s.ozw,p8b:()=>a.p8,vmW:()=>a.vm});var s=n(99964),a=(n(67366),n(93207));n(84013),n(27635),n(29084),n(81793)},81793:(e,t,n)=>{n.d(t,{gO:()=>a});var s=n(22953);n(99964);const a=(0,s.p)()},99964:(e,t,n)=>{n.d(t,{$4u:()=>u.$4,A4i:()=>u.A4,A99:()=>u.A9,Bvk:()=>u.Bv,FQ7:()=>i.FQ,HN1:()=>u.HN,Jij:()=>u.Ji,P5b:()=>u.P5,P7$:()=>h.P,Tww:()=>g,U9e:()=>u.U9,WRI:()=>i.WR,WZZ:()=>u.WZ,aUK:()=>i.aU,aXB:()=>u.aX,bRb:()=>d.bR,c84:()=>u.c8,dz7:()=>u.dz,hTZ:()=>i.hT,kap:()=>i.k,lTU:()=>u.lT,mf0:()=>d.mf,mlu:()=>u.ml,oQq:()=>u.oQ,oSs:()=>u.oS,ozw:()=>p,pu_:()=>u.pu,rUA:()=>u.rU,tP$:()=>d.tP,tvN:()=>u.tv,xYz:()=>u.xY,xfl:()=>u.xf,zlu:()=>u.zl});var s=n(44557),a=n(34870),o=n(48465),i=n(67376),r=n(45498),l=n(28171),c=n(90862),d=n(95544),u=n(92882),h=(n(53854),n(81466));n(17411);const m=e=>{const{prefix:t,isEnableDebug:n,reduxDevToolsSnapshot:s}=e,l=(0,o.B)({prefix:t},c.p),d=(0,a.Zr)((0,a.eh)(i.EM),l);return n&&s?(0,r.vt)()((0,a.lt)(d,{name:`${t}chat-message-store`})):(0,r.vt)()(d)};const p=function e(...t){const{_useMessageStore:n}=e.prototype;if(n)return n(...t);throw Error("useMessageStore is not initialized")};function g(e){const{_useMessageStore:t}=p.prototype||{};if(!t){const t=m((0,s.A)({},e));Object.setPrototypeOf(p.prototype,t),Object.defineProperties(p,(0,s.A)({},Object.getOwnPropertyDescriptors(t))),p.prototype._useMessageStore=t}(0,l.Il)(e)}},67376:(e,t,n)=>{n.d(t,{Aj:()=>a.A,EM:()=>o.EM,FQ:()=>r.FQ,I6:()=>i.I,WR:()=>r.WR,aU:()=>r.aU,hT:()=>s.hT,k:()=>s.k});var s=n(30025),a=n(80882),o=n(8803),i=n(82300),r=n(17458);n(27463)},30025:(e,t,n)=>{n.d(t,{DA:()=>b,OU:()=>j,ZH:()=>S,hT:()=>C,h_:()=>M,iv:()=>A,k:()=>y,sK:()=>k});var s=n(14065),a=n(44557),o=n(72106),i=n(5099),r=n(37462),l=n(22290),c=n(85371),d=n(91689),u=n(76461),h=n(98502),m=n(67697),p=n(40257),g=n(31021),_=n(35841),v=n(69232),f=n(17458),x=n(92882),I=n(74792);const b=(0,a.A)((0,a.A)({messageMap:{},localMessageMap:{},messageLinkMap:{},messageListStatusMap:{},regenerateMessageMap:{},searchResultIsFinishedMap:{},messageReportEventMap:{},sendMessagePromiseTasks:{},lastMessageMap:{},socketStatus:{loading:!1,connected:!1},rateLimitConfig:{isLimited:!1,limitExpired:void 0,limitTips:""},userInfo:{secUserId:void 0},ttWidConfig:{}},{}),{},{musicAutoPlay:!1});function A({draftLocalMessageMap:e,draftMessageMap:t,draftMessageLinks:n},s){const{isLocalMessage:a,messageId:o}=s;return a?delete e[o]:delete t[o],(0,u.A)(n,(e=>e.messageId===o))}function y(e,t){const{isLocalMessage:n,messageId:s}=t,{draftLocalMessageMap:a,draftMessageMap:o}=e;n&&a[s]?a[s].status=_.q7.InVisible:o[s]&&(o[s].status=_.q7.InVisible)}function j(e,t,n=""){const s=(0,x.um)(p.sq);null==t||t.error({reason:n});const a=A(e,{isLocalMessage:!0,messageId:s});a>-1&&e.draftMessageLinks.splice(a,1)}const w=(e,t)=>{const n=(0,a.A)((0,a.A)({},e.ext?e.ext:{}),t.ext||{});return((0,x.Ji)(e)||(0,x.ml)(e))&&t.content?(0,x.H)((0,a.A)((0,a.A)((0,a.A)({},(0,i.A)(e,["local","local_message_id"])),(0,o.A)(t,c.A)),{},{ext:n})):(0,a.A)((0,a.A)((0,a.A)({},(0,i.A)(e,["local","local_message_id"])),(0,o.A)(t,c.A)),{},{ext:n})};function S({draft:e,localMessage:t,message:n,omitReportEventProperty:s=[]}){const{message_id:a}=n,{local_message_id:o}=t;a&&o?e.draftMessageReportEventMap[a]=(0,i.A)(e.draftMessageReportEventMap[o],s):m.vF.warning("skip moveReportEvents: invalid remote/local message")}function k({draft:e,localMessage:t,message:n,useRemoteMessageKey:s=!0,useOriginalMessageKey:a=!1}){const{message_id:o}=n,{local_message_id:i}=t;if(!o||!i)return void m.vF.warning("skip replaceLocalMessageWithRemoteMessage: invalid remote/local message");e.draftMessageMap[o]=w(t,n);const r=A(e,{isLocalMessage:!0,messageId:i});if(r>-1){var l,c;const t=e.draftMessageLinks[r],n=a?t.messageKey:i;return null===(l=e.draftMessageLinks.splice(r,1,{isLocalMessage:!1,messageId:o,messageKey:s?o:n,regen_head:null===(c=e.draftMessageLinks[r])||void 0===c?void 0:c.regen_head}))||void 0===l?void 0:l[0]}m.vF.persist.warning({message:"not found local message to replace",meta:{localMessageId:i}})}const M=(e,t)=>{return(0,a.A)((0,a.A)({},b),{},{fetchMessageList:(o=(0,s.A)((function*({conversationId:e,cursor:t,size:n}){if(t<=0||n<=0)m.vF.warning({message:"fetchUpdateMessageList: invalid cursor input",meta:{conversationId:e,cursor:t}});else try{const s=yield v.j.apiService.message.MessageList({conversation_id:e,cursor:t,batch_size:n}),{data:a}=s,o=((null==a?void 0:a.message_list)||[]).reverse().filter((e=>!!(0,x.oQ)(e)||!(0,x.Qk)(e))),i={from:f.aU.Api,logId:(0,g.n)(s)};return{messages:o.map((e=>(0,x.H)(e,i))),messageLinks:o.map((e=>({messageId:e.message_id||"",isLocalMessage:!1}))),regenerateList:((null==a?void 0:a.regen_list)||[]).reverse().map((e=>(0,x.H)(e,i)))}}catch(s){throw s instanceof Error&&m.vF.persist.error({message:"fetchUpdateMessageList failed",error:s}),s}})),function(e){return o.apply(this,arguments)}),fetchEnoughMessageList:(n=(0,s.A)((function*({conversationId:e,cursor:n,size:s}){const a=[];let o=0,i=n,r=!0;for(;r;){const n=yield t().fetchMessageList({conversationId:e,cursor:i,size:s});if(a.push(n),r=!1,!n)return;if(n.messages.length===s){const e=n.messages.filter(x.$4).length;o+=e,o<p.Rs&&(m.vF.persist.warning({message:"fetchEnoughMessageList: auto load more",meta:{fetchSize:n.messages.length,currentFetchAvailableMessageSize:e,fetchAvailableSize:o}}),i-=s,r=!0)}r&&a.length>=5&&(r=!1,m.vF.persist.warning({message:"fetchEnoughMessageList: break by maxTry",meta:{fetchAvailableSize:o}}))}return 1===a.length?a[0]:a.reduceRight(((e,t)=>(t&&(e.messageLinks=e.messageLinks.concat(t.messageLinks),e.messages=e.messages.concat(t.messages),e.regenerateList=e.regenerateList.concat(t.regenerateList)),e)),{messages:[],messageLinks:[],regenerateList:[]})})),function(e){return n.apply(this,arguments)}),logicalDeleteMessage:({conversationId:e,messageLink:n,deleteReply:s=!1})=>{t().createUpdateMessageList(e)((e=>{if(y(e,n),s){const t=(0,x.rU)({replyId:n.messageId,messageLinks:e.draftMessageLinks,getMessage:(0,x.A4)({localMessageMap:e.draftLocalMessageMap,messageMap:e.draftMessageMap})});null!=t&&t.length&&t.forEach((t=>y(e,t)))}}))},clearConversationMessages:t=>{e((0,h.jM)((e=>(0,x.zJ)(e,t))))},updateMessageList:({conversationId:t,immerUpdate:n})=>{e((0,h.jM)((e=>{e.messageMap[t]||(e.messageMap[t]={}),e.localMessageMap[t]||(e.localMessageMap[t]={}),e.messageReportEventMap[t]||(e.messageReportEventMap[t]={}),e.regenerateMessageMap[t]||(e.regenerateMessageMap[t]={messageMap:{}}),e.messageListStatusMap[t]||(e.messageListStatusMap[t]={hasMore:!1,lastCursor:0,loading:!1}),Array.isArray(e.messageLinkMap[t])||(e.messageLinkMap[t]=[]);const s=function(e,t){const{regenerateMessageMap:n,messageMap:s,messageLinkMap:o,messageListStatusMap:i}=t,r=t=>{Array.isArray(t)&&t.forEach((t=>{t.message_id&&(s[e][t.message_id]=t)}))},c=t=>{o[e]=t},u=(t,n)=>{var s,i,r;const l=null!==(s=null===(i=o[e])||void 0===i||null===(r=i.findIndex)||void 0===r?void 0:r.call(i,(e=>t===e.messageId)))&&void 0!==s?s:-1;if(~l){var c;const t=o[e][l];null===(c=o[e])||void 0===c||c.splice(l,1,(0,a.A)((0,a.A)({},t),n))}},h=t=>{if(!(0,d.A)(t)||null==t||!t.length)return;if(n[e]){var s,a;const o=Object.values(n[e].messageMap);(null===(s=t[0])||void 0===s?void 0:s.reply_id)!==(null===(a=o[0])||void 0===a?void 0:a.reply_id)&&(n[e]={messageMap:{}})}else n[e]={messageMap:{}};const i=(0,l.A)(o[e],"messageId");t.forEach(((t,s,a)=>{const{message_id:o}=t;var r;o&&(n[e].messageMap[o]=t,i[o]&&(i[o].regen_head=null===(r=a[0])||void 0===r?void 0:r.message_id))}))},m=t=>{i[e]=t};return{overrideMessages:r,overrideMessageLinks:c,overrideRegenerateMessagesAndUpdateLink:h,resetMessageLink:u,setMessageStatus:m}}(t,e);n({draftMessageMap:e.messageMap[t],draftLocalMessageMap:e.localMessageMap[t],draftMessageLinks:e.messageLinkMap[t],draftMessageListStatus:e.messageListStatusMap[t],draftRegenerateMessageMap:e.regenerateMessageMap[t],draftMessageReportEventMap:e.messageReportEventMap[t]},s),I.E.set(t,t)})))},createUpdateMessageList:e=>n=>t().updateMessageList({conversationId:e,immerUpdate:n}),getSearchResultStatus:e=>t().searchResultIsFinishedMap[e],updateSearchResultStatus(t,n){e((0,h.jM)((e=>{e.searchResultIsFinishedMap[t]=n})))},getReportEvents(e,n){var s;return(null===(s=t().messageReportEventMap[e])||void 0===s?void 0:s[n])||{}},hasReportEvent(e,n,s){var a;return!(null===(a=t().messageReportEventMap[e])||void 0===a||null===(a=a[n])||void 0===a||!a[s])},setReportEvents(t,n,s){e((0,h.jM)((e=>{e.messageReportEventMap[t]||(e.messageReportEventMap[t]={}),e.messageReportEventMap[t][n]=s})))},mergeReportEvents(t,n,s){e((0,h.jM)((e=>{e.messageReportEventMap[t]||(e.messageReportEventMap[t]={}),e.messageReportEventMap[t][n]=(0,a.A)((0,a.A)({},e.messageReportEventMap[t][n]),s)})))},hasSendMessageTask:e=>!!e.local_message_id&&!!t().sendMessagePromiseTasks[e.local_message_id],addSendMessageTask(t){const{local_message_id:n}=t;n&&e((0,h.jM)((e=>{e.sendMessagePromiseTasks[n]={local_message_id:n,finish:r.A,expired:Date.now()+p.hn}})))},isSendMessageExpired(e){var n;const s=e.local_message_id;if(!s)return!1;const a=null===(n=t().sendMessagePromiseTasks[s])||void 0===n?void 0:n.expired;return void 0!==a&&Date.now()-a>0},updateSendMessageTaskFinishFn(n,s){const a=n.local_message_id;if(!a)return;const o=()=>{s(),e((0,h.jM)((e=>{delete e.sendMessagePromiseTasks[a]})))};t().sendMessagePromiseTasks[a]&&e((0,h.jM)((e=>{e.sendMessagePromiseTasks[a].finish=o})))},finishSendMessageTask(e){var n;e&&(null===(n=t().sendMessagePromiseTasks[e])||void 0===n||n.finish())},setSocketStatus:t=>{e((()=>({socketStatus:t})))},updateRateLimitConfig:t=>e((()=>({rateLimitConfig:t}))),updateUserData:t=>{e((()=>({userInfo:t})))},updateTtWidConfig:t=>{e((()=>({ttWidConfig:t})))},updateCiciQuotaConfig:t=>{e((()=>({userOgfQuota:t})))},updateCiciOgfQuota:t=>{e((0,h.jM)((e=>{e.userOgfQuota.ogfQuota=t})))},updateCiciQuotaSwitchState:t=>{e((0,h.jM)((e=>{e.userOgfQuota.quotaSwitchConfig.value=t})))},updateCiciQuotaSwitchConfig:t=>{e((0,h.jM)((e=>{e.userOgfQuota.quotaSwitchConfig=t})))},updateCiciQuotaNextState:t=>{e((0,h.jM)((e=>{e.userOgfQuota.nextMessageUseOgf=t})))},updateOgfFeatureEnabled:t=>{e((0,h.jM)((e=>{e.userOgf&&(e.userOgf.featureEnabled=t)})))},updateOgfToggleValue:t=>{e((0,h.jM)((e=>{e.userOgf&&(e.userOgf.value=t)})))},setMusicAutoPlay:t=>{e((()=>({musicAutoPlay:t})))}});var n,o};function C(e,t){const n=e.draftLocalMessageMap[p.rR],s=null==n?void 0:n.reply_id;if(!(0,c.A)(t)&&!(0,c.A)(s)&&t!==s)return;const a=(0,u.A)(e.draftMessageLinks,(e=>e.messageId===p.rR));if(~a){const{messageId:t}=e.draftMessageLinks[a];return A(e,{isLocalMessage:!0,messageId:t}),e.draftMessageLinks.splice(a,1)}}},8803:(e,t,n)=>{n.d(t,{EM:()=>w});var s=n(14065),a=n(44557),o=n(1026),i=n(28167),r=n(51402),l=n(47686),c=n(85371),d=n(81163),u=n(67697),h=n(44644),m=n(69232),p=n(17458),g=n(82300),_=n(80882),v=n(30025),f=n(43545),x=n(92882),I=n(95544),b=n(40257),A=n(31021),y=n(98502);(0,a.A)((0,a.A)((0,a.A)((0,a.A)({},v.DA),_.A),g.I),f.U);function j(e,t,n){return e.filter((e=>{if(e.isLocalMessage){const s=t(e);if((null==s||!s.message_id)&&(null==s?void 0:s.sec_sender)===b.tL&&(0,x.cm)(s))return console.log(n(s.localContent)),n(s.localContent)}return!0}))}const w=(...e)=>{const[t,n]=e,w=function(){var e=(0,s.A)((function*({conversationId:e,messageCursor:t,messageIndex:s,range:a,isGuest:o}){var i;const r=b.Qn,l=null!==(i=yield n().fetchMergeMessageList({conversationId:e,cursor:s,size:r,range:a,checkMessageHole:!0,isGuest:o}))&&void 0!==i?i:[];return 0===l.length&&u.vF.persist.warning({message:"initMessageList empty",meta:{messageCursor:t,messageIndex:s}}),n().refreshSuggestMessage({conversationId:e}),l}));return function(t){return e.apply(this,arguments)}}();return(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},(0,g.M)(...e)),(0,v.h_)(...e)),(0,f.e)(...e)),(0,_.e)(...e)),{},{fetchMergeMessageList:(N=(0,s.A)((function*({conversationId:e,cursor:t,size:s,actionName:a="fetchMergeMessageList",range:o,checkMessageHole:i=!1,isGuest:r}){const l=n().createUpdateMessageList(e);if(s<=0)return void u.vF.persist.warning(`skip ${a}: invalid size`);const c={conversationId:e,cursor:t,size:s};try{const e=yield n().fetchEnoughMessageList(c);if(!e||!r&&e.messageLinks.length<0)return;return l(((t,r)=>{const{draftMessageLinks:l,draftMessageMap:d,draftLocalMessageMap:h}=t,m=(0,x.A4)({localMessageMap:h,messageMap:d});r.overrideMessages(e.messages);let p=(0,x.bM)(e.messageLinks,l,m);i&&(p=(0,x.TR)(p,m)),p=j(p,m,(({preprocess_key:e})=>Boolean(n().preprocessTaskMap[e]))),r.overrideMessageLinks(p);const g=o?(0,x.uT)({messageLinks:p,getMessage:m,range:o}):(0,x.Kj)({messageLinks:e.messageLinks,getMessage:m,size:s});r.setMessageStatus(g),r.overrideRegenerateMessagesAndUpdateLink(e.regenerateList),u.vF.info({message:`${a} finish`,meta:{messages:e.messages,status:g,requestPayload:c}})})),e.messageLinks}catch(d){throw d instanceof Error&&u.vF.persist.error({message:`${a} failed`,error:d,meta:{request:c}}),d}})),function(e){return N.apply(this,arguments)}),initMessageList:(E=(0,s.A)((function*(e){const{messageCursor:t,messageIndex:s,conversationId:o,isGuest:i}=e,r=n().createUpdateMessageList(o),l=n().messageLinkMap[o];Array.isArray(l)&&0!==l.length||r((({draftMessageListStatus:e})=>{e.loading=!0}));try{if(1!==t||0!==s)return s<=0||s<t?void u.vF.persist.warning({message:"skip initMessageList",meta:{messageCursor:t,messageIndex:s}}):yield w(e);for(let t=0;t<5;t++){const n=500*Math.pow(2,t);try{const t=yield w((0,a.A)((0,a.A)({},e),{},{messageCursor:1,messageIndex:1}));if(!(i||null!=t&&t.length))throw Error("Empty MessageList when invoke _initMessageList");return t}catch(c){if(4===t)throw c;yield(0,h.BKw)(n)}}}catch(c){u.vF.persist.error({eventName:"init_message_list_error",error:c})}finally{r((({draftMessageListStatus:e})=>{e.loading=!1}))}})),function(e){return E.apply(this,arguments)}),refreshSuggestMessage({conversationId:e}){const{lastAvailableMessage:t}=(0,I.bR)(n(),e);t&&n().updateSuggestMessageWithRemote(e,t)},loadMoreMessageList:(C=(0,s.A)((function*(e,t){const s=n().messageListStatusMap[e];if(!s||s.lastCursor<=0)return void u.vF.persist.warning("skip loadMoreMessageList: invalid status");const a=b.Qn,o=yield n().fetchMergeMessageList({conversationId:e,cursor:s.lastCursor-1,size:a,isGuest:t});return(0,c.A)(o)&&u.vF.persist.warning({message:"skip loadMoreMessageList: invalid api response",meta:{}}),o})),function(e,t){return C.apply(this,arguments)}),initOnboarding:({conversationId:e})=>{n().updateMessageList({conversationId:e,immerUpdate:t=>{const s=n().getReportEvents(e,b.sq);(0,v.OU)(t,s.receiving_onboarding,"cancel duplicated onboarding");const a=(0,x.um)(b.sq);t.draftLocalMessageMap[a]=(0,x.xf)({localMessageStatus:p.FQ.ReceivingFirstPackage,message:{conversation_id:e,local_message_id:a,reply_id:b.sq,ext:{onboarding:"1"}},failedExpired:Date.now()+b.Sy,messageLinks:t.draftMessageLinks,isRegenerate:!1}),t.draftMessageReportEventMap[a]={receiving_onboarding:(0,u.XB)({eventName:"receiving_onboarding",meta:{conversation_id:e,message_id:b.sq,is_regenerate:!1}})},t.draftMessageLinks.push({isLocalMessage:!0,messageId:a})}})},cancelOnboarding:({conversationId:e,reason:t})=>{n().updateMessageList({conversationId:e,immerUpdate:s=>{const a=n().getReportEvents(e,b.sq);(0,v.OU)(s,a.receiving_onboarding,t)}})},checkExistRemoteMessage:({conversationId:e,messageId:t})=>{const s=(0,x.A4)({localMessageMap:n().localMessageMap[e],messageMap:n().messageMap[e]}),a=n().messageLinkMap[e];return!!(0,x.ci)({messageLinks:a,replyId:t,getMessage:s})},fetchAssistantMessageListWithBotId:(M=(0,s.A)((function*({botId:e}){const t=n().createUpdateMessageList(b.i9),s=n().messageLinkMap[b.i9];Array.isArray(s)&&0!==s.length||t((({draftMessageListStatus:e})=>{e.loading=!0}));try{const s=yield m.j.apiService.message.MessageList({cursor:1e4,batch_size:b.Qn,bot_id:e,conversation_id:"0"}),{data:a}=s,o=((null==a?void 0:a.message_list)||[]).reverse().filter((e=>!!(0,x.oQ)(e)||!(0,x.Qk)(e))),i={from:p.aU.Api,logId:(0,A.n)(s)},r=o.map((e=>(0,x.H)(e,i))),l=o.map((e=>({messageId:e.message_id||"",isLocalMessage:!1}))),c=((null==a?void 0:a.regen_list)||[]).reverse().map((e=>(0,x.H)(e,i)));t(((e,t)=>{const{draftMessageLinks:s,draftMessageMap:a,draftLocalMessageMap:o}=e,i=(0,x.A4)({localMessageMap:o,messageMap:a});t.overrideMessages(r);let d=(0,x.bM)(l,s,i);d=(0,x.TR)(d,i),d=j(d,i,(({preprocess_key:e})=>Boolean(n().preprocessTaskMap[e]))),t.overrideMessageLinks(d);const u=(0,x.Kj)({messageLinks:l,getMessage:i,size:b.Qn});t.setMessageStatus(u),t.overrideRegenerateMessagesAndUpdateLink(c)}))}catch(a){t((({draftMessageListStatus:e})=>{e.loading=!1}))}})),function(e){return M.apply(this,arguments)}),fetchLastMessages:(k=(0,s.A)((function*({conversationIds:e,retryCount:t=2}){const{data:{message_map:s={},regen_map:a={},retry_list:c=null}={}}=yield m.j.apiService.message.LatestMessageList({request_list:e.map((e=>({conversation_id:e})))}),u=(0,d.A)(s,a,((e,t)=>(0,o.A)(e,t,(e=>e.message_id)))),h=(0,r.A)((0,l.A)(u),(e=>{const t=(0,i.A)(u[e],(e=>e.index)),n=t?(0,x.H)(t,{from:p.aU.Api}):null;return[e,n&&(0,x.$4)(n)?n:void 0]})),g=Object.fromEntries(h);if(null!=c&&c.length&&t>0){const e=yield n().fetchLastMessages({conversationIds:c.map(String),retryCount:t-1});Object.assign(g,e)}return g})),function(e){return k.apply(this,arguments)}),updateLastMessageMap:(S=(0,s.A)((function*({conversationIds:e}){const s=yield n().fetchLastMessages({conversationIds:e,retryCount:2});t((0,y.jM)((e=>{e.lastMessageMap=s})))})),function(e){return S.apply(this,arguments)})});var S,k,M,C,E,N}},27463:(e,t,n)=>{n.d(t,{N:()=>d});var s=n(14065),a=n(28159),o=n(33206),i=n(35841),r=n(69232),l=n(44644);const c=new Map,d=function(){var e=(0,s.A)((function*({info:e,task:t}){if(!t)return;const{file:n,preHandle:s,ctx:u,md5:h}=t;if(s&&u)if("pre_handle"===s.version)r.j.apiService.message.MessagePreHandle({content:JSON.stringify({file_list:[{file_name:(0,l.p_C)("name")(n),key:e.uploadResult.ImageUri||""}]}),content_type:i.cM.File});else if("pre_handle_v2"===s.version){const i={entity_type:"file"===t.type?o.ck.EntityType_File:o.ck.EntityType_Unknown,entity_content:{file:{file_name:(0,l.p_C)("name")(n),key:e.uploadResult.ImageUri||"",md5:h}},identifier:t.local_key};if(s.sectionId)r.j.apiService.message.MultiMessagePreHandle({conversation_id:u.conversationId,bot_id:u.botId,section_id:s.sectionId,local_message_id:s.preGeneratedlocalMessageId,uplink_entity:i});else try{const n=c.get(s.preGeneratedlocalMessageId),o=yield r.j.apiService.message.MultiMessagePreHandleWithoutConv({bot_id:u.botId,local_message_id:s.preGeneratedlocalMessageId,uplink_entity:i,pre_generate_id:n});if(!n){const i=c.get(s.preGeneratedlocalMessageId);if(i)n!==i?d({info:e,task:t}):console.error("[upload complete] MultiMessagePreHandleWithoutConv preGeneratedId duplicate.");else{var m;const e=null==o||null===(m=o.data)||void 0===m?void 0:m.pre_generate_id;e&&(0,a.A)(e)?c.set(s.preGeneratedlocalMessageId,e):console.error("[upload complete] MultiMessagePreHandleWithoutConv response no preGeneratedId ")}}}catch(p){console.error("[upload complete] [preHandleFile] error:",p)}}}));return function(t){return e.apply(this,arguments)}}()},17458:(e,t,n)=>{n.d(t,{FQ:()=>a,WR:()=>o,aU:()=>s});let s=function(e){return e.Api="Api",e.Socket="Socket",e.HttpChunk="HttpChunk",e.HttpLongPolling="HttpLongPolling",e}({}),a=function(e){return e.Preprocessing="preprocessing",e.PreprocessFailed="preprocessFailed",e.Sending="sending",e.WaitingAck="waitingAck",e.ReceivingFirstPackage="receivingFirstPackage",e.ReceivingStream="receivingStream",e.SendingRegenerate="sendingRegenerate",e.Timeout="timeout",e.StreamingTimeout="streamingTimeout",e.SentInLocalConversation="SentInLocalConversation",e.SentAndCreateConversationFailedInLocalConversation="SentAndCreateConversationFailedInLocalConversation",e.SafetyError="SafetyError",e}({}),o=function(e){return e[e.Unknown=0]="Unknown",e[e.File=1]="File",e}({})},95544:(e,t,n)=>{n.d(t,{bR:()=>s.bR,mf:()=>s.mf,qo:()=>s.qo,tP:()=>s.tP});var s=n(92395)},92395:(e,t,n)=>{n.d(t,{bR:()=>a,mf:()=>c,qo:()=>r,tP:()=>i});var s=n(92882);const a=(e,t)=>{const n=e.messageLinkMap[t]?o(e,t,e.messageLinkMap[t]):void 0;return{lastAvailableMessage:n?i(e,t,n):void 0,lastAvailableMessageLink:n}},o=(e,t,n)=>{for(let a=n.length-1;a>=0;a--){const o=n[a],r=n[a-1],l=i(e,t,o),c=i(e,t,r);if((0,s.i8)(l)&&(0,s.i8)(c))return(0,s.hd)(l)?r:o;if((0,s.$4)(l))return o}},i=(e,t,n)=>(0,s.A4)((0,s.tv)(e,t))(n),r=(e,t)=>{const{message:n}=l(e,t,e.messageLinkMap[t],(({messageLink:e})=>e.isLocalMessage&&!!e.messageId));return n&&(0,s.xX)(n)?n:void 0},l=(e,t,n,a)=>{const o=(0,s.A4)((0,s.tv)(e,t)),i=(0,s.WZ)(n||[],(e=>a({messageLink:e,getMessage:()=>o(e)})));return{messageLink:i,message:i?o(i):void 0}},c=(e,t)=>e.preprocessTaskMap[t].key},17411:(e,t,n)=>{var s=n(21511),a=n(76779),o=n(16350),i=n(45498),r=n(40257);(0,i.vt)()(((e,t)=>({scene:void 0,isSelectMode:!1,messageIndexList:[],preShareId:"",preMessageIndexList:[],enterSelectMode:({scene:n,data:s,conversationMessageIndex:o})=>{var i,r;t().isSelectMode&&n===t().scene||e({scene:n,isSelectMode:!0,messageIndexList:Number(o)>0?(0,a.A)(1,Number(o)+1):[],preShareId:null!==(i=null==s?void 0:s.share_id)&&void 0!==i?i:"",preMessageIndexList:2===(null==s?void 0:s.share_status)&&null!==(r=null==s?void 0:s.message_index_list)&&void 0!==r?r:[]})},exitSelectMode:()=>{t().isSelectMode&&e({scene:void 0,isSelectMode:!1,messageIndexList:[],preShareId:"",preMessageIndexList:[]})},toggleMessage:(n,a)=>{const i=t().messageIndexList,l=i.includes(n),[c,...d]=a;if(l)return!(n===c)&&d.filter((e=>i.includes(e))).length>1?void e({messageIndexList:(0,o.A)(i,n)}):void e({messageIndexList:(0,o.A)(i,...a)});i.length>=r.fV||(i.length+a.length>r.fV?e({messageIndexList:[...i,n].sort()}):e({messageIndexList:(0,s.A)([...i,...a]).sort()}))},selectAll:t=>{e({messageIndexList:(0,a.A)(1,t+1)})},deselectAll:()=>{e({messageIndexList:[]})},getIsSelectAllChecked:e=>t().messageIndexList.length>=e})))},11631:(e,t,n)=>{},53854:(e,t,n)=>{n.d(t,{FQ:()=>s.FQ,aU:()=>s.aU});var s=n(17458);n(11631)},26334:(e,t,n)=>{n.d(t,{A4:()=>l,Kj:()=>i,i0:()=>u,rJ:()=>d,tv:()=>r,uT:()=>o,um:()=>c});var s=n(28159),a=n(776);n(17458);const o=({messageLinks:e,getMessage:t,range:n})=>{var s;const a=Number(null===(s=t(e[0]))||void 0===s?void 0:s.index)||0;return{hasMore:a>n.start,lastCursor:a,loading:!1}},i=({messageLinks:e,getMessage:t,size:n})=>{if(Array.isArray(e)&&e.length>0){var s;const a=Number(null===(s=t(e[0]))||void 0===s?void 0:s.index)||0,o=e.length>=n;return{hasMore:a>1&&o,lastCursor:a,loading:!1}}return{hasMore:!1,lastCursor:0,loading:!1}},r=(e,t)=>({messageMap:e.messageMap[t],localMessageMap:e.localMessageMap[t],messageLinks:e.messageLinkMap[t],messageListStatus:e.messageListStatusMap[t]}),l=e=>t=>{var n,s;if(!t)return;const{isLocalMessage:a,messageId:o}=t;return a?null===(n=e.localMessageMap)||void 0===n?void 0:n[o]:null===(s=e.messageMap)||void 0===s?void 0:s[o]},c=e=>`replyTo${e}`,d=e=>e?(0,a.Ji)(e)?"pic":(0,a.ze)(e)?"video":(0,a.dz)(e)?"music":(0,a.ml)(e)?"file":(0,a._n)(e)?"search_card":(0,a.TQ)(e)?"lyrics_to_song_lyric":(0,a.lT)(e)||(0,a.A9)(e)?"lyrics_to_song_music":"text":"text",u=e=>{if(e&&(0,a.pu)(e)){const{text:t}=e.contentObj||{};return(0,s.A)(t)&&t.includes("coco://sendMessage")?1:0}return 0}},92882:(e,t,n)=>{n.d(t,{$4:()=>o.$4,A4:()=>a.A4,A9:()=>o.A9,Bv:()=>o.Bv,ET:()=>o.ET,Et:()=>o.Et,H:()=>r.H,HN:()=>o.HN,Ji:()=>o.Ji,KU:()=>o.KU,Kj:()=>a.Kj,M5:()=>o.M5,P5:()=>l.P5,Qk:()=>o.Qk,RR:()=>o.RR,TR:()=>c.T,U9:()=>o.U9,WZ:()=>s.WZ,Wi:()=>o.Wi,Wp:()=>o.Wp,Ys:()=>o.Ys,aX:()=>o.aX,bM:()=>i.b,c8:()=>o.c8,ci:()=>s.ci,cm:()=>o.cm,dz:()=>o.dz,e1:()=>o.e1,hd:()=>o.hd,i0:()=>a.i0,i8:()=>o.i8,lT:()=>o.lT,ln:()=>o.ln,ml:()=>o.ml,nt:()=>o.nt,oQ:()=>o.oQ,oS:()=>o.oS,pu:()=>o.pu,rJ:()=>a.rJ,rU:()=>s.rU,tv:()=>a.tv,uT:()=>a.uT,um:()=>a.um,w5:()=>o.w5,wt:()=>o.wt,xX:()=>o.xX,xY:()=>o.xY,xf:()=>r.x,zJ:()=>d.z,zl:()=>o.zl});var s=n(41987),a=n(26334),o=n(776),i=n(78094),r=n(47181),l=(n(33256),n(19767)),c=n(32168),d=(n(63399),n(16083))},776:(e,t,n)=>{n.d(t,{$4:()=>f,A9:()=>R,Bv:()=>V,ET:()=>M,Et:()=>z,HN:()=>m,Ji:()=>O,KU:()=>K,M5:()=>p,Qk:()=>S,RR:()=>j,TQ:()=>P,U9:()=>Q,Wi:()=>E,Wp:()=>_,Ys:()=>k,_n:()=>q,aX:()=>G,c8:()=>v,cm:()=>h,dz:()=>F,e1:()=>T,ey:()=>x,hd:()=>b,i8:()=>y,lT:()=>D,ln:()=>N,ml:()=>U,nt:()=>A,oQ:()=>w,oS:()=>g,pu:()=>H,w5:()=>B,wt:()=>u,xX:()=>d,xY:()=>Y,yU:()=>I,ze:()=>L,zl:()=>W});var s=n(28159),a=n(85371),o=n(9012),i=n(35841),r=n(64283),l=n(17458),c=n(40257);const d=e=>Boolean(e&&"local"in e),u=e=>{var t;return Boolean(null==e||null===(t=e.local)||void 0===t?void 0:t.hasBroken)},h=e=>d(e)&&[l.FQ.PreprocessFailed,l.FQ.Preprocessing].includes(e.local.status)&&Boolean(e.localContent),m=e=>{var t,n,s;return d(e)?e.local.failed||!(null==e||null===(t=e.ext)||void 0===t||!t.has_err)||!(null==e||null===(n=e.localInfo)||void 0===n||!n.errorCode):!(null==e||null===(s=e.ext)||void 0===s||!s.has_err)},p=e=>{var t;return"1"===(null==e||null===(t=e.ext)||void 0===t?void 0:t.stream)},g=e=>{return!(e=>!(!d(e)||!(E(e)||M(e)||C(e))))(e)&&(p(e)?"1"===(null==e||null===(t=e.ext)||void 0===t?void 0:t.is_finish):!x(e)&&(!d(e)||!T(e)));var t},_=e=>{var t,n,s;return!((null==e||null===(t=e.ext)||void 0===t||!t.has_suggest)&&(null==e||null===(n=e.ext)||void 0===n||!n.sp)||null!=e&&null!==(s=e.ext)&&void 0!==s&&s.browser_explain)},v=(e,t)=>{if(e&&d(e)&&e.local.isRegenerate)return!1;const{sec_sender:n}=e||{};return!!n&&(n===t||n===c.tL)},f=e=>!(0,a.A)(null==e?void 0:e.status)&&(null==e?void 0:e.status)!==i.q7.InVisible,x=e=>(null==e?void 0:e.message_type)===i.Go.Loading,I=e=>(null==e?void 0:e.content_type)===i.cM.Suggest,b=e=>A(e)&&(null==e?void 0:e.status)!==i.q7.Available,A=e=>{var t;return"1"===(null==e||null===(t=e.ext)||void 0===t?void 0:t.is_crowd_testing)&&H(e)},y=e=>A(e)&&f(e),j=e=>{var t,n;return!(null==e||!e.ext||null==e||null===(t=e.ext)||void 0===t||!t.onboarding||"0"===(null==e||null===(n=e.ext)||void 0===n?void 0:n.onboarding))},w=e=>{return d(e)?e.local.isRegenerate:"1"===(null===(t=e.ext)||void 0===t?void 0:t.regen);var t},S=e=>p(e)&&!g(e),k=e=>{const{status:t}=e.local;return t===l.FQ.ReceivingFirstPackage||t===l.FQ.ReceivingStream},M=e=>{const{status:t}=e.local;return t===l.FQ.SendingRegenerate},C=e=>{const{status:t}=e.local;return t===l.FQ.WaitingAck},E=e=>{const{status:t}=e.local;return t===l.FQ.ReceivingFirstPackage},N=e=>{const{status:t}=e.local;return t===l.FQ.ReceivingStream},T=e=>{const{status:t}=e.local;return t===l.FQ.Sending},L=e=>{var t;return(null==e?void 0:e.content_type)===i.cM.Video&&Array.isArray(null==e||null===(t=e.contentObj)||void 0===t?void 0:t.video_list)},P=e=>(null==e?void 0:e.content_type)===i.cM.LyricsToSongLyric,R=e=>(null==e?void 0:e.content_type)===i.cM.LyricsToSongsMusic,D=e=>(null==e?void 0:e.content_type)===i.cM.LyricsToSongMusic,F=e=>{var t;return(null==e?void 0:e.content_type)===i.cM.Music&&Array.isArray(null==e||null===(t=e.contentObj)||void 0===t?void 0:t.music_list)},B=e=>{var t;return!(null==e||null===(t=e.localInfo)||void 0===t||!t.finishReply)},O=e=>{var t;return(null==e?void 0:e.content_type)===i.cM.Image&&Array.isArray(null==e||null===(t=e.contentObj)||void 0===t?void 0:t.image_list)},U=e=>{var t;return(null==e?void 0:e.content_type)===i.cM.File&&Array.isArray(null==e||null===(t=e.contentObj)||void 0===t?void 0:t.file_list)},q=e=>(null==e?void 0:e.content_type)===i.cM.PluginSearchResult;const H=e=>(null==e?void 0:e.content_type)===i.cM.Text,z=e=>(null==e?void 0:e.content_type)===i.cM.PluginSearchResult;function K(e){var t;return(null===(t=e.ext)||void 0===t?void 0:t.has_err)===String(r.t.CLEAR_LAST_PROMPT)}function V(e){return(null==e?void 0:e.content_type)===i.cM.Composite}function W(e){return V(e)&&Array.isArray((0,o.A)(e,["contentObj","image_model","image_list"]))}function G(e){return V(e)&&Array.isArray((0,o.A)(e,["contentObj","file_model","file_list"]))}function Q(e){return V(e)&&(0,s.A)((0,o.A)(e,["contentObj","link_model","url"]))}function Y(e){return!!e&&e.content_type===i.cM.Nested}},33256:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(10120),a=n(776);function o(e,t){return(Number(null==e?void 0:e.index)||0)-(Number(null==t?void 0:t.index)||0)}const i=(e,t)=>{e.sort(((e,n)=>{if(!e.isLocalMessage&&!n.isLocalMessage)return o(t(e),t(n));if(e.isLocalMessage&&n.isLocalMessage)return i=t(e),r=t(n),((0,s.Q)(Number(null==i?void 0:i.create_time))||0)-((0,s.Q)(Number(null==r?void 0:r.create_time))||0);var i,r;if(e.isLocalMessage&&!n.isLocalMessage||!e.isLocalMessage&&n.isLocalMessage){const s=e.isLocalMessage&&!n.isLocalMessage,i=n.isLocalMessage&&!e.isLocalMessage,r=t(s?e:n),l=t(i?e:n);if(r&&"index"in r)return o(r,l);const c=r&&(0,a.xX)(r)&&r.local.prevRemoteMessageId?t({messageId:r.local.prevRemoteMessageId,isLocalMessage:!1}):void 0;return c===l?s?1:-1:s?o(c,l):o(l,c)}return 0}))}},19767:(e,t,n)=>{n.d(t,{P5:()=>i});var s=n(28159),a=n(2633),o=n(776);const i=(e,t,n)=>{if(!e)return;const i=(e=>{if(e&&(0,o.pu)(e)){var t,n;if((0,s.A)(null==e||null===(t=e.contentObj)||void 0===t?void 0:t.text))return null==e||null===(n=e.contentObj)||void 0===n?void 0:n.text;if((0,s.A)(e.tts_content)&&e.tts_content&&!(0,o.RR)(e))return e.tts_content}})(e);return(0,s.A)(i)?i:(0,o.HN)(e)||(0,o.Ji)(e)?void 0:t?(0,a.A)(null==e?void 0:e.contentObj)?`${n} message.content\uff1a${null==e?void 0:e.content}`:`${n} message.content\uff1a\n\n\`\`\`json\n${JSON.stringify(null==e?void 0:e.contentObj,void 0,2)}\n\`\`\`\n\n`:n}},29084:(e,t,n)=>{n.d(t,{EO:()=>s.E});var s=n(21711);n(75741),n(99964),n(67697)},65007:(e,t,n)=>{n(10633);var s=n(60588);n(72077),n(79223),n(44509),n(33379),n(40316);s.A},32894:(e,t,n)=>{n(44557),n(10633),n(53719),n(37462);var s=n(60588);n(67697),n(44644),n(64080),n(69232),n(35841),n(3896),n(44509),n(40257),n(31021),n(21328),n(40316);s.A},54446:(e,t,n)=>{n.d(t,{Pv:()=>s.P});n(79223),n(65007),n(32894),n(15681);var s=n(44509)},15681:(e,t,n)=>{n(44557),n(10633);var s=n(60588);n(44644),n(64080),n(21328),n(44509),n(40316);s.A},61577:(e,t,n)=>{n.d(t,{Pv:()=>a.Pv,QV:()=>s.QV,up:()=>o.up,y7:()=>i.y7});var s=n(38633),a=n(54446),o=n(91743),i=(n(77749),n(33379))},91743:(e,t,n)=>{n.d(t,{up:()=>s.up});var s=n(72083);n(73492),n(98116)},46931:(e,t,n)=>{n.d(t,{YK:()=>s});let s=function(e){return e[e.User=0]="User",e[e.Coco=1]="Coco",e[e.GuanFang=2]="GuanFang",e[e.CocoWeb=3]="CocoWeb",e}({})},1066:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(10633);class a{constructor(e){(0,s.A)(this,"request",(()=>{throw new Error("DataReportService.request is undefined")})),(0,s.A)(this,"baseURL",""),this.request=(null==e?void 0:e.request)||this.request,this.baseURL=(null==e?void 0:e.baseURL)||""}genBaseURL(e){return"string"==typeof this.baseURL?this.baseURL+e:this.baseURL(e)}FetchMsgList(e,t){const n=this.genBaseURL("/alice_op/msg/fetch_message_ids"),s=e||{},a={start_time:s.start_time,end_time:s.end_time,content:s.content,user_id:s.user_id,message_id:s.message_id,device_id:s.device_id,page_index:s.page_index,page_size:s.page_size};return this.request({url:n,method:"POST",data:a},t)}FetchChainEventList(e,t){const n=this.genBaseURL("/alice_op/msg/fetch_chain_events"),s=e||{},a={start_time:s.start_time,end_time:s.end_time,message_id:s.message_id,offset:s.offset,limit:s.limit};return this.request({url:n,method:"POST",data:a},t)}FetchAliceChainEventList(e,t){const n=this.genBaseURL("/alice/msg/fetch_chain_events"),s=e||{},a={start_time:s.start_time,end_time:s.end_time,message_id:s.message_id,offset:s.offset,limit:s.limit};return this.request({url:n,method:"POST",data:a},t)}FetchAliceEventList(e,t){const n=this.genBaseURL("/alice/msg/fetch_events"),s=e||{},a={start_time:s.start_time,end_time:s.end_time,message_id:s.message_id,offset:s.offset,limit:s.limit};return this.request({url:n,method:"POST",data:a},t)}}},52216:(e,t,n)=>{n.d(t,{Cp:()=>a,hI:()=>s});let s=function(e){return e[e.ParseState_Default=0]="ParseState_Default",e[e.ParseState_Success=1]="ParseState_Success",e[e.ParseState_Failed=2]="ParseState_Failed",e[e.ParseState_Processing=3]="ParseState_Processing",e}({}),a=function(e){return e[e.ReviewState_Default=0]="ReviewState_Default",e[e.ReviewState_Access=1]="ReviewState_Access",e[e.ReviewState_NotCompliant=2]="ReviewState_NotCompliant",e[e.ReviewState_Processing=3]="ReviewState_Processing",e}({})},35841:(e,t,n)=>{n.d(t,{Go:()=>a,cM:()=>s,q7:()=>o});let s=function(e){return e[e.Text=1]="Text",e[e.Suggest=2]="Suggest",e[e.Music=3]="Music",e[e.WebView=4]="WebView",e[e.Video=5]="Video",e[e.Image=6]="Image",e[e.File=7]="File",e[e.PluginSearchResult=8]="PluginSearchResult",e[e.AwemeVideoList=9]="AwemeVideoList",e[e.Composite=10]="Composite",e[e.Biz=11]="Biz",e[e.Nested=20]="Nested",e[e.Card=50]="Card",e[e.BotCard=51]="BotCard",e[e.FormMsg=53]="FormMsg",e[e.CopilotCard=60]="CopilotCard",e[e.LyricsToSongMusic=70]="LyricsToSongMusic",e[e.LyricsToSongLyric=71]="LyricsToSongLyric",e[e.LyricsToSongsMusic=72]="LyricsToSongsMusic",e[e.PagesCard=80]="PagesCard",e[e.Outline=81]="Outline",e[e.Widget=100]="Widget",e[e.Unsupported=1e3]="Unsupported",e}({}),a=function(e){return e[e.Message=1]="Message",e[e.Ack=2]="Ack",e[e.Loading=3]="Loading",e}({}),o=function(e){return e[e.Available=1]="Available",e[e.InVisible=2]="InVisible",e[e.Broken=3]="Broken",e[e.Streaming=4]="Streaming",e[e.Unselected=5]="Unselected",e[e.NotCompliant=6]="NotCompliant",e}({})},53585:(e,t,n)=>{n.d(t,{K9:()=>s});let s=function(e){return e[e.Default=0]="Default",e[e.ReadAndSummarize=1]="ReadAndSummarize",e[e.WriteAssistant=2]="WriteAssistant",e[e.ImageGeneration=3]="ImageGeneration",e[e.Search=4]="Search",e[e.Translate=5]="Translate",e[e.ReadPDF=6]="ReadPDF",e[e.ReadWebsite=7]="ReadWebsite",e[e.DeepSearch=8]="DeepSearch",e[e.MusicAssistant=9]="MusicAssistant",e[e.AcademicSearch=10]="AcademicSearch",e}({})},64283:(e,t,n)=>{n.d(t,{t:()=>s});let s=function(e){return e[e.UNKNOWN_ERROR=1]="UNKNOWN_ERROR",e[e.SHARK_BLOCKED=710022002]="SHARK_BLOCKED",e[e.COUNTRY_RESTRICTED=710022017]="COUNTRY_RESTRICTED",e[e.CONTENT_UNAVAILABLE=710012005]="CONTENT_UNAVAILABLE",e[e.NOACCESS=710012e3]="NOACCESS",e[e.NO_PERMISSION=710020101]="NO_PERMISSION",e[e.BAD_REQUEST=710020201]="BAD_REQUEST",e[e.INVALID_PARAMS=710020202]="INVALID_PARAMS",e[e.USER_INVALID=710022e3]="USER_INVALID",e[e.SYSTEM_ERROR=710020702]="SYSTEM_ERROR",e[e.SYSTEM_ERROR2=710022001]="SYSTEM_ERROR2",e[e.NOT_LOGIN=710012001]="NOT_LOGIN",e[e.NO_INNER_SSO_TOKEN=710012006]="NO_INNER_SSO_TOKEN",e[e.LIMIT_TO_SEND_MESSAGE=710022004]="LIMIT_TO_SEND_MESSAGE",e[e.BOT_INVALID=710022005]="BOT_INVALID",e[e.BOT_BANNED=710022010]="BOT_BANNED",e[e.BOT_REVIEWING=710022011]="BOT_REVIEWING",e[e.CONVERSATION_INVALID=710022006]="CONVERSATION_INVALID",e[e.NEED_TO_WAIT=710012007]="NEED_TO_WAIT",e[e.CLEAR_LAST_PROMPT=710022008]="CLEAR_LAST_PROMPT",e[e.USER_BANNED=710012008]="USER_BANNED",e[e.USER_BAN_RELEASED=710012009]="USER_BAN_RELEASED",e[e.USER_BAN_APPEALING=710012011]="USER_BAN_APPEALING",e[e.USER_BAN_APPEAL_FAILED=710012010]="USER_BAN_APPEAL_FAILED",e[e.NETWORK_TIMEOUT=710010701]="NETWORK_TIMEOUT",e[e.MYSQL_ERROR=710020801]="MYSQL_ERROR",e[e.PARAMS_VALID_FAILED=710020203]="PARAMS_VALID_FAILED",e[e.REDIS_ERROR=710020803]="REDIS_ERROR",e[e.USER_NO_AUTH_USE_BOT=710012012]="USER_NO_AUTH_USE_BOT",e[e.USER_NOT_EXISTED=710012014]="USER_NOT_EXISTED",e[e.OPEN_AUTH_INVALID=710012020]="OPEN_AUTH_INVALID",e[e.IMAGE_SAFETY_ERROR=710025003]="IMAGE_SAFETY_ERROR",e[e.FILE_SAFETY_ERROR=710025004]="FILE_SAFETY_ERROR",e[e.CONVERSATION_MESSAGE_OVER_LIMIT=710018001]="CONVERSATION_MESSAGE_OVER_LIMIT",e[e.CONVERSATION_UNDER_REVIEW=710018002]="CONVERSATION_UNDER_REVIEW",e[e.CONVERSATION_SHARE_DELETED=710018003]="CONVERSATION_SHARE_DELETED",e[e.GUEST_REACH_LIMIT=710022013]="GUEST_REACH_LIMIT",e[e.GUEST_CONVERSATION_REACH_LIMIT=710022022]="GUEST_CONVERSATION_REACH_LIMIT",e[e.COLLECTION_DELETED=710027003]="COLLECTION_DELETED",e}({})},79731:(e,t,n)=>{n.d(t,{WZ:()=>l,by:()=>c});var s=n(44557),a=n(67697),o=n(64283),i=n(86167),r=n(61452);const l=e=>{const{responseBody:t={},responseHeaders:n,responseStatusCode:l,responseStatusText:c,requestConfig:d}=e,{code:u,msg:h}=t,m=(0,r._)(n);if(401===l)throw i.g.emit(i.P.UNAUTHORIZED),new a.hD({message:h,code:String(u),httpStatus:c||String(l),logId:m,response:t,requestConfig:d});if(200!==l)throw new a.hD({message:h,code:String(u),httpStatus:c||String(l),logId:m,response:t,requestConfig:d});if(200===l&&0!==u){switch(u){case o.t.NOACCESS:i.g.emit(i.P.NOACCESS,h,m);break;case o.t.SHARK_BLOCKED:i.g.emit(i.P.SHARK_BLOCK,h,m);break;case o.t.COUNTRY_RESTRICTED:i.g.emit(i.P.COUNTRY_RESTRICTED,h,m);break;case o.t.NOT_LOGIN:case o.t.NO_INNER_SSO_TOKEN:case o.t.OPEN_AUTH_INVALID:i.g.emit(i.P.UNAUTHORIZED,h,m);break;case o.t.NEED_TO_WAIT:i.g.emit(i.P.NEED_TO_WAIT,h,m);break;case o.t.USER_BANNED:i.g.emit(i.P.USER_BANNED,h,m);break;case o.t.USER_BAN_RELEASED:case o.t.USER_BAN_APPEALING:case o.t.USER_BAN_APPEAL_FAILED:i.g.emit(i.P.USER_BANNED_OTHER,h,m)}throw new a.hD({message:h,code:String(u),httpStatus:c||String(l),logId:m,response:t,requestConfig:d})}if(200===l)return(0,s.A)((0,s.A)({},t),{},{_meta:{logId:m}})},c=(e,t)=>{var n;const{headers:s,data:a}=null!==(n=e.response)&&void 0!==n?n:{},o=(0,r._)(s);return 401===t&&(i.g.emit(i.P.UNAUTHORIZED,null==a?void 0:a.msg,o),!0)}},50490:(e,t,n)=>{n.d(t,{a:()=>l});var s=n(44557),a=n(11855),o=n(44644),i=n(63159);const r=(0,a.createContext)(null),l=({containerRef:e,controller:t,children:n})=>{const{width:a,height:l}=(0,o.wYm)({ref:e});return(0,i.jsx)(r.Provider,{value:(0,s.A)({ref:e,width:a,height:l},t),children:n})}},80743:(e,t,n)=>{n.d(t,{BO:()=>a.B,Jz:()=>s.Jz,Vy:()=>s.Vy,gK:()=>s.gK,hD:()=>s.hD});var s=n(49059),a=(n(54795),n(36367))},67697:(e,t,n)=>{n.d(t,{BO:()=>a.BO,Jz:()=>a.Jz,XB:()=>s.XB,b:()=>o.b,gK:()=>a.gK,hD:()=>a.hD,vF:()=>o.v});var s=n(29730),a=n(80743),o=n(6415)},12437:(e,t,n)=>{n.d(t,{HXh:()=>Th,ebl:()=>Gc,nK3:()=>w_,sXP:()=>Sh});n(11855);var s=n(80157),a=n(20763),o=n(17652),i=n(32434),r=n(70061),l=n(27252),c=n(72414),d=n(27569),u=n(73694),h=n(21930),m=n(44397),p=n(76229),g=n(34814),_=n(39957),v=n(30107),f=n(69526),x=n(85890),I=n(29140),b=n(12071),A=n(20972),y=n(74995),j=n(10426),w=n(34400),S=n(62039),k=n(5485),M=n(95137),C=n(29214),E=n(63775),N=n(348),T=n(90192),L=n(47856),P=n(18369),R=n(84095),D=n(4899),F=n(60435),B=n(82876),O=n(18997),U=n(26124),q=n(73236),H=n(1049),z=n(78055),K=n(41808),V=n(69141),W=n(86185),G=n(87740),Q=n(59577),Y=n(2324),$=n(15750),X=n(60281),Z=n(91043),J=n(15621),ee=n(44165),te=n(74802),ne=n(70102),se=n(93023),ae=n(89596),oe=n(94395),ie=n(52208),re=n(40183),le=n(89888),ce=n(25749),de=n(23021),ue=n(34394),he=n(72589),me=n(31018),pe=n(80395),ge=n(54742),_e=n(54277),ve=n(91221),fe=n(94494),xe=n(93317),Ie=n(81600),be=n(76617),Ae=n(87287),ye=n(40466),je=n(81595),we=n(66959),Se=n(42921),ke=n(39372),Me=n(71406),Ce=n(49804),Ee=n(72213),Ne=n(35574),Te=n(42886),Le=n(8132),Pe=n(86766),Re=n(60526),De=n(76151),Fe=n(94177),Be=n(39185),Oe=n(9871),Ue=n(3961),qe=n(6474),He=n(73156),ze=n(53532),Ke=n(2776),Ve=n(41945),We=n(68533),Ge=n(31551),Qe=n(82705),Ye=n(41261),$e=n(15790),Xe=n(27146),Ze=n(89486),Je=n(7610),et=n(20754),tt=n(23656),nt=n(19644),st=n(43051),at=n(22588),ot=n(40389),it=n(68152),rt=n(26072),lt=n(54876),ct=n(97959),dt=n(93659),ut=n(10977),ht=n(95543),mt=n(72692),pt=n(7559),gt=n(99313),_t=n(32718),vt=n(96474),ft=n(99656),xt=n(64052),It=n(11256),bt=n(96689),At=n(90354),yt=n(12505),jt=n(57255),wt=n(34595),St=n(35373),kt=n(79467),Mt=n(95771),Ct=n(16955),Et=n(17559),Nt=n(89777),Tt=n(76856),Lt=n(30758),Pt=n(39591),Rt=n(26266),Dt=n(37759),Ft=n(37544),Bt=n(30136),Ot=n(42661),Ut=n(74711),qt=n(6714),Ht=n(51374),zt=n(75485),Kt=n(81938),Vt=n(96548),Wt=n(25998),Gt=n(41747),Qt=n(43014),Yt=n(19389),$t=n(58625),Xt=n(4927),Zt=n(42591),Jt=n(8021),en=n(89966),tn=n(12589),nn=n(43890),sn=n(87529),an=n(79511),on=n(71418),rn=n(162),ln=n(62584),cn=n(17998),dn=n(80317),un=n(39716),hn=n(3334),mn=n(52886),pn=n(92269),gn=n(38686),_n=n(69609),vn=n(22120),fn=n(2277),xn=n(77372),In=n(55245),bn=n(43149),An=n(70524),yn=n(67215),jn=n(13146),wn=n(27744),Sn=n(42855),kn=n(42074),Mn=n(25288),Cn=n(1724),En=n(44701),Nn=n(12781),Tn=n(18721),Ln=n(43194),Pn=n(12565),Rn=n(73464),Dn=n(64373),Fn=n(91815),Bn=n(89729),On=n(14766),Un=n(19282),qn=n(17279),Hn=n(25934),zn=n(43740),Kn=n(66546),Vn=n(16836),Wn=n(95347),Gn=n(3767),Qn=n(55403),Yn=n(79303),$n=n(9746),Xn=n(34451),Zn=n(85229),Jn=n(40827),es=n(10064),ts=n(15957),ns=n(96735),ss=n(9122),as=n(70005),os=n(25076),is=n(96583),rs=n(72550),ls=n(16667),cs=n(9352),ds=n(37360),us=n(17805),hs=n(53583),ms=n(10611),ps=n(20345),gs=n(54625),_s=n(45747),vs=n(66187),fs=n(61289),xs=n(23619),Is=n(39361),bs=n(39007),As=n(57293),ys=n(44927),js=n(4647),ws=n(12034),Ss=n(80681),ks=n(60033),Ms=n(60574),Cs=n(74477),Es=n(57570),Ns=n(54300),Ts=n(11970),Ls=n(22435),Ps=n(29602),Rs=n(14524),Ds=n(40295),Fs=n(911),Bs=n(83401),Os=n(40947),Us=n(88039),qs=n(65290),Hs=n(97024),zs=n(97972),Ks=n(9759),Vs=n(69463),Ws=n(45712),Gs=n(34452),Qs=n(36527),Ys=n(16362),$s=n(4261),Xs=n(21019),Zs=n(86824),Js=n(25058),ea=n(69043),ta=n(82772),na=n(29521),sa=n(34169),aa=n(43788),oa=n(88038),ia=n(22514),ra=n(23457),la=n(58487),ca=n(92179),da=n(32847),ua=n(84342),ha=n(2098),ma=n(25409),pa=n(85888),ga=n(81552),_a=n(53264),va=n(21260),fa=n(42402),xa=n(12998),Ia=n(58301),ba=n(67898),Aa=n(34245),ya=n(73522),ja=n(68422),wa=n(73290),Sa=n(46422),ka=n(87388),Ma=n(13356),Ca=n(38094),Ea=n(70301),Na=n(18311),Ta=n(60360),La=n(58592),Pa=n(91844),Ra=n(54299),Da=n(58309),Fa=n(61159),Ba=n(26328),Oa=n(57658),Ua=n(32297),qa=n(84522),Ha=n(18205),za=n(78841),Ka=n(32238),Va=n(12433),Wa=n(88441),Ga=n(2142),Qa=n(22856),Ya=n(72725),$a=n(39364),Xa=n(98088),Za=n(69775),Ja=n(60765),eo=n(26856),to=n(62629),no=n(2080),so=n(78782),ao=n(754),oo=n(42254),io=n(58400),ro=n(90381),lo=n(42391),co=n(87475),uo=n(4871),ho=n(43249),mo=n(77532),po=n(59864),go=n(40791),_o=n(22803),vo=n(7921),fo=n(41028),xo=n(98431),Io=n(16505),bo=n(6246),Ao=n(9631),yo=n(12573),jo=n(81019),wo=n(94277),So=n(78323),ko=n(12971),Mo=n(47199),Co=n(26127),Eo=n(26637),No=n(12938),To=n(86131),Lo=n(2263),Po=n(94687),Ro=n(65837),Do=n(78883),Fo=n(98699),Bo=n(75354),Oo=n(20080),Uo=n(56137),qo=n(97327),Ho=n(96981),zo=n(35618),Ko=n(52412),Vo=n(8124),Wo=n(71386),Go=n(55650),Qo=n(775),Yo=n(37224),$o=n(75138),Xo=n(23997),Zo=n(82545),Jo=n(95292),ei=n(78408),ti=n(48529),ni=n(48629),si=n(77678),ai=n(23311),oi=n(57445),ii=n(45456),ri=n(68791),li=n(10020),ci=n(347),di=n(81980),ui=n(62760),hi=n(59023),mi=n(71519),pi=n(7729),gi=n(8725),_i=n(42238),vi=n(90741),fi=n(88689),xi=n(83117),Ii=n(35959),bi=n(81637),Ai=n(93684),yi=n(99161),ji=n(61706),wi=n(63539),Si=n(85866),ki=n(30283),Mi=n(29119),Ci=n(53794),Ei=n(62872),Ni=n(45145),Ti=n(34267),Li=n(46784),Pi=n(98195),Ri=n(96222),Di=n(42305),Fi=n(6835),Bi=n(8366),Oi=n(84853),Ui=n(36856),qi=n(32109),Hi=n(76107),zi=n(56678),Ki=n(50660),Vi=n(24425),Wi=n(95917),Gi=n(25201),Qi=n(30526),Yi=n(46805),$i=n(4053),Xi=n(35054),Zi=n(36160),Ji=n(41506),er=n(22500),tr=n(22174),nr=n(46575),sr=n(54251),ar=n(8824),or=n(24519),ir=n(25376),rr=n(46655),lr=n(92905),cr=n(72531),dr=n(41297),ur=n(61131),hr=n(59258),mr=n(89130),pr=n(67065),gr=n(78186),_r=n(58636),vr=n(56757),fr=n(62287),xr=n(51236),Ir=n(47143),br=n(86587),Ar=n(21521),yr=n(68380),jr=n(81114),wr=n(73757),Sr=n(19969),kr=n(62504),Mr=n(56435),Cr=n(7265),Er=n(96421),Nr=n(27281),Tr=n(51758),Lr=n(84306),Pr=n(67022),Rr=n(36636),Dr=n(7333),Fr=n(43481),Br=n(93626),Or=n(30968),Ur=n(35069),qr=n(23253),Hr=n(63159);const zr=(0,s.a)((0,Hr.jsx)(a.h,{})),Kr=(0,s.a)((0,Hr.jsx)(o.h,{})),Vr=(0,s.a)((0,Hr.jsx)(i.h,{})),Wr=(0,s.a)((0,Hr.jsx)(r.h,{})),Gr=(0,s.a)((0,Hr.jsx)(l.h,{})),Qr=(0,s.a)((0,Hr.jsx)(c.h,{})),Yr=(0,s.a)((0,Hr.jsx)(d.h,{})),$r=(0,s.a)((0,Hr.jsx)(u.h,{})),Xr=(0,s.a)((0,Hr.jsx)(h.h,{})),Zr=(0,s.a)((0,Hr.jsx)(m.h,{})),Jr=(0,s.a)((0,Hr.jsx)(p.h,{})),el=(0,s.a)((0,Hr.jsx)(g.h,{})),tl=(0,s.a)((0,Hr.jsx)(_.h,{})),nl=(0,s.a)((0,Hr.jsx)(v.h,{})),sl=(0,s.a)((0,Hr.jsx)(f.h,{})),al=(0,s.a)((0,Hr.jsx)(x.h,{})),ol=(0,s.a)((0,Hr.jsx)(I.h,{})),il=(0,s.a)((0,Hr.jsx)(b.h,{})),rl=(0,s.a)((0,Hr.jsx)(A.h,{})),ll=(0,s.a)((0,Hr.jsx)(y.h,{})),cl=(0,s.a)((0,Hr.jsx)(j.h,{})),dl=(0,s.a)((0,Hr.jsx)(w.h,{})),ul=(0,s.a)((0,Hr.jsx)(S.h,{})),hl=(0,s.a)((0,Hr.jsx)(k.h,{})),ml=(0,s.a)((0,Hr.jsx)(M.h,{})),pl=(0,s.a)((0,Hr.jsx)(C.h,{})),gl=(0,s.a)((0,Hr.jsx)(E.h,{})),_l=(0,s.a)((0,Hr.jsx)(N.h,{})),vl=(0,s.a)((0,Hr.jsx)(T.h,{})),fl=(0,s.a)((0,Hr.jsx)(L.h,{})),xl=(0,s.a)((0,Hr.jsx)(P.h,{})),Il=(0,s.a)((0,Hr.jsx)(R.h,{})),bl=(0,s.a)((0,Hr.jsx)(D.h,{})),Al=(0,s.a)((0,Hr.jsx)(F.h,{})),yl=(0,s.a)((0,Hr.jsx)(B.h,{})),jl=(0,s.a)((0,Hr.jsx)(O.h,{})),wl=(0,s.a)((0,Hr.jsx)(U.h,{})),Sl=(0,s.a)((0,Hr.jsx)(q.h,{})),kl=(0,s.a)((0,Hr.jsx)(H.h,{})),Ml=(0,s.a)((0,Hr.jsx)(z.h,{})),Cl=(0,s.a)((0,Hr.jsx)(K.h,{})),El=(0,s.a)((0,Hr.jsx)(V.h,{})),Nl=(0,s.a)((0,Hr.jsx)(W.h,{})),Tl=(0,s.a)((0,Hr.jsx)(G.h,{})),Ll=(0,s.a)((0,Hr.jsx)(Q.h,{})),Pl=(0,s.a)((0,Hr.jsx)(Y.h,{})),Rl=(0,s.a)((0,Hr.jsx)($.h,{})),Dl=(0,s.a)((0,Hr.jsx)(X.h,{})),Fl=(0,s.a)((0,Hr.jsx)(Z.h,{})),Bl=(0,s.a)((0,Hr.jsx)(J.h,{})),Ol=(0,s.a)((0,Hr.jsx)(ee.h,{})),Ul=(0,s.a)((0,Hr.jsx)(te.h,{})),ql=(0,s.a)((0,Hr.jsx)(ne.h,{})),Hl=(0,s.a)((0,Hr.jsx)(se.h,{})),zl=(0,s.a)((0,Hr.jsx)(ae.h,{})),Kl=(0,s.a)((0,Hr.jsx)(oe.h,{})),Vl=(0,s.a)((0,Hr.jsx)(ie.h,{})),Wl=(0,s.a)((0,Hr.jsx)(re.h,{})),Gl=(0,s.a)((0,Hr.jsx)(le.h,{})),Ql=(0,s.a)((0,Hr.jsx)(ce.h,{})),Yl=(0,s.a)((0,Hr.jsx)(de.h,{})),$l=(0,s.a)((0,Hr.jsx)(ue.h,{})),Xl=(0,s.a)((0,Hr.jsx)(he.h,{})),Zl=(0,s.a)((0,Hr.jsx)(me.h,{})),Jl=(0,s.a)((0,Hr.jsx)(pe.h,{})),ec=(0,s.a)((0,Hr.jsx)(ge.h,{})),tc=(0,s.a)((0,Hr.jsx)(_e.h,{})),nc=(0,s.a)((0,Hr.jsx)(ve.h,{})),sc=(0,s.a)((0,Hr.jsx)(fe.h,{})),ac=(0,s.a)((0,Hr.jsx)(xe.h,{})),oc=(0,s.a)((0,Hr.jsx)(Ie.h,{})),ic=(0,s.a)((0,Hr.jsx)(be.h,{})),rc=(0,s.a)((0,Hr.jsx)(Ae.h,{})),lc=(0,s.a)((0,Hr.jsx)(ye.h,{})),cc=(0,s.a)((0,Hr.jsx)(je.h,{})),dc=(0,s.a)((0,Hr.jsx)(we.h,{})),uc=(0,s.a)((0,Hr.jsx)(Se.h,{})),hc=(0,s.a)((0,Hr.jsx)(ke.h,{})),mc=(0,s.a)((0,Hr.jsx)(Me.h,{})),pc=(0,s.a)((0,Hr.jsx)(Ce.h,{})),gc=(0,s.a)((0,Hr.jsx)(Ee.h,{})),_c=(0,s.a)((0,Hr.jsx)(Ne.h,{})),vc=(0,s.a)((0,Hr.jsx)(Te.h,{})),fc=(0,s.a)((0,Hr.jsx)(Le.h,{})),xc=(0,s.a)((0,Hr.jsx)(Pe.h,{})),Ic=(0,s.a)((0,Hr.jsx)(Re.h,{})),bc=(0,s.a)((0,Hr.jsx)(De.h,{})),Ac=(0,s.a)((0,Hr.jsx)(Fe.h,{})),yc=(0,s.a)((0,Hr.jsx)(Be.h,{})),jc=(0,s.a)((0,Hr.jsx)(Oe.h,{})),wc=(0,s.a)((0,Hr.jsx)(Ue.h,{})),Sc=(0,s.a)((0,Hr.jsx)(qe.h,{})),kc=(0,s.a)((0,Hr.jsx)(He.h,{})),Mc=(0,s.a)((0,Hr.jsx)(ze.h,{})),Cc=(0,s.a)((0,Hr.jsx)(Ke.h,{})),Ec=(0,s.a)((0,Hr.jsx)(Ve.h,{})),Nc=(0,s.a)((0,Hr.jsx)(We.h,{})),Tc=(0,s.a)((0,Hr.jsx)(Ge.h,{})),Lc=(0,s.a)((0,Hr.jsx)(Qe.h,{})),Pc=(0,s.a)((0,Hr.jsx)(Ye.h,{})),Rc=(0,s.a)((0,Hr.jsx)($e.h,{})),Dc=(0,s.a)((0,Hr.jsx)(Xe.h,{})),Fc=(0,s.a)((0,Hr.jsx)(Ze.h,{})),Bc=(0,s.a)((0,Hr.jsx)(Je.h,{})),Oc=(0,s.a)((0,Hr.jsx)(et.h,{})),Uc=(0,s.a)((0,Hr.jsx)(tt.h,{})),qc=(0,s.a)((0,Hr.jsx)(nt.h,{})),Hc=(0,s.a)((0,Hr.jsx)(st.h,{})),zc=(0,s.a)((0,Hr.jsx)(at.h,{})),Kc=(0,s.a)((0,Hr.jsx)(ot.h,{})),Vc=(0,s.a)((0,Hr.jsx)(it.h,{})),Wc=(0,s.a)((0,Hr.jsx)(rt.h,{})),Gc=(0,s.a)((0,Hr.jsx)(lt.h,{})),Qc=(0,s.a)((0,Hr.jsx)(ct.h,{})),Yc=(0,s.a)((0,Hr.jsx)(dt.h,{})),$c=(0,s.a)((0,Hr.jsx)(ut.h,{})),Xc=(0,s.a)((0,Hr.jsx)(ht.h,{})),Zc=(0,s.a)((0,Hr.jsx)(mt.h,{})),Jc=(0,s.a)((0,Hr.jsx)(pt.h,{})),ed=(0,s.a)((0,Hr.jsx)(gt.h,{})),td=(0,s.a)((0,Hr.jsx)(_t.h,{})),nd=(0,s.a)((0,Hr.jsx)(vt.h,{})),sd=(0,s.a)((0,Hr.jsx)(ft.h,{})),ad=(0,s.a)((0,Hr.jsx)(xt.h,{})),od=(0,s.a)((0,Hr.jsx)(It.h,{})),id=(0,s.a)((0,Hr.jsx)(bt.h,{})),rd=(0,s.a)((0,Hr.jsx)(At.h,{})),ld=(0,s.a)((0,Hr.jsx)(yt.h,{})),cd=(0,s.a)((0,Hr.jsx)(jt.h,{})),dd=(0,s.a)((0,Hr.jsx)(wt.h,{})),ud=(0,s.a)((0,Hr.jsx)(St.h,{})),hd=(0,s.a)((0,Hr.jsx)(kt.h,{})),md=(0,s.a)((0,Hr.jsx)(Mt.h,{})),pd=(0,s.a)((0,Hr.jsx)(Ct.h,{})),gd=(0,s.a)((0,Hr.jsx)(Et.h,{})),_d=(0,s.a)((0,Hr.jsx)(Nt.h,{})),vd=(0,s.a)((0,Hr.jsx)(Tt.h,{})),fd=(0,s.a)((0,Hr.jsx)(Lt.h,{})),xd=(0,s.a)((0,Hr.jsx)(Pt.h,{})),Id=(0,s.a)((0,Hr.jsx)(Rt.h,{})),bd=(0,s.a)((0,Hr.jsx)(Dt.h,{})),Ad=(0,s.a)((0,Hr.jsx)(Ft.h,{})),yd=(0,s.a)((0,Hr.jsx)(Bt.h,{})),jd=(0,s.a)((0,Hr.jsx)(Ot.h,{})),wd=(0,s.a)((0,Hr.jsx)(Ut.h,{})),Sd=(0,s.a)((0,Hr.jsx)(qt.h,{})),kd=(0,s.a)((0,Hr.jsx)(Ht.h,{})),Md=(0,s.a)((0,Hr.jsx)(zt.h,{})),Cd=(0,s.a)((0,Hr.jsx)(Kt.h,{})),Ed=(0,s.a)((0,Hr.jsx)(Vt.h,{})),Nd=(0,s.a)((0,Hr.jsx)(Wt.h,{})),Td=(0,s.a)((0,Hr.jsx)(Gt.h,{})),Ld=(0,s.a)((0,Hr.jsx)(Qt.h,{})),Pd=(0,s.a)((0,Hr.jsx)(Yt.h,{})),Rd=(0,s.a)((0,Hr.jsx)($t.h,{})),Dd=(0,s.a)((0,Hr.jsx)(Xt.h,{})),Fd=(0,s.a)((0,Hr.jsx)(Zt.h,{})),Bd=(0,s.a)((0,Hr.jsx)(Jt.h,{})),Od=(0,s.a)((0,Hr.jsx)(en.h,{})),Ud=(0,s.a)((0,Hr.jsx)(tn.h,{})),qd=(0,s.a)((0,Hr.jsx)(nn.h,{})),Hd=(0,s.a)((0,Hr.jsx)(sn.h,{})),zd=(0,s.a)((0,Hr.jsx)(an.h,{})),Kd=(0,s.a)((0,Hr.jsx)(on.h,{})),Vd=(0,s.a)((0,Hr.jsx)(rn.h,{})),Wd=(0,s.a)((0,Hr.jsx)(ln.h,{})),Gd=(0,s.a)((0,Hr.jsx)(cn.h,{})),Qd=(0,s.a)((0,Hr.jsx)(dn.h,{})),Yd=(0,s.a)((0,Hr.jsx)(un.h,{})),$d=(0,s.a)((0,Hr.jsx)(hn.h,{})),Xd=(0,s.a)((0,Hr.jsx)(mn.h,{})),Zd=(0,s.a)((0,Hr.jsx)(pn.h,{})),Jd=(0,s.a)((0,Hr.jsx)(gn.h,{})),eu=(0,s.a)((0,Hr.jsx)(_n.h,{})),tu=(0,s.a)((0,Hr.jsx)(vn.h,{})),nu=(0,s.a)((0,Hr.jsx)(fn.h,{})),su=(0,s.a)((0,Hr.jsx)(xn.h,{})),au=(0,s.a)((0,Hr.jsx)(In.h,{})),ou=(0,s.a)((0,Hr.jsx)(bn.h,{})),iu=(0,s.a)((0,Hr.jsx)(An.h,{})),ru=(0,s.a)((0,Hr.jsx)(yn.h,{})),lu=(0,s.a)((0,Hr.jsx)(jn.h,{})),cu=(0,s.a)((0,Hr.jsx)(wn.h,{})),du=(0,s.a)((0,Hr.jsx)(Sn.h,{})),uu=(0,s.a)((0,Hr.jsx)(kn.h,{})),hu=(0,s.a)((0,Hr.jsx)(Mn.h,{})),mu=(0,s.a)((0,Hr.jsx)(Cn.h,{})),pu=(0,s.a)((0,Hr.jsx)(En.h,{})),gu=(0,s.a)((0,Hr.jsx)(Nn.h,{})),_u=(0,s.a)((0,Hr.jsx)(Tn.h,{})),vu=(0,s.a)((0,Hr.jsx)(Ln.h,{})),fu=(0,s.a)((0,Hr.jsx)(Pn.h,{})),xu=(0,s.a)((0,Hr.jsx)(Rn.h,{})),Iu=(0,s.a)((0,Hr.jsx)(Dn.h,{})),bu=(0,s.a)((0,Hr.jsx)(Fn.h,{})),Au=(0,s.a)((0,Hr.jsx)(Bn.h,{})),yu=(0,s.a)((0,Hr.jsx)(On.h,{})),ju=(0,s.a)((0,Hr.jsx)(Un.h,{})),wu=(0,s.a)((0,Hr.jsx)(qn.h,{})),Su=(0,s.a)((0,Hr.jsx)(Hn.h,{})),ku=(0,s.a)((0,Hr.jsx)(zn.h,{})),Mu=(0,s.a)((0,Hr.jsx)(Kn.h,{})),Cu=(0,s.a)((0,Hr.jsx)(Vn.h,{})),Eu=(0,s.a)((0,Hr.jsx)(Wn.h,{})),Nu=(0,s.a)((0,Hr.jsx)(Gn.h,{})),Tu=(0,s.a)((0,Hr.jsx)(Qn.h,{})),Lu=(0,s.a)((0,Hr.jsx)(Yn.h,{})),Pu=(0,s.a)((0,Hr.jsx)($n.h,{})),Ru=(0,s.a)((0,Hr.jsx)(Xn.h,{})),Du=(0,s.a)((0,Hr.jsx)(Zn.h,{})),Fu=(0,s.a)((0,Hr.jsx)(Jn.h,{})),Bu=(0,s.a)((0,Hr.jsx)(es.h,{})),Ou=(0,s.a)((0,Hr.jsx)(ts.h,{})),Uu=(0,s.a)((0,Hr.jsx)(ns.h,{})),qu=(0,s.a)((0,Hr.jsx)(ss.h,{})),Hu=(0,s.a)((0,Hr.jsx)(as.h,{})),zu=(0,s.a)((0,Hr.jsx)(os.h,{})),Ku=(0,s.a)((0,Hr.jsx)(is.h,{})),Vu=(0,s.a)((0,Hr.jsx)(rs.h,{})),Wu=(0,s.a)((0,Hr.jsx)(ls.h,{})),Gu=(0,s.a)((0,Hr.jsx)(cs.h,{})),Qu=(0,s.a)((0,Hr.jsx)(ds.h,{})),Yu=(0,s.a)((0,Hr.jsx)(us.h,{})),$u=(0,s.a)((0,Hr.jsx)(hs.h,{})),Xu=(0,s.a)((0,Hr.jsx)(ms.h,{})),Zu=(0,s.a)((0,Hr.jsx)(ps.h,{})),Ju=(0,s.a)((0,Hr.jsx)(gs.h,{})),eh=(0,s.a)((0,Hr.jsx)(_s.h,{})),th=(0,s.a)((0,Hr.jsx)(vs.h,{})),nh=(0,s.a)((0,Hr.jsx)(fs.h,{})),sh=(0,s.a)((0,Hr.jsx)(xs.h,{})),ah=(0,s.a)((0,Hr.jsx)(Is.h,{})),oh=(0,s.a)((0,Hr.jsx)(bs.h,{})),ih=(0,s.a)((0,Hr.jsx)(As.h,{})),rh=(0,s.a)((0,Hr.jsx)(ys.h,{})),lh=(0,s.a)((0,Hr.jsx)(js.h,{})),ch=(0,s.a)((0,Hr.jsx)(ws.h,{})),dh=(0,s.a)((0,Hr.jsx)(Ss.h,{})),uh=(0,s.a)((0,Hr.jsx)(ks.h,{})),hh=(0,s.a)((0,Hr.jsx)(Ms.h,{})),mh=(0,s.a)((0,Hr.jsx)(Cs.h,{})),ph=(0,s.a)((0,Hr.jsx)(Es.h,{})),gh=(0,s.a)((0,Hr.jsx)(Ns.h,{})),_h=(0,s.a)((0,Hr.jsx)(Ts.h,{})),vh=(0,s.a)((0,Hr.jsx)(Ls.h,{})),fh=(0,s.a)((0,Hr.jsx)(Ps.h,{})),xh=(0,s.a)((0,Hr.jsx)(Rs.h,{})),Ih=(0,s.a)((0,Hr.jsx)(Ds.h,{})),bh=(0,s.a)((0,Hr.jsx)(Fs.h,{})),Ah=(0,s.a)((0,Hr.jsx)(Bs.h,{})),yh=(0,s.a)((0,Hr.jsx)(Os.h,{})),jh=(0,s.a)((0,Hr.jsx)(Us.h,{})),wh=(0,s.a)((0,Hr.jsx)(qs.h,{})),Sh=(0,s.a)((0,Hr.jsx)(Hs.h,{})),kh=(0,s.a)((0,Hr.jsx)(zs.h,{})),Mh=(0,s.a)((0,Hr.jsx)(Ks.h,{})),Ch=(0,s.a)((0,Hr.jsx)(Vs.h,{})),Eh=(0,s.a)((0,Hr.jsx)(Ws.h,{})),Nh=(0,s.a)((0,Hr.jsx)(Gs.h,{})),Th=(0,s.a)((0,Hr.jsx)(Qs.h,{})),Lh=(0,s.a)((0,Hr.jsx)(Ys.h,{})),Ph=(0,s.a)((0,Hr.jsx)($s.h,{})),Rh=(0,s.a)((0,Hr.jsx)(Xs.h,{})),Dh=(0,s.a)((0,Hr.jsx)(Zs.h,{})),Fh=(0,s.a)((0,Hr.jsx)(Js.h,{})),Bh=(0,s.a)((0,Hr.jsx)(ea.h,{})),Oh=(0,s.a)((0,Hr.jsx)(ta.h,{})),Uh=(0,s.a)((0,Hr.jsx)(na.h,{})),qh=(0,s.a)((0,Hr.jsx)(sa.h,{})),Hh=(0,s.a)((0,Hr.jsx)(aa.h,{})),zh=(0,s.a)((0,Hr.jsx)(oa.h,{})),Kh=(0,s.a)((0,Hr.jsx)(ia.h,{})),Vh=(0,s.a)((0,Hr.jsx)(ra.h,{})),Wh=(0,s.a)((0,Hr.jsx)(la.h,{})),Gh=(0,s.a)((0,Hr.jsx)(ca.h,{})),Qh=(0,s.a)((0,Hr.jsx)(da.h,{})),Yh=(0,s.a)((0,Hr.jsx)(ua.h,{})),$h=(0,s.a)((0,Hr.jsx)(ha.h,{})),Xh=(0,s.a)((0,Hr.jsx)(ma.h,{})),Zh=(0,s.a)((0,Hr.jsx)(pa.h,{})),Jh=(0,s.a)((0,Hr.jsx)(ga.h,{})),em=(0,s.a)((0,Hr.jsx)(_a.h,{})),tm=(0,s.a)((0,Hr.jsx)(va.h,{})),nm=(0,s.a)((0,Hr.jsx)(fa.h,{})),sm=(0,s.a)((0,Hr.jsx)(xa.h,{})),am=(0,s.a)((0,Hr.jsx)(Ia.h,{})),om=(0,s.a)((0,Hr.jsx)(ba.h,{})),im=(0,s.a)((0,Hr.jsx)(Aa.h,{})),rm=(0,s.a)((0,Hr.jsx)(ya.h,{})),lm=(0,s.a)((0,Hr.jsx)(ja.h,{})),cm=(0,s.a)((0,Hr.jsx)(wa.h,{})),dm=(0,s.a)((0,Hr.jsx)(Sa.h,{})),um=(0,s.a)((0,Hr.jsx)(ka.h,{})),hm=(0,s.a)((0,Hr.jsx)(Ma.h,{})),mm=(0,s.a)((0,Hr.jsx)(Ca.h,{})),pm=(0,s.a)((0,Hr.jsx)(Ea.h,{})),gm=(0,s.a)((0,Hr.jsx)(Na.h,{})),_m=(0,s.a)((0,Hr.jsx)(Ta.h,{})),vm=(0,s.a)((0,Hr.jsx)(La.h,{})),fm=(0,s.a)((0,Hr.jsx)(Pa.h,{})),xm=(0,s.a)((0,Hr.jsx)(Ra.h,{})),Im=(0,s.a)((0,Hr.jsx)(Da.h,{})),bm=(0,s.a)((0,Hr.jsx)(Fa.h,{})),Am=(0,s.a)((0,Hr.jsx)(Ba.h,{})),ym=(0,s.a)((0,Hr.jsx)(Oa.h,{})),jm=(0,s.a)((0,Hr.jsx)(Ua.h,{})),wm=(0,s.a)((0,Hr.jsx)(qa.h,{})),Sm=(0,s.a)((0,Hr.jsx)(Ha.h,{})),km=(0,s.a)((0,Hr.jsx)(za.h,{})),Mm=(0,s.a)((0,Hr.jsx)(Ka.h,{})),Cm=(0,s.a)((0,Hr.jsx)(Va.h,{})),Em=(0,s.a)((0,Hr.jsx)(Wa.h,{})),Nm=(0,s.a)((0,Hr.jsx)(Ga.h,{})),Tm=(0,s.a)((0,Hr.jsx)(Qa.h,{})),Lm=(0,s.a)((0,Hr.jsx)(Ya.h,{})),Pm=(0,s.a)((0,Hr.jsx)($a.h,{})),Rm=(0,s.a)((0,Hr.jsx)(Xa.h,{})),Dm=(0,s.a)((0,Hr.jsx)(Za.h,{})),Fm=(0,s.a)((0,Hr.jsx)(Ja.h,{})),Bm=(0,s.a)((0,Hr.jsx)(eo.h,{})),Om=(0,s.a)((0,Hr.jsx)(to.h,{})),Um=(0,s.a)((0,Hr.jsx)(no.h,{})),qm=(0,s.a)((0,Hr.jsx)(so.h,{})),Hm=(0,s.a)((0,Hr.jsx)(ao.h,{})),zm=(0,s.a)((0,Hr.jsx)(oo.h,{})),Km=(0,s.a)((0,Hr.jsx)(io.h,{})),Vm=(0,s.a)((0,Hr.jsx)(ro.h,{})),Wm=(0,s.a)((0,Hr.jsx)(lo.h,{})),Gm=(0,s.a)((0,Hr.jsx)(co.h,{})),Qm=(0,s.a)((0,Hr.jsx)(uo.h,{})),Ym=(0,s.a)((0,Hr.jsx)(ho.h,{})),$m=(0,s.a)((0,Hr.jsx)(mo.h,{})),Xm=(0,s.a)((0,Hr.jsx)(po.h,{})),Zm=(0,s.a)((0,Hr.jsx)(go.h,{})),Jm=(0,s.a)((0,Hr.jsx)(_o.h,{})),ep=(0,s.a)((0,Hr.jsx)(vo.h,{})),tp=(0,s.a)((0,Hr.jsx)(fo.h,{})),np=(0,s.a)((0,Hr.jsx)(xo.h,{})),sp=(0,s.a)((0,Hr.jsx)(Io.h,{})),ap=(0,s.a)((0,Hr.jsx)(bo.h,{})),op=(0,s.a)((0,Hr.jsx)(Ao.h,{})),ip=(0,s.a)((0,Hr.jsx)(yo.h,{})),rp=(0,s.a)((0,Hr.jsx)(jo.h,{})),lp=(0,s.a)((0,Hr.jsx)(wo.h,{})),cp=(0,s.a)((0,Hr.jsx)(So.h,{})),dp=(0,s.a)((0,Hr.jsx)(ko.h,{})),up=(0,s.a)((0,Hr.jsx)(Mo.h,{})),hp=(0,s.a)((0,Hr.jsx)(Co.h,{})),mp=(0,s.a)((0,Hr.jsx)(Eo.h,{})),pp=(0,s.a)((0,Hr.jsx)(No.h,{})),gp=(0,s.a)((0,Hr.jsx)(To.h,{})),_p=(0,s.a)((0,Hr.jsx)(Lo.h,{})),vp=(0,s.a)((0,Hr.jsx)(Po.h,{})),fp=(0,s.a)((0,Hr.jsx)(Ro.h,{})),xp=(0,s.a)((0,Hr.jsx)(Do.h,{})),Ip=(0,s.a)((0,Hr.jsx)(Fo.h,{})),bp=(0,s.a)((0,Hr.jsx)(Bo.h,{})),Ap=(0,s.a)((0,Hr.jsx)(Oo.h,{})),yp=(0,s.a)((0,Hr.jsx)(Uo.h,{})),jp=(0,s.a)((0,Hr.jsx)(qo.h,{})),wp=(0,s.a)((0,Hr.jsx)(Ho.h,{})),Sp=(0,s.a)((0,Hr.jsx)(zo.h,{})),kp=(0,s.a)((0,Hr.jsx)(Ko.h,{})),Mp=(0,s.a)((0,Hr.jsx)(Vo.h,{})),Cp=(0,s.a)((0,Hr.jsx)(Wo.h,{})),Ep=(0,s.a)((0,Hr.jsx)(Go.h,{})),Np=(0,s.a)((0,Hr.jsx)(Qo.h,{})),Tp=(0,s.a)((0,Hr.jsx)(Yo.h,{})),Lp=(0,s.a)((0,Hr.jsx)($o.h,{})),Pp=(0,s.a)((0,Hr.jsx)(Xo.h,{})),Rp=(0,s.a)((0,Hr.jsx)(Zo.h,{})),Dp=(0,s.a)((0,Hr.jsx)(Jo.h,{})),Fp=(0,s.a)((0,Hr.jsx)(ei.h,{})),Bp=(0,s.a)((0,Hr.jsx)(ti.h,{})),Op=(0,s.a)((0,Hr.jsx)(ni.h,{})),Up=(0,s.a)((0,Hr.jsx)(si.h,{})),qp=(0,s.a)((0,Hr.jsx)(ai.h,{})),Hp=(0,s.a)((0,Hr.jsx)(oi.h,{})),zp=(0,s.a)((0,Hr.jsx)(ii.h,{})),Kp=(0,s.a)((0,Hr.jsx)(ri.h,{})),Vp=(0,s.a)((0,Hr.jsx)(li.h,{})),Wp=(0,s.a)((0,Hr.jsx)(ci.h,{})),Gp=(0,s.a)((0,Hr.jsx)(di.h,{})),Qp=(0,s.a)((0,Hr.jsx)(ui.h,{})),Yp=(0,s.a)((0,Hr.jsx)(hi.h,{})),$p=(0,s.a)((0,Hr.jsx)(mi.h,{})),Xp=(0,s.a)((0,Hr.jsx)(pi.h,{})),Zp=(0,s.a)((0,Hr.jsx)(gi.h,{})),Jp=(0,s.a)((0,Hr.jsx)(_i.h,{})),eg=(0,s.a)((0,Hr.jsx)(vi.h,{})),tg=(0,s.a)((0,Hr.jsx)(fi.h,{})),ng=(0,s.a)((0,Hr.jsx)(xi.h,{})),sg=(0,s.a)((0,Hr.jsx)(Ii.h,{})),ag=(0,s.a)((0,Hr.jsx)(bi.h,{})),og=(0,s.a)((0,Hr.jsx)(Ai.h,{})),ig=(0,s.a)((0,Hr.jsx)(yi.h,{})),rg=(0,s.a)((0,Hr.jsx)(ji.h,{})),lg=(0,s.a)((0,Hr.jsx)(wi.h,{})),cg=(0,s.a)((0,Hr.jsx)(Si.h,{})),dg=(0,s.a)((0,Hr.jsx)(ki.h,{})),ug=(0,s.a)((0,Hr.jsx)(Mi.h,{})),hg=(0,s.a)((0,Hr.jsx)(Ci.h,{})),mg=(0,s.a)((0,Hr.jsx)(Ei.h,{})),pg=(0,s.a)((0,Hr.jsx)(Ni.h,{})),gg=(0,s.a)((0,Hr.jsx)(Ti.h,{})),_g=(0,s.a)((0,Hr.jsx)(Li.h,{})),vg=(0,s.a)((0,Hr.jsx)(Pi.h,{})),fg=(0,s.a)((0,Hr.jsx)(Ri.h,{})),xg=(0,s.a)((0,Hr.jsx)(Di.h,{})),Ig=(0,s.a)((0,Hr.jsx)(Fi.h,{})),bg=(0,s.a)((0,Hr.jsx)(Bi.h,{})),Ag=(0,s.a)((0,Hr.jsx)(Oi.h,{})),yg=(0,s.a)((0,Hr.jsx)(Ui.h,{})),jg=(0,s.a)((0,Hr.jsx)(qi.h,{})),wg=(0,s.a)((0,Hr.jsx)(Hi.h,{})),Sg=(0,s.a)((0,Hr.jsx)(zi.h,{})),kg=(0,s.a)((0,Hr.jsx)(Ki.h,{})),Mg=(0,s.a)((0,Hr.jsx)(Vi.h,{})),Cg=(0,s.a)((0,Hr.jsx)(Wi.h,{})),Eg=(0,s.a)((0,Hr.jsx)(Gi.h,{})),Ng=(0,s.a)((0,Hr.jsx)(Qi.h,{})),Tg=(0,s.a)((0,Hr.jsx)(Yi.h,{})),Lg=(0,s.a)((0,Hr.jsx)($i.h,{})),Pg=(0,s.a)((0,Hr.jsx)(Xi.h,{})),Rg=(0,s.a)((0,Hr.jsx)(Zi.h,{})),Dg=(0,s.a)((0,Hr.jsx)(Ji.h,{})),Fg=(0,s.a)((0,Hr.jsx)(er.h,{})),Bg=(0,s.a)((0,Hr.jsx)(tr.h,{})),Og=(0,s.a)((0,Hr.jsx)(nr.h,{})),Ug=(0,s.a)((0,Hr.jsx)(sr.h,{})),qg=(0,s.a)((0,Hr.jsx)(ar.h,{})),Hg=(0,s.a)((0,Hr.jsx)(or.h,{})),zg=(0,s.a)((0,Hr.jsx)(ir.h,{})),Kg=(0,s.a)((0,Hr.jsx)(rr.h,{})),Vg=(0,s.a)((0,Hr.jsx)(lr.h,{})),Wg=(0,s.a)((0,Hr.jsx)(cr.h,{})),Gg=(0,s.a)((0,Hr.jsx)(dr.h,{})),Qg=(0,s.a)((0,Hr.jsx)(ur.h,{})),Yg=(0,s.a)((0,Hr.jsx)(hr.h,{})),$g=(0,s.a)((0,Hr.jsx)(mr.h,{})),Xg=(0,s.a)((0,Hr.jsx)(pr.h,{})),Zg=(0,s.a)((0,Hr.jsx)(gr.h,{})),Jg=(0,s.a)((0,Hr.jsx)(_r.h,{})),e_=(0,s.a)((0,Hr.jsx)(vr.h,{})),t_=(0,s.a)((0,Hr.jsx)(fr.h,{})),n_=(0,s.a)((0,Hr.jsx)(xr.h,{})),s_=(0,s.a)((0,Hr.jsx)(Ir.h,{})),a_=(0,s.a)((0,Hr.jsx)(br.h,{})),o_=(0,s.a)((0,Hr.jsx)(Ar.h,{})),i_=(0,s.a)((0,Hr.jsx)(yr.h,{})),r_=(0,s.a)((0,Hr.jsx)(jr.h,{})),l_=(0,s.a)((0,Hr.jsx)(wr.h,{})),c_=(0,s.a)((0,Hr.jsx)(Sr.h,{})),d_=(0,s.a)((0,Hr.jsx)(kr.h,{})),u_=(0,s.a)((0,Hr.jsx)(Mr.h,{})),h_=(0,s.a)((0,Hr.jsx)(Cr.h,{})),m_=(0,s.a)((0,Hr.jsx)(Er.h,{})),p_=(0,s.a)((0,Hr.jsx)(Nr.h,{})),g_=(0,s.a)((0,Hr.jsx)(Tr.h,{})),__=(0,s.a)((0,Hr.jsx)(Lr.h,{})),v_=(0,s.a)((0,Hr.jsx)(Pr.h,{})),f_=(0,s.a)((0,Hr.jsx)(Rr.h,{})),x_=(0,s.a)((0,Hr.jsx)(Dr.h,{})),I_=(0,s.a)((0,Hr.jsx)(Fr.h,{})),b_=(0,s.a)((0,Hr.jsx)(Br.h,{})),A_=(0,s.a)((0,Hr.jsx)(Or.h,{})),y_=(0,s.a)((0,Hr.jsx)(Ur.h,{})),j_=(0,s.a)((0,Hr.jsx)(qr.h,{})),w_={IcZoomOutIcon:zr,IcZoomInIcon:Kr,IcZoomFitIcon:Vr,IcXIcon:Wr,IcWriteIcon:Gr,IcWindowsIcon:Qr,IcWeiboIcon:Yr,IcWebsiteIcon:$r,IcWebpaegFillIcon:Xr,IcWarningSmallIcon:Zr,IcWarningLargeIcon:Jr,IcVoiceStopIcon:el,IcVoiceFillIcon:tl,IcVoiceIcon:nl,IcUpscaleIcon:sl,IcUploadImageIcon:al,IcUploadIcon:ol,IcUpdateAlertIcon:il,IcUpdateIcon:rl,IcUnsplashIcon:ll,IcUnfavoriteIcon:cl,IcTrendingIcon:dl,IcTrashIcon:ul,IcTranslateOnIcon:hl,IcTranslateOffIcon:ml,IcTipIcon:pl,IcTimeListIcon:gl,IcTimeIcon:_l,IcThumbsUpFillIcon:vl,IcThumbsUpIcon:fl,IcThumbsDownFillIcon:xl,IcThumbsDownIcon:Il,IcTerminalIcon:bl,IcSunIcon:Al,IcSummarizeWebpaegFillIcon:yl,IcSummarizeIcon:jl,IcSuccessSmallIcon:wl,IcSuccessLargeIcon:Sl,IcStopFillIcon:kl,IcStopIcon:Ml,IcStandardIcon:Cl,IcSpreadsheetTextFillIcon:El,IcSplitIcon:Nl,IcSpecialWriteIcon:Tl,IcSpacingShortIcon:Ll,IcSpacingHeightIcon:Pl,IcSnowIcon:Rl,IcSkillsFillExplorationIcon:Dl,IcSkillsFillIcon:Fl,IcSkillsIcon:Bl,IcSkillAddedIcon:Ol,IcSkillAddIcon:Ul,IcSiderbarExpendIcon:ql,IcSiderbarCollapseIcon:Hl,IcSiderIcon:zl,IcShrinkScreenIcon:Kl,IcShareIcon:Vl,IcShakeIcon:Wl,IcSettingsIcon:Gl,IcSettingPluginIcon:Ql,IcSelectdPenIcon:Yl,IcSelectdEraseIcon:$l,IcSearchSmartIcon:Xl,IcSearchPlusIcon:Zl,IcSearchIcon:Jl,IcScreenShotIcon:ec,IcRewriteIcon:tc,IcReturnIcon:nc,IcReplaceSelectionIcon:sc,IcRegenerateIcon:ac,IcReadSparkleIcon:oc,IcReadFillIcon:ic,IcReadIcon:rc,IcRatio916Icon:lc,IcRatio43Icon:cc,IcRatio34Icon:dc,IcRatio23Icon:uc,IcRatio11Icon:hc,IcRatio169Icon:mc,IcRatioIcon:pc,IcQuote2Icon:gc,IcQuote1Icon:_c,IcProfessionalIcon:vc,IcPosterIcon:fc,IcPositionIcon:xc,IcPlusCircleFillIcon:Ic,IcPlusIcon:bc,IcPluginsIcon:Ac,IcPlaySmallIcon:yc,IcPlayFillIcon:jc,IcPlayIcon:wc,IcPinSlashIcon:Sc,IcPinFillIcon:kc,IcPinIcon:Mc,IcPhotoDownIcon:Cc,IcPhotoIcon:Ec,IcPhoneIcon:Nc,IcPenSparkleIcon:Tc,IcPdfTextFillIcon:Lc,IcPaperclipIcon:Pc,IcNotificationFillIcon:Rc,IcNotificationIcon:Dc,IcNotesIcon:Fc,IcNoteIcon:Bc,IcNewThreadIcon:Oc,IcNewChatSolidIcon:Uc,IcNewChatIcon:qc,IcMusicSparkleIcon:Hc,IcMusicIcon:zc,IcMoreErticalIcon:Kc,IcMoreIcon:Vc,IcMoonIcon:Wc,IcModifyToneIcon:Gc,IcModifySummarizeIcon:Qc,IcModifyShorterIcon:Yc,IcModifyMediumIcon:$c,IcModifyLongerIcon:Xc,IcMinusCircleFillIcon:Zc,IcMindmapIcon:Jc,IcMicroIcon:ed,IcMenuIcon:td,IcMediumIcon:nd,IcMassageIcon:sd,IcMarkSolidIcon:ad,IcMarkIcon:od,IcMainChatIcon:id,IcMailIcon:rd,IcLyricsFillIcon:ld,IcLyricsIcon:cd,IcLoveIcon:dd,IcLoadingIcon:ud,IcLinkExternalIcon:hd,IcLinkAddIcon:md,IcLinkIcon:pd,IcLeafIcon:gd,IcLanguageIcon:_d,IcJikeIcon:vd,IcInsertBelowIcon:fd,IcInfoIcon:xd,IcImmersionModeIcon:Id,IcImageSubjectIcon:bd,IcImageStyleFillIcon:Ad,IcImageStyleIcon:yd,IcImageSparkleIcon:jd,IcImagePromptIcon:wd,IcImageFaceIcon:Sd,IcImageAddIcon:kd,IcHuoshanIcon:Md,IcHomeIcon:Cd,IcHighlighterIcon:Ed,IcHelpIcon:Nd,IcGridIcon:Td,IcGithubIcon:Ld,IcGameIcon:Pd,IcFullSpeakSlashIcon:Rd,IcFullSpeakIcon:Dd,IcFullScreenIcon:Fd,IcFreshIcon:Bd,IcForwardIcon:Od,IcFlagIcon:Ud,IcFixGrammarIcon:qd,IcFiletypeZipIcon:Hd,IcFiletypeWhiteXlsxIcon:zd,IcFiletypeWhiteTxtAndOthersIcon:Kd,IcFiletypeWhitePptxIcon:Vd,IcFiletypeWhitePdfIcon:Wd,IcFiletypeWhiteLinkIcon:Gd,IcFiletypeWhiteImageIcon:Qd,IcFiletypeWhiteDocIcon:Yd,IcFiletypeWhiteCsvIcon:$d,IcFiletypeSkillsiconWriteForMeIcon:Xd,IcFiletypeSkillsiconWebSearchIcon:Zd,IcFiletypeSkillsiconTranslatorIcon:Jd,IcFiletypeSkillsiconSummarizeWebpageIcon:eu,IcFiletypeSkillsiconPdfReaderIcon:tu,IcFiletypeSkillsiconMusicIcon:nu,IcFiletypeSkillsiconImageGenerationIcon:su,IcFiletypeOutlinePdfIcon:au,IcFiletypeGreyXlsxIcon:ou,IcFiletypeGreyTxtAndOthersIcon:iu,IcFiletypeGreyPptxIcon:ru,IcFiletypeGreyPdfIcon:lu,IcFiletypeGreyLinkIcon:cu,IcFiletypeGreyImageIcon:du,IcFiletypeGreyDocIcon:uu,IcFiletypeGreyCsvIcon:hu,IcFiletypeColorfulXlsxIcon:mu,IcFiletypeColorfulTxtAndOthersIcon:pu,IcFiletypeColorfulPptxIcon:gu,IcFiletypeColorfulPdfIcon:_u,IcFiletypeColorfulLyricIcon:vu,IcFiletypeColorfulLinkIcon:fu,IcFiletypeColorfulImageIcon:xu,IcFiletypeColorfulDocIcon:Iu,IcFiletypeColorfulCsvIcon:bu,IcFiletypeIcon:Au,IcFeedbackSuccessIcon:yu,IcFavoriteDoneIcon:ju,IcFavoriteIcon:wu,IcEyeIcon:Su,IcExtractTextIcon:ku,IcExtractIcon:Mu,IcExplainIcon:Cu,IcExpandIcon:Eu,IcExitIcon:Nu,IcErrorSmallIcon:Tu,IcErrorLargeIcon:Lu,IcEditUnderlineIcon:Pu,IcEditTextIcon:Ru,IcEditTablegridIcon:Du,IcEditStrikethroughIcon:Fu,IcEditRightIcon:Bu,IcEditReferenceIcon:Ou,IcEditOrdeListIcon:Uu,IcEditItalicIcon:qu,IcEditH3Icon:Hu,IcEditH2Icon:zu,IcEditH1Icon:Ku,IcEditDownIcon:Vu,IcEditDisordeListIcon:Wu,IcEditCodetextIcon:Gu,IcEditCodeblockIcon:Qu,IcEditCodeIcon:Yu,IcEditBoldIcon:$u,IcEditIcon:Xu,IcDragIcon:Zu,IcDownloadAppExtensionIcon:Ju,IcDownloadAppIcon:eh,IcDownloadIcon:th,IcDoneWithCircleIcon:nh,IcDoneIcon:sh,IcDocTextFillIcon:ah,IcDocTextIcon:oh,IcDocOutputIcon:ih,IcDocAddIcon:rh,IcDocIcon:lh,IcDiscoverIcon:ch,IcDelineateWordsIcon:dh,IcDeletIcon:uh,IcCropSparkleIcon:hh,IcCropIcon:mh,IcCoreIcon:ph,IcCopyIcon:gh,IcControlIcon:_h,IcCollectionIcon:vh,IcCollapseIcon:fh,IcCodeIcon:xh,IcCloudyIcon:Ih,IcCloseWithCircleIcon:bh,IcCloseIcon:Ah,IcClientDragIcon:yh,IcChevronUpSmallsizeIcon:jh,IcChevronUpIcChevronUpSmallsizeIcon:wh,IcChevronUpIcon:Sh,IcChevronRight2Icon:kh,IcChevronRightIcon:Mh,IcChevronLeft2Icon:Ch,IcChevronLeftIcon:Eh,IcChevronDownSmallsizeIcon:Nh,IcChevronDownIcon:Th,IcChevronCompactUpIcon:Lh,IcChevronCompactDownIcon:Ph,IcChevron1UpIcon:Rh,IcChevron1DownIcon:Dh,IcCheckmarkFillIcon:Fh,IcCheckWithCircleIcon:Bh,IcChatRoundIcon:Oh,IcChatIcon:Uh,IcCcIcon:qh,IcCasualIcon:Hh,IcCameraFillIcon:zh,IcCameraIcon:Kh,IcBusinessIcon:Vh,IcBrushSizeSmallIcon:Wh,IcBrushSizeLargeIcon:Gh,IcBrowserExtensionIcon:Qh,IcBoxIcon:Yh,IcBotIcon:$h,IcBookChatIcon:Xh,IcBookIcon:Zh,IcBilingualSubtitlesIcon:Jh,IcBellIcon:em,IcArrowUprightIcon:tm,IcArrowUpIcon:nm,IcArrowLeftIcon:sm,IcArrowDownIcon:am,IcArrowIcon:om,IcAppleIcon:im,IcAllThreadsFillIcon:rm,IcAllThreadsIcon:lm,IcAdjustRatioIcon:cm,IcAddBotIcon:dm,IcAddIcon:um,IcAcademicCiteIcon:hm,IcAcademicIcon:mm,IcAaIcon:pm,ZoomOutIcon:gm,ZoomInIcon:_m,WindowsIcon:vm,WhiteBackIcon:fm,WavingHandIcon:xm,VideoPlayIcon:Im,VideoPlaySmallIcon:bm,VectorIcon:Am,ValidatingIcon:ym,ValidateSuccessIcon:jm,UploadImageIcon:wm,UploadFileIcon:Sm,UploadFileDropIcon:km,UnpinnedConversationIcon:Mm,UnderscoreIcon:Cm,TranslateIcon:Em,TickIcon:Nm,ThreadActionIcon:Tm,TerminalIcon:Lm,TemplateStarIcon:Pm,SummarizeIcon:Rm,SuggestPromptsIcon:Dm,SkillHeaderCloseIcon:Fm,ShorterIcon:Bm,ShortcutWindowsIcon:Om,ShortcutIcon:Um,ShareIcon:qm,SettingsIcon:Hm,SettingErrorIcon:zm,SettingEditIcon:Km,SettingDiscordLinkIcon:Vm,SettingBlockIcon:Wm,SettingAboutIcon:Gm,SettingAboutModalIcon:Qm,SearchIcon:Ym,SearchWebIcon:$m,SearchActionIcon:Xm,SearchActionCurColorIcon:Zm,RightArrowIcon:Jm,RightSideShareIcon:ep,RightSideSettingIcon:tp,RewriteIcon:np,ReportSuccessIcon:sp,RemoveSettingIcon:ap,RemoveConversationIcon:op,RegenerateSwitchDownIcon:ip,RegenerateLeftIcon:rp,QuickAccessIcon:lp,PwaIcon:cp,ProfileSettingIcon:dp,PlusWithoutCircleIcon:up,PinnedIcon:hp,PinnedConversationIcon:mp,PinConversationIcon:pp,PenSparkleIcon:gp,PdfIcon:_p,OkIcon:vp,NowLighteningIcon:fp,NickNameSettingIcon:xp,NewConversationIcon:Ip,MoreIcon:bp,MoreAutoColorIcon:Ap,MoreActionIcon:yp,ModelSettingIcon:jp,ModalInfoIcon:wp,MicIcon:Sp,MessageFailedIcon:kp,MenuIcon:Mp,MacIcon:Cp,LongerIcon:Ep,LogoutIcon:Np,LoginIcon:Tp,LoadingInThinkingIcon:Lp,LinkIcon:Pp,LauncherIcon:Rp,LanguageSettingIcon:Dp,LanguageChangeIcon:Fp,InfoIcon:Bp,ImageSelectIcon:Op,ImageAddIcon:Up,IconMusicPlayIcon:qp,IconMusicPauseIcon:Hp,IconMusicDefaultIcon:zp,IconAttachmentOutlinedIcon:Kp,IconRefreshIcon:Vp,HistoryTimeIcon:Wp,GrammarIcon:Gp,ForbiddenIcon:Qp,FlowerLoadingIcon:Yp,FeedbackEmailIcon:$p,FavoriteIcon:Xp,ExtensionDownloadIcon:Zp,ExplainIcon:Jp,ExpandArrowIcon:eg,ErrorIcon:tg,EnterIcon:ng,EmptyLineIcon:sg,EditIcon:ag,EditMessageButtonIcon:og,EditConversationNameIcon:ig,EditConversationNameSettingIcon:rg,DownloadArrowIcon:lg,DownloadWithArrowIcon:cg,DownloadUnreadPcIcon:dg,DownloadNormalIcon:ug,DotIcon:hg,DeleteIcon:mg,DeleteOutlineIcon:pg,DeleteFileIcon:gg,DeleteCircleOutlineIcon:_g,DefaultIndexIcon:vg,DebugIcon:fg,CustomAnswerActionModalCloseIcon:xg,CursorIcon:Ig,CopyIcon:bg,CommonBtnIcon:Ag,CommonBtnActiveIcon:yg,CloseLoginIcon:jg,CloseIcon:wg,CloseSvgIcon:Sg,CloseCurColorIcon:kg,ClockArrowIcon:Mg,ClientSplitIcon:Cg,ClientSkillAddedIcon:Eg,ClientSkillAddIcon:Ng,ClientDragIcon:Tg,ClientDoneWithCircleIcon:Lg,ClientCheckmarkFillIcon:Pg,ClientSettingExtensionSettingIcon:Rg,ClientSettingClientBrowserIcon:Dg,ClearConversationIcon:Fg,ClearContextIcon:Bg,ChromeIcon:Og,CheckIcon:Ug,ChatlistDotsIcon:qg,ChatlistBotIcon:Hg,ChatListBannerLoadingIcon:zg,ChatListBannerIcon:Kg,ChatHeaderSideIcon:Vg,ChatHeaderSideCountIcon:Wg,ChatHeaderSamanthaIcon:Gg,ChatHeaderSamanthaCountIcon:Qg,ChangeToneIcon:Yg,CellPhoneIcon:$g,BrowserExtensionIcon:Xg,BotHotIcon:Zg,BotDiscoverIcon:Jg,BlueMoreIcon:e_,BlueMagicIcon:t_,BlockIcon:n_,BlackLightningIcon:s_,ArrowUpCircleIcon:a_,ArrowRightIcon:o_,ArrowRightWidth14Icon:i_,ArrowLeftIcon:r_,ArrowLeftWidth14Icon:l_,ArrowDownIcon:c_,ArrowDown2Icon:d_,AppleIcon:u_,AppleLogoIcon:h_,AppDownloadIcon:m_,AnswerVideoIcon:p_,AndroidIcon:g_,AlertTriangleIcon:__,AlbumIcon:v_,AiIcon:f_,AiGenerateIcon:x_,AiGenerateWhiteIcon:I_,AddIcon:b_,AddAvatarIcon:A_,AccountSettingIcon:y_,AboutUsIcon:j_}},30435:(e,t,n)=>{n.d(t,{FXq:()=>f,G2z:()=>C,H6p:()=>u,HXh:()=>P,Hvn:()=>m,IDX:()=>L,KsF:()=>p,QL3:()=>F,RuR:()=>b,TgH:()=>T,WGN:()=>x,Wur:()=>M,ZKw:()=>g,ZR1:()=>c,_H0:()=>_,d0t:()=>D,dTV:()=>R,eWz:()=>E,ebl:()=>A,f4X:()=>O,fkI:()=>w,fvB:()=>j,k4K:()=>h,lUW:()=>B,o40:()=>N,oZ9:()=>v,qDU:()=>y,sBK:()=>S,sTf:()=>k,st6:()=>d,xdu:()=>I});var s=n(44557),a=n(83632),o=n(94790),i=n(11855),r=n(63159);const l=i.lazy((()=>Promise.resolve().then(n.bind(n,36490)).catch((e=>(console.error("IconByKey lazy error:",e),{default:()=>null}))))),c=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcTranslateOffIcon"},t))})},d=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcSunIcon"},t))})},u=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcSnowIcon"},t))})},h=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcSkillsIcon"},t))})},m=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcSiderIcon"},t))})},p=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcShakeIcon"},t))})},g=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcSettingsIcon"},t))})},_=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcRegenerateIcon"},t))})},v=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcReadSparkleIcon"},t))})},f=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcPositionIcon"},t))})},x=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcPlusIcon"},t))})},I=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcNotificationIcon"},t))})},b=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcMoonIcon"},t))})},A=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcModifyToneIcon"},t))})},y=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcMicroIcon"},t))})},j=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcMassageIcon"},t))})},w=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcMailIcon"},t))})},S=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcLoveIcon"},t))})},k=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcLeafIcon"},t))})},M=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcFavoriteIcon"},t))})},C=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcEditIcon"},t))})},E=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcDoneIcon"},t))})},N=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcDeletIcon"},t))})},T=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcCoreIcon"},t))})},L=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcCloudyIcon"},t))})},P=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcChevronDownIcon"},t))})},R=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcCameraIcon"},t))})},D=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcBookIcon"},t))})},F=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcAllThreadsIcon"},t))})},B=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"IcAddIcon"},t))})},O=e=>{let t=(0,o.A)({},((0,a.A)(e),e));return(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(l,(0,s.A)({iconKey:"ProfileSettingIcon"},t))})}},6839:(e,t,n)=>{n.d(t,{Bo:()=>i,kf:()=>r,q3:()=>l});var s=n(49392),a=n(28159),o=n(91689);n(49196);const i=e=>(0,o.A)(e)&&e.every(a.A),r=e=>{const t=e.replace(/,/g,"");return!isNaN(t)&&!isNaN(parseFloat(t))};const l=e=>!(0,s.A)(e)},74848:(e,t,n)=>{n.d(t,{GO:()=>s,ti:()=>h});const s=e=>{var t;return(null===(t=(e||"").match(/\.([^.]+)$/))||void 0===t?void 0:t[1].toLowerCase())||""},a=e=>t=>e.includes(t),o=a(["txt"]),i=a(["csv"]),r=a(["xlsx","xls"]),l=a(["xbm","tif","pjp","svgz","jpg","jpeg","ico","tiff","gif","svg","jfif","webp","png","bmp","pjpeg","avif"]),c=a(["pdf"]),d=a(["ppt","pptx"]),u=a(["doc","docx"]),h=e=>i(e)?"CSV":c(e)?"PDF":r(e)?"Spreadsheet":l(e)?"Image":d(e)?"PPT":u(e)?"Document":o(e)?"Txt":"File"},47519:(e,t,n)=>{n.d(t,{$$:()=>s.$$,FT:()=>s.FT,hU:()=>a.h,iK:()=>s.iK,w5:()=>s.w5,wY:()=>o.w,xD:()=>s.xD});var s=n(48748),a=(n(29263),n(41936),n(33277),n(55936)),o=(n(6),n(46939),n(71219),n(93261),n(92399),n(27798),n(11776));n(89277),n(88367),n(11542),n(54987),n(56377),n(1332),n(75994),n(10340),n(46544),n(56887),n(82999)},26238:(e,t,n)=>{n.d(t,{l:()=>o,t:()=>i});var s=n(7053);const a=new(n(22352).A),o=(e,t,n,s)=>{const o=Date.now(),i={data:n,expireTime:-1!==t?o+t:t,startTime:o};a.setValue(e,i,s)},i=(e,t)=>{var n;const o=a.getValue(e,t);if(o&&(-1===(null==o?void 0:o.expireTime)||(null!==(n=null==o?void 0:o.expireTime)&&void 0!==n?n:0)>Date.now()))return(0,s.A)(o);a.removeItem(e,t)}},7613:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(10633);const a=class{constructor(e){(0,s.A)(this,"value",!1),this.value=!!e}setTrue(){this.value=!0}setFalse(){this.value=!1}isFalse(){return!this.value}isTrue(){return this.value}}},55936:(e,t,n)=>{n.d(t,{h:()=>c});var s=n(44557),a=n(33451),o=n(11855),i=n(57669),r=n(90537);const l=["ready","resetDeps","refreshDeps","itemKey","initPageSize","ref","threshold"];function c(e,t={}){const{ready:n=!0,resetDeps:c=[],refreshDeps:d=[],itemKey:u,initPageSize:h=10,ref:m,threshold:p=100}=t,g=(0,a.A)(t,l),{hasMoreHanlder:_,isNoMore:v,hasMoreHandler:f}=t;let{noMoreHandler:x}=t;x=x||f||_||v;const I=t.incrementSize||h,[b,A]=(0,o.useState)(!1),[y,j]=(0,o.useState)(1),w=(0,o.useRef)(0),S=(0,o.useRef)((new Date).getTime()),k={data:{list:[]},current:1,pageSize:h,offset:0,startTime:S.current},M="boolean"!=typeof g.auto||g.auto,[C,E]=(0,o.useState)(),N=(0,r.A)(e,(0,s.A)((0,s.A)({},g),{},{ready:n,auto:M,defaultParams:[k],requestKey:e=>{var t;return((null==e||null===(t=e.data)||void 0===t||null===(t=t.list)||void 0===t?void 0:t.length)||0)+S.current},onSuccess:(...e)=>{var n;null!=C&&null!==(n=C.list)&&void 0!==n&&n.length&&m&&m.current&&(m.current.scrollTop=0),E(void 0),A(!1),j((e=>e+1)),t.onSuccess&&t.onSuccess(...e)},onError:(...e)=>{A(!1),t.onError&&t.onError(...e)}})),{data:T,run:L,error:P,reset:R,loading:D,requests:F}=N,B=(0,o.useMemo)((()=>{let e=[],t=T||{};return Object.keys(F).sort(((e,t)=>Number(e)-Number(t))).forEach((n=>{var s;const a=F[n];var o;null!==(s=a.data)&&void 0!==s&&s.list&&(e=e.concat(null===(o=a.data)||void 0===o?void 0:o.list));a.loading||(t=a.data)})),(0,s.A)((0,s.A)({},t),{},{list:e})}),[F,T]),O=Boolean(!D&&!b&&(x?x(T,P,B):!(null!=T&&T.list.length)||T.total&&B.list.length>=T.total)),U=(0,o.useCallback)((()=>{const{list:e}=B;return{data:B,current:y,pageSize:1===y?h:I,offset:e.length,id:u&&e.length>0?((e,t)=>{const n="function"==typeof u?u(e,t):e[u];return void 0===n?t:n})(e[e.length-1],e.length-1):void 0,startTime:S.current}}),[y,h,I,B]),q=(0,o.useCallback)(((e=!1)=>{e&&E(B),R(),j(1),S.current=(new Date).getTime(),L(k)}),[L,R,B]),H=(0,o.useRef)(q);H.current=q,(0,i.A)((()=>{n&&M&&H.current()}),[...c,...d]);const z=(0,o.useCallback)(((e={})=>{if(E(void 0),O||D||b)return;A(!0);const t=U();L((0,s.A)((0,s.A)({},t),e))}),[O,D,b,L,B,U]);(0,o.useEffect)((()=>{if(null==m||!m.current)return()=>{};const e=()=>{null!=m&&m.current&&(w.current<m.current.scrollTop&&m.current.scrollHeight-m.current.scrollTop<=m.current.clientHeight+p&&z(),w.current=m.current.scrollTop)};return m.current.addEventListener("scroll",e),()=>{null!=m&&m.current&&m.current.removeEventListener("scroll",e)}}),[null==m?void 0:m.current,z]);const K=(0,o.useMemo)((()=>{var e;return null!=C&&null!==(e=C.list)&&void 0!==e&&e.length?C:B}),[C,C,B]);return(0,s.A)((0,s.A)({},N),{},{reset:H.current,current:y,data:K,reload:q,loading:D&&Boolean(null==C?void 0:C.list.length)||D&&0===B.list.length,loadMore:z,loadingMore:b,noMore:O,hasMore:O})}},46557:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(44557),a=n(10633),o=n(85886),i=n(6693),r=n(7613);const l=class{constructor(e,t,n,l){(0,a.A)(this,"options",void 0),(0,a.A)(this,"requestFn",void 0),(0,a.A)(this,"debounceFn",void 0),(0,a.A)(this,"throttleFn",void 0),(0,a.A)(this,"pollingTimer",void 0),(0,a.A)(this,"count",0),(0,a.A)(this,"unmountedFlag",new r.A),(0,a.A)(this,"that",this),(0,a.A)(this,"onChangeState",void 0),(0,a.A)(this,"state",{loading:!1,run:this.run.bind(this.that),data:void 0,error:void 0,isPolling:!1,unmountedFlag:this.unmountedFlag,cancel:this.cancel.bind(this.that),refresh:this.refresh.bind(this.that),refreshOptions:this.refreshOptions.bind(this.that),changeData:this.changeData.bind(this.that),unmount:this.unmount.bind(this.that),params:[]});const{debounceThrottleOptions:c,initData:d,debounceInterval:u,throttleInterval:h}=t;if(this.requestFn=e,this.options=t,this.onChangeState=n,this.state.data=d,l&&(this.state=(0,s.A)((0,s.A)({},this.state),l)),this.pollingTimer=void 0,void 0!==u)this.debounceFn=u?(0,i.A)(this._run.bind(this.that),u):void 0;else if(void 0!==h)this.throttleFn=h?(0,o.A)(this._run.bind(this.that),h):void 0;else if(void 0!==c){const{type:e,interval:t,leading:n="debounce"!==e,trailing:s=!0}=c;"debounce"===e?this.debounceFn=(0,i.A)(this._run.bind(this.that),t,{leading:n,trailing:s}):"throttle"===e&&(this.throttleFn=(0,o.A)(this._run.bind(this.that),t,{leading:n,trailing:s}))}}setState(e={}){this.state=(0,s.A)((0,s.A)({},this.state),e),this.onChangeState&&this.onChangeState(this.state)}cancelPolling(){void 0!==this.pollingTimer&&(window.clearTimeout(this.pollingTimer),this.pollingTimer=void 0)}dontPolling(){this.setState({isPolling:!1})}_run(...e){this.cancelPolling(),this.count+=1;const t=this.count;return this.setState({loading:!0,params:e,isPolling:Boolean(this.options.pollingInterval)}),this.requestFn(...e).then((n=>{if(this.unmountedFlag.isTrue()||t!==this.count)return;const s=this.options.formatResult?this.options.formatResult(n):n;return this.setState({loading:!1,error:void 0,data:s}),this.options.onSuccess&&this.options.onSuccess(s,e,this.dontPolling.bind(this.that)),s})).catch((n=>{if(!this.unmountedFlag.isTrue()&&t===this.count){if(this.setState({data:void 0,error:n,loading:!1}),this.options.onError&&this.options.onError(n,e,this.dontPolling.bind(this.that)),this.options.throwOnError)throw n;return n}})).finally((()=>{this.unmountedFlag.isTrue()||t!==this.count||this.options.pollingInterval&&this.state.isPolling&&(this.pollingTimer=window.setTimeout((()=>{this._run(...e)}),this.options.pollingInterval))}))}run(...e){const{debounceFn:t,throttleFn:n}=this;return this.unmountedFlag.setFalse(),t?(t(...e),Promise.resolve(null)):n?(n(...e),Promise.resolve(null)):this._run(...e)}cancel(){const{debounceFn:e,throttleFn:t,pollingTimer:n}=this;e&&e.cancel(),t&&t.cancel(),void 0!==n&&this.cancelPolling(),this.count+=1,this.setState({loading:!1,isPolling:!1})}unmount(){this.unmountedFlag.setTrue(),this.cancel()}refresh(){return this.unmountedFlag.setFalse(),this.run(...this.state.params)}refreshOptions(e={}){return this.options=(0,s.A)((0,s.A)({},this.options),e),this.run(...this.state.params)}changeData(e){"function"==typeof e?this.setState({data:e(this.state.data)||{}}):this.setState({data:e})}}},90537:(e,t,n)=>{n.d(t,{A:()=>u});var s=n(44557),a=n(11855),o=n(57669),i=n(46557),r=n(7613),l=n(26238),c=n(33609);const d="_BYTED_HOOKS_DEFAULT_KEY_",u=(e,t={})=>{var n,u,h,m;const{staleTime:p=3e5}=t,{auto:g=!1,defaultParams:_=[],refreshDeps:v=[],initData:f,ready:x=!0,cacheKey:I,cacheStoreType:b="memory",cacheTime:A=3e5,loadingCheck:y=!1,errorCheck:j=!1,formatResult:w,requestKey:S,onError:k,onSuccess:M}=t,C=(0,c.A)(e),E=(0,c.A)(M),N=(0,c.A)(k),T=w?(0,c.A)(w):void 0,L=(0,c.A)(S),P=(0,a.useCallback)(((e,t)=>{q((n=>(0,s.A)((0,s.A)({},n),{},{[e]:t})))}),[]),R=(0,a.useRef)(I);R.current=I;const D=(0,a.useRef)(b);D.current=b;const F=(0,a.useRef)(x);F.current=x;const B=(0,a.useRef)(d),O=()=>{if(R.current){const{data:e,startTime:n=0}=(0,l.t)(R.current,D.current)||{},a=-1===p||(new Date).getTime()-n<=p;if(e&&a){B.current=e.currentRequestKey;const n={};return Object.keys(e.requests).forEach((a=>{const o=e.requests[a],r=new i.A(C,(0,s.A)((0,s.A)({},t),{},{onSuccess:E,onError:N,formatResult:T}),P.bind(null,a),{loading:o.loading,params:o.params,data:o.data,error:o.error});n[a]=r.state})),n}return{}}return{}},[U,q]=(0,a.useState)((()=>O())),H=(0,a.useRef)(U);H.current=U;const z=(0,a.useRef)(),K=(0,a.useCallback)(((...e)=>{if(!x)return void(z.current=e);let n;if(S){const t=L(...e);B.current=t,n=H.current[t]}else n=H.current[B.current];if(!n){const n=new i.A(C,(0,s.A)((0,s.A)({},t),{},{onSuccess:E,onError:N,formatResult:T}),P.bind(null,B.current)).state;return q((e=>(0,s.A)((0,s.A)({},e),{},{[B.current]:n}))),n.run(...e)}return n.run(...e)}),[S,x]);(0,o.A)((()=>{R.current&&(0,l.l)(R.current,A,{requests:U,currentRequestKey:B.current},D.current)}),[U]);const V=(0,a.useCallback)((()=>{Object.values(H.current).forEach((e=>{e.unmount()})),B.current=d,q({}),H.current={}}),[q]),W=(0,a.useRef)(!1);(0,o.A)((()=>{x&&(!W.current&&z.current&&K(...z.current),W.current=!0)}),[x]),(0,a.useEffect)((()=>{if(x&&g){const e=O();Object.keys(e).length>0?Object.values(U).forEach((e=>{e.refresh()})):K(..._)}return()=>{Object.values(H.current).forEach((e=>{e.unmount()}))}}),[x]),(0,o.A)((()=>{if(F.current&&g){const e=O();0===Object.keys(e).length?Object.values(U).forEach((e=>{e.refresh()})):q(e)}}),[...v]);const G=[t.debounceInterval,t.throttleInterval,null===(n=t.debounceThrottleOptions)||void 0===n?void 0:n.type,null===(u=t.debounceThrottleOptions)||void 0===u?void 0:u.interval,null===(h=t.debounceThrottleOptions)||void 0===h?void 0:h.leading,null===(m=t.debounceThrottleOptions)||void 0===m?void 0:m.trailing,t.pollingInterval];let Q;if((0,o.A)((()=>{Object.values(U).forEach((e=>{e.unmountedFlag.isTrue()||(void 0!==t.debounceInterval?e.refreshOptions({debounceInterval:t.debounceInterval,pollingInterval:t.pollingInterval}):void 0!==t.throttleInterval?e.refreshOptions({throttleInterval:t.throttleInterval,pollingInterval:t.pollingInterval}):e.refreshOptions({debounceThrottleOptions:t.debounceThrottleOptions,pollingInterval:t.pollingInterval}))}))}),[...G]),Q=U[B.current]?(0,s.A)((0,s.A)({},U[B.current]),{},{run:K,reset:V,requests:U}):{loading:g&&x,isPolling:!1,data:f,error:void 0,unmountedFlag:new r.A,params:[],cancel:()=>{},unmount:()=>{},reset:()=>{},refresh:()=>{},refreshOptions:()=>{},changeData:()=>{},run:K,requests:U},"undefined"!=typeof Proxy){const e=!y,t=!j;return new Proxy(Q,{get:(n,s)=>("data"===s&&(e||console.warn("You need to check loading before using data"),t||console.warn("You need to check error before using data")),n[s])})}return Q}},33609:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(11855);const a=function(e){const t=(0,s.useRef)();return t.current=(0,s.useMemo)((()=>e),[e]),(0,s.useCallback)(((...e)=>{const n=t.current;return null==n?void 0:n(...e)}),[t])}},44644:(e,t,n)=>{n.d(t,{$$z:()=>c.$$,Asr:()=>d.A,BKw:()=>u.BK,Bog:()=>s.Bo,FTe:()=>c.FT,F_u:()=>r.F_,MaB:()=>r.M,OlY:()=>a.O,V8t:()=>l.V8,Z57:()=>r.Z5,bV$:()=>o.bV,e4x:()=>a.e,hUb:()=>c.hU,iKL:()=>c.iK,jco:()=>r.jc,kf$:()=>s.kf,p_C:()=>h.p,puP:()=>o.pu,q3w:()=>s.q3,tHN:()=>i.tH,tSJ:()=>o.tS,tsJ:()=>i.ts,w5E:()=>c.w5,wYm:()=>c.wY,xDQ:()=>c.xD,zVE:()=>o.zV});var s=n(6839),a=n(62396),o=(n(24608),n(50655),n(26368)),i=n(26007),r=n(91865),l=n(65117),c=(n(48317),n(47519)),d=(n(78449),n(23482),n(23241)),u=n(38805),h=(n(74848),n(55699),n(10448),n(36352))},26368:(e,t,n)=>{n.d(t,{bV:()=>o,pu:()=>i,tS:()=>s,zV:()=>a});const s=e=>new Promise(((t,n)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=function(){var e,n;t(null!==(e=null===(n=s.result)||void 0===n?void 0:n.toString())&&void 0!==e?e:"")},s.onerror=function(e){n(e)}})),a=(e,t="",n=512)=>{var s;const a=null!==(s=e.split(",")[1])&&void 0!==s?s:e,o=atob(a),i=[];for(let r=0;r<o.length;r+=n){const e=o.slice(r,r+n),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);const s=new Uint8Array(t);i.push(s)}return new Blob(i,{type:t})},o=(e,t=0)=>new Promise((n=>{const s=document.createElement("video");s.setAttribute("src",URL.createObjectURL(e)),s.load(),s.addEventListener("error",(e=>{console.error("Error when get video cover: ",e),n(null)})),s.addEventListener("loadedmetadata",(()=>{s.duration<t?n(null):(setTimeout((()=>{s.currentTime=t}),200),s.addEventListener("seeked",(()=>{const e=document.createElement("canvas");e.width=s.videoWidth,e.height=s.videoHeight;const t=e.getContext("2d");t?(t.drawImage(s,0,0,e.width,e.height),t.canvas.toBlob((e=>{n(e)}),"image/jpeg",.75)):n(null)})))}))})),i=e=>e.startsWith("video/")},91865:(e,t,n)=>{n.d(t,{F_:()=>o,M:()=>i,Z5:()=>r,jc:()=>a});n(7685);let s;const a=()=>{if(void 0===s){const{userAgent:e}=navigator,t=/iPad/.test(e),n=e.includes("Macintosh")&&"ontouchstart"in document.documentElement;s=t||n}return s},o=()=>"function"==typeof window.webkitConvertPointFromNodeToPage;const i="undefined"!=typeof window,r=()=>{if("undefined"==typeof navigator)return;const e=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/);if(null===e||5!==e.length)return;const[,t,n,s,a]=e.map((e=>parseInt(e,10)));return{major:t,minor:n,build:s,patch:a}}},26007:(e,t,n)=>{n.d(t,{tH:()=>i,ts:()=>a});var s=n(14065);n(11855);const a=(e,t=3,n=1e3)=>new Promise(((s,o)=>{e().then(s).catch((i=>{setTimeout((()=>{1!==t?a(e,t-1,n).then(s,o):o(i)}),n)}))})),o=e=>new Promise((t=>{setTimeout(t,e)})),i=function(){var e=(0,s.A)((function*(e,t,n,s){for(let i=0;i<t;i++){const r=i+1;try{return yield e()}catch(a){if(r>=t)throw a;null==s||s(a,i)}const l="number"==typeof n?n:n(r);yield o(l)}throw Error("retry times out of limit")}));return function(t,n,s,a){return e.apply(this,arguments)}}()},50655:(e,t,n)=>{n.d(t,{Tw:()=>s});n(42579);const s=()=>{try{var e;return null===(e=window)||void 0===e||null===(e=e.performance)||void 0===e?void 0:e.now()}catch(t){return Date.now()}}},78449:(e,t,n)=>{n.d(t,{OM:()=>s,ax:()=>a});n(80160);function s(){return/youtube/.test(location.hostname)?!!location.pathname.startsWith("/watch"):!!/bilibili/.test(location.hostname)&&!!location.pathname.startsWith("/video/")}function a(){return!!/bilibili/.test(location.hostname)&&location.pathname.startsWith("/festival/")}}},n={};function s(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=t,e=[],s.O=(t,n,a,o)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,a,o]=e[d],r=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(r=!1,o<i&&(i=o));if(r){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,a,o]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.p="/",(()=>{var e={575:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[i,r,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var d=l(s)}for(t&&t(n);c<i.length;c++)o=i[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},n=self.webpackChunkflow_web_extension=self.webpackChunkflow_web_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),s.O(void 0,[356,551,995,35,256,520,223,389,629],(()=>s(48704)));var a=s.O(void 0,[356,551,995,35,256,520,223,389,629],(()=>s(29642)));a=s.O(a);