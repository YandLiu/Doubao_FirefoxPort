(self.webpackChunkflow_web_extension=self.webpackChunkflow_web_extension||[]).push([[389],{2248:(e,t,n)=>{n.d(t,{O:()=>i,fv:()=>r,nr:()=>o});const o=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=()=>{var e;return(null===(e=Intl)||void 0===e||null===(e=e.DateTimeFormat())||void 0===e||null===(e=e.resolvedOptions())||void 0===e?void 0:e.timeZone)||""},r=()=>{try{return Boolean(getComputedStyle(document.documentElement||document.body).getPropertyValue("--arc-palette-title"))}catch(e){return!1}}},13959:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(11855);function i(e){const t=(0,o.useRef)(null),n=n=>{var o;const i=null===(o=n.composedPath)||void 0===o?void 0:o.call(n);i&&t.current&&!i.includes(t.current)&&e(n)};return(0,o.useEffect)((()=>(document.addEventListener("pointerdown",n),()=>{document.removeEventListener("pointerdown",n)})),[]),t}},13748:(e,t,n)=>{n.d(t,{c:()=>l});var o=n(14065),i=n(10633),r=n(91689),s=n(43423);const a=new class{constructor(){var e,t;(0,i.A)(this,"handlers",{}),(0,i.A)(this,"interceptors",[]),null===(e=chrome)||void 0===e||null===(e=e.runtime)||void 0===e||null===(e=e.onMessage)||void 0===e||null===(t=e.addListener)||void 0===t||t.call(e,this.onMessage.bind(this)),this.interceptors=[],this.handlers={}}onMessage(e,t,n){let i=!1;this.interceptors.forEach((o=>{i=i||Boolean(o.onMessage(e,t,n))}));const r=this.handlers[e.name];var a;return(0,s.Rm)(`[runtime] onMessage -> [${e.name}][${r?"yes":"no"}] `,e.body||""),!!r&&(!r.preCheck||null!==(a=r.preCheck)&&void 0!==a&&a.call(r,t)?((0,o.A)((function*(){try{const o=yield r.handle(e.body,t);n(o)}catch(o){n({__hasError:!0,errorMessage:`${o.message}[${e.name}]`})}}))(),!0):i)}supportExternal(){var e,t;null===(e=chrome)||void 0===e||null===(e=e.runtime)||void 0===e||null===(e=e.onMessageExternal)||void 0===e||null===(t=e.addListener)||void 0===t||t.call(e,this.onMessage.bind(this))}register(e){const{name:t}=e||{};t&&(this.handlers[t]&&(0,s.z3)(`[runtime] handler name[${t}] duplicated !`),(0,s.Rm)(`[runtime] register handler for event: [${t}]`),this.handlers[t]=e)}unregister(e){delete this.handlers[e]}injectInterceptor(e){this.interceptors.push(e)}destroy(){this.handlers={},this.interceptors=[];try{chrome.runtime.onMessage.removeListener(this.onMessage)}catch(e){}}},l=e=>{const t=(0,r.A)(e)?e:[e];return t.forEach((e=>{a.register(e)})),()=>{t.forEach((e=>{a.unregister(e.name)}))}}},38671:(e,t,n)=>{n.d(t,{jB:()=>i});n(11855);window.location.href;const o={youtube:/^https:\/\/www.youtube.com\/watch\?/,bilibili:/^https:\/\/www\.bilibili\.com\/video\/\w+/},i=e=>!!e&&o[e].test(location.href)},95428:(e,t,n)=>{n.d(t,{g:()=>l});var o=n(16604),i=n(305),r=n(66006),s=n(71905),a=n(99824);function l(e){const t=(0,o.wz)((0,s.TK)("inputAssistantLang")),n={skill_name:"rewrite",template_type:e.template_type};e.adjust&&(n.adjust=e.adjust),e.tone&&(n.tone=e.tone);return r.P.getState().sendMessage({text:e.text,scene:e.scene||i.sJ.writing_assistant,sec_scene:e.sec_scene,prompt:a.EU.adjust_skill,replyLang:e.lang?e.lang:t,browser_plugin_info:JSON.stringify(n)})}},31525:(e,t,n)=>{n.d(t,{A:()=>l,m:()=>a});var o,i=n(10633),r=n(71905),s=n(58735);class a{static getInstance(){return a._instance}init(){void 0===this._hostId&&(this._hostId=(0,r.TK)("hostId"),this._listenBrandInfoMessage(),this._listenStoreMessage(),this._sendHostIdMessage(),this._sendBrandInfo(),this._listenHostIdMessage())}registerRecyclable(e){this._recyclables.push(e)}registerRecyclables(e){e.forEach((e=>{e&&this._recyclables.push(e)}))}registerStore(e,t){this._stores.set(e,t)}getHostId(){return this._hostId}constructor(){(0,i.A)(this,"_recyclables",[]),(0,i.A)(this,"_stores",new Map),(0,i.A)(this,"_hostId",void 0),(0,i.A)(this,"_listenHostIdMessage",(()=>{window.addEventListener("message",this._hostIdMessageHandler)})),(0,i.A)(this,"_listenStoreMessage",(()=>{window.addEventListener("message",this._storeMessageHandler)})),(0,i.A)(this,"_listenBrandInfoMessage",(()=>{window.addEventListener("message",this._brandInfoMessageHandler)})),(0,i.A)(this,"_hostIdMessageHandler",(e=>{var t,n,o,i;void 0!==(null==e||null===(t=e.data)||void 0===t?void 0:t.brand)&&(null==e||null===(n=e.data)||void 0===n?void 0:n.brand)!==s.R3||void 0!==(null==e||null===(o=e.data)||void 0===o?void 0:o.hostId)&&(null==e||null===(i=e.data)||void 0===i?void 0:i.hostId)!==this._hostId&&(window.removeEventListener("message",this._hostIdMessageHandler),this._destory())})),(0,i.A)(this,"_brandInfoMessageHandler",(e=>{var t;null!=e&&null!==(t=e.data)&&void 0!==t&&null!==(t=t.extensionReq)&&void 0!==t&&t.requireExtensionInfo&&this._sendBrandInfo(e.origin)})),(0,i.A)(this,"_storeMessageHandler",(e=>{var t,n,o;if(void 0!==(null==e||null===(t=e.data)||void 0===t?void 0:t.brand)&&(null==e||null===(n=e.data)||void 0===n?void 0:n.brand)!==s.R3)return;if(void 0===(null==e||null===(o=e.data)||void 0===o?void 0:o.storeData))return;const i=JSON.parse(e.data.storeData);Object.keys(i).forEach((e=>{const t=this._stores.get(e);t&&t.setState(JSON.parse(i[e]))}))})),(0,i.A)(this,"_sendStoreData",(()=>{const e={};this._stores.forEach(((t,n)=>{e[n]=JSON.stringify(t.getState())}));const t=JSON.stringify(e);window.postMessage({storeData:t}),this._stores.clear()}))}_sendHostIdMessage(){window.postMessage({hostId:this._hostId,brand:s.R3})}_sendBrandInfo(e="*"){const t={brandName:s.R3,version:chrome.runtime.getManifest().version};window.postMessage({extensionRes:t},e)}_destory(){window.removeEventListener("message",this._storeMessageHandler),window.removeEventListener("message",this._brandInfoMessageHandler),this._sendStoreData(),this._recyclables.forEach((e=>{try{"function"==typeof e?e():"function"==typeof(null==e?void 0:e.destory)&&e.destory()}catch(t){console.error("\u6267\u884cdestroy\u5931\u8d25 ",t)}})),this._recyclables=[]}}function l(e){a.getInstance().registerRecyclable(e)}o=a,(0,i.A)(a,"_instance",new o)},89369:(e,t,n)=>{n.d(t,{BB:()=>p,OB:()=>u});var o=n(44557),i=(n(11855),n(41967)),r=n(98028),s=n(71905),a=n(99824),l=n(43423),d=n(30065),c=(n(9584),n(30457));const h="onboardingActionRecord",u=(e,t="web")=>{switch(e){case a.EU.ask:return`${t}_ask`;case a.EU.mail:return`${t}_gmail`;default:return`${t}_${e}`}},m=e=>{const{action:t}=e;if(t){if(!r.bc.includes(t))return!0;const n=(({action:e,update:t,record:n})=>{if(r.fW.includes(e)){var o;let i=Number((null===(o=n||(0,s.TK)(h))||void 0===o||null===(o=o[e])||void 0===o?void 0:o.count)||0);return t&&(i++,(0,l.Rm)(`action ${e} used count: ${i}`),(0,s.vE)(h,{[e]:{count:i}},!0)),i}{const t=new Error(`action [${e}] not found in predefined keys`);d.vF.persist.error({eventName:"[Onboarding Action] not found action",error:t}),(0,l.z3)(t)}})((0,o.A)((0,o.A)({},e),{},{action:t}));if((0,i.A)(n)&&n<=r.C9[t])return!0}return!1},p=e=>{const{action:t,triggerLogin:n=!0,loginParams:o}=e,i=(0,s.TK)("authInfo");if(!(null!=i&&i.isAuthenticated||m({action:t,update:!0})))return n&&(0,c.DT)(o),!0}},26903:(e,t,n)=>{n.d(t,{I:()=>s});var o=n(30457),i=n(71905),r=n(39275);const s=e=>{(0,i.TK)("authInfo").isAuthenticated?(0,r.cs)({name:"open-options-page",body:e}):(0,o.DT)()}},8050:(e,t,n)=>{n.d(t,{gR:()=>c,zl:()=>u});var o=n(54483),i=n(48544),r=n(36729),s=n(305),a=n(30065);const l=e=>e&&e!==o.g6.webOther?e:window.location.host,d=e=>{var t;null===(t=i.Ay.Tea)||void 0===t||t.event(o.Ur.viewDAU,{current_page:l(null==e?void 0:e.current_page),show_from:null==e?void 0:e.show_from})},c=(e,t)=>e===o.Ur.enterPage&&(null==t?void 0:t.current_page)===o.g6.chat?(t.show_from="enter_page_chat",void d(t)):e===o.Ur.showMailEntryButton||e===o.Ur.writingSkilShow?(t.show_from=t.show_from||e,void d(t)):e===o.Ur.showSelectAssistantMenu||e===o.Ur.showSearchAssistant||e===o.Ur.showVideoAssistant||e===o.Ur.showChatAssistant||e===o.Ur.collectionButtonShow?(t.show_from=e,void d(t)):e===o.Ur.linkPreviewEntryShow||e===o.Ur.linkPreviewResultShow?(t.show_from=o.Z5.searchResultPreview,void d(t)):void 0,h=e=>{var t;null===(t=i.Ay.Tea)||void 0===t||t.event(o.Ur.activeDAU,{current_page:l(null==e?void 0:e.current_page),button_name:null==e?void 0:e.button_name,click_from:null==e?void 0:e.click_from})},u=(e,t)=>e!==o.Ur.copy&&e!==o.Ur.regenerate&&e!==o.Ur.continueInChat&&e!==o.Ur.retry||(null==t?void 0:t.click_from)!==o.Z5.selectAssistantResult?(null==t?void 0:t.click_from)===o.Z5.deepSearchMode||e===o.Ur.searchResultCardClick||e===o.Ur.clickDeepSearchBtn?(t.click_from=o.Z5.searchAssistant,void h(t)):t.click_from!==s.sJ.writing_assistant?e===o.Ur.copy||e===o.Ur.regenerate||e===o.Ur.continueInChat||e===o.Ur.retry||e===o.Ur.clickSearchAssistantSuggest?(null===t.click_from&&a.vF.persist.log({eventName:"NULL_CLICK_FROM_EVENT",meta:{event_name:e,params:t}}),void h(t)):e===o.Ur.clickSelectAssistantMenuBtn||e===o.Ur.clickSelectAssistantResultBtn?(t.click_from=o.Z5.selectAssistantMenu,void h(t)):e!==o.Ur.clickVideoAssistantSummarizeBtn||t.click_from!==r.K.IMMERSION_BTN&&t.click_from!==r.K.UPPER_RIGHT&&t.click_from!==r.K.ONBOARDING?e===o.Ur.clickVideoImmersionGuideTips||e===o.Ur.clickVideoImmersionGuideIcon||e===o.Ur.immersionTimeLine?(t.click_from=o.Z5.videoAssistant,void h(t)):e===o.Ur.clickChatAssistantPopoverSettings||e===o.Ur.clickChatAssistantPopover&&((null==t?void 0:t.button_name)===o._h.translatePage||(null==t?void 0:t.button_name)===o._h.summarizePage||(null==t?void 0:t.button_name)===o._h.languageSettings)?(t.click_from=o.Z5.chatAssistantPopover,void h(t)):e===o.Ur.sendMessage&&(null==t?void 0:t.current_page)===o.g6.chat?(t.click_from=o.Z5.sendMessageInChat,void h(t)):e===o.Ur.clickMailEntryButton?(t.click_from=o.Z5.mailEntryButton,void h(t)):e===o.Ur.collectionButtonClickSave?(t.click_from=o.Z5.collect,void h(t)):e===o.Ur.linkPreviewEntryShow||e===o.Ur.linkPreviewResultShow?(t.click_from=o.Z5.searchResultPreview,void h(t)):void 0:(t.click_from=o.Z5.videoAssistant,void h(t)):void h(t):(t.click_from=o.Z5.selectAssistantMenu,void h(t))},9462:(e,t,n)=>{n.d(t,{c$:()=>i.c$,lG:()=>o.l,th:()=>i.th});var o=n(16897),i=n(99301)},72969:(e,t,n)=>{n.d(t,{Ws:()=>d});var o=n(44557);(()=>{let e=null})();var i=n(10633);const r=["width","height","max-width","max-height","min-width","min-height","padding-top","padding-bottom","padding-left","padding-right","border","box-sizing","line-height","text-indent","text-align","font-size","font-family","font-weight","font-style","font-variant","letter-spacing","white-space","word-spacing","word-wrap","word-break","position","overflow"],s=class{getStyles(e,t=r){const n=window.getComputedStyle(e),o={};return t.map((t=>{const i=function(e,t=["-","_"]){let n=[],o=0,i=new Set(t);for(;o<e.length;)i.has(e[o])?(n.push(e[o+1].toUpperCase()),o++):n.push(e[o]),o++;return n.join("")}(t),r=n.getPropertyValue(t);if(["width","height"].includes(t)&&"auto"===r){const t=e.getBoundingClientRect();o[i]=`${t[i]}px`}else["max-width","max-height","min-width","min-height"].includes(t)?o[i]=this.convertPercentToPx(e,t,r):o[i]=r})),o}getStyle(e,t){return window.getComputedStyle(e).getPropertyValue(t)}getCssText(e,t=r){const n=window.getComputedStyle(e);return t.map((t=>{const o=n.getPropertyValue(t);if(["width","height"].includes(t)&&"auto"===o){return`${t}: ${e.getBoundingClientRect()[t]}px`}return["max-width","max-height","min-width","min-height"].includes(t)?`${t}: ${this.convertPercentToPx(e,t,o)}`:`${t}: ${o}`})).join(";")}getFontStyles(e){const t=window.getComputedStyle(e);return{fontFamily:t.getPropertyValue("font-family"),fontSize:parseFloat(t.getPropertyValue("font-size")),fontWeight:parseFloat(t.getPropertyValue("font-weight")),lineHeight:parseFloat(t.getPropertyValue("line-height"))}}getContentBox(e){return{width:e.scrollWidth,height:e.scrollHeight}}getScrollbarWidth(e){const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("border-left-width"))||0,o=parseFloat(t.getPropertyValue("border-right-width"))||0;return e.offsetWidth-e.clientWidth-n-o}convertPercentToPx(e,t,n){if(!n.includes("%"))return n;const o=parseFloat(n)/100,i=e.parentElement;if(!i)return"none";let r=window.getComputedStyle(i),s=parseFloat(r.getPropertyValue("width")),a=parseFloat(r.getPropertyValue("height")),l=r.getPropertyValue("box-sizing"),d=parseFloat(r.getPropertyValue("border-width")),c=parseFloat(r.getPropertyValue("padding-left")),h=parseFloat(r.getPropertyValue("padding-right")),u=parseFloat(r.getPropertyValue("padding-top")),m=parseFloat(r.getPropertyValue("padding-bottom")),p=s,g=a;return"border-box"===l&&(p=s-c-h-2*d,g=a-u-m-2*d),t.includes("height")?g*o+"px":p*o+"px"}},a=class{constructor(){if((0,i.A)(this,"nodeId","-aichat-mirrorTextNode"),(0,i.A)(this,"mirrorTextNode",void 0),(0,i.A)(this,"domMeasurement",new s),(0,i.A)(this,"mirrorContainer",void 0),!document)throw new Error("TextareaMeasurement can only be run under DOM environment");this.initMirrorTextarea()}measureText(e,t,n){const o=this.domMeasurement.getStyle(e,"display"),i=this.domMeasurement.getCssText(e);return this.mirrorTextNode.style.cssText=i,"inline"===o&&(this.mirrorTextNode.style.textAlign="initial"),this.mirrorTextNode.innerHTML=t.split("").map((e=>`<span>${e}</span>`)).join(""),this.doMeasureText({element:e,display:o,text:t,index:n})}loadElement(e,t){let n=this.domMeasurement.getStyle(e,"display"),o=parseFloat(this.domMeasurement.getStyle(e,"width"))-this.domMeasurement.getScrollbarWidth(e),i=this.domMeasurement.getCssText(e);return i+=`; height: auto; max-height: none; width: ${o}px; overflow: hidden;`,"inline"===n&&(i+="; text-align: initial"),this.mirrorTextNode.style.cssText=i,this.mirrorTextNode.innerHTML=t.split("").map((e=>`<span>${e}</span>`)).join(""),{measureText:o=>this.doMeasureText({element:e,display:n,text:t,index:o})}}destroy(){this.mirrorContainer.remove()}doMeasureText(e){const{element:t,display:n,index:o,text:i}=e;if(o<0||o>i.length-1)throw new Error(`char indexing(index: ${o})overflowed, allowed range:0 - ${i.length-1}`);let r=this.mirrorTextNode.querySelector(`span:nth-child(${o+1})`),{offsetLeft:s,offsetTop:a,offsetHeight:l,offsetWidth:d}=r,c=0;if("inline"===n){const e=this.mirrorTextNode.querySelector("span:nth-child(1)");e&&(c=e.offsetTop)}let h=a,u=s;if("\n"===i[o]&&o===i.length-1){h+=parseFloat(this.domMeasurement.getStyle(t,"line-height")),u=0}return{left:u,right:u+d,top:h,bottom:h+l,width:d,height:l,deviation:c}}initMirrorTextarea(){const e=document.createElement("div");this.mirrorContainer=e,e.setAttribute("contenteditable","false"),e.id=this.nodeId,e.style.position="absolute",e.style.width="0px",e.style.height="0px",e.style.overflow="hidden",document.body.appendChild(e);const t=e.shadowRoot||e.attachShadow({mode:"open"});if(!this.mirrorTextNode){const e=document.createElement("div");e.className="mirror-text-container",t.appendChild(e),this.mirrorTextNode=e,this.mirrorTextNode.style.display="block"}}},l=(new class{getSelectionRect(e){if(!e.collapsed){const t=e.getBoundingClientRect();if(0!==t.width||0!==t.height)return t}const t=e.startContainer;if(t instanceof HTMLElement){const n=t.childNodes[e.startOffset];if(n&&this.isBasicInput(n)){const e=this.getSelectionRectForBasicInputV2(n);return e.left=Math.round(e.left),e.right=Math.round(e.right),e.top=Math.round(e.top),e.bottom=Math.round(e.bottom),e.width=Math.round(e.width),e.height=Math.round(e.height),e}}return null}getSelectedText(e){if(e.commonAncestorContainer.nodeType===Node.TEXT_NODE){const t=a(e.commonAncestorContainer.parentElement);return t.selectable?s(t.whiteSpaceType,e.commonAncestorContainer.textContent.slice(e.startOffset,e.endOffset).trim()):""}if(e.startContainer instanceof HTMLElement){const t=e.startContainer.childNodes[e.startOffset];if(t&&this.isBasicInput(t)){if(!a(t).selectable)return"";const{selectionStart:e,selectionEnd:n}=t;return t.value.slice(e,n).trim()}}let t,n=[],o=!1,i=!1,r=(t,l)=>{t.nodeType===Node.TEXT_NODE?function(t,r){function a(e){return s(r.whiteSpaceType,e)}t===e.startContainer&&(o=!0),o&&t.nodeType===Node.TEXT_NODE&&r.selectable&&(t===e.startContainer&&t===e.endContainer?n.push({content:a(t.textContent.slice(e.startOffset,e.endOffset))}):t===e.startContainer?n.push({content:a(t.textContent.slice(e.startOffset))}):t===e.endContainer?n.push({content:a(t.textContent.slice(0,e.endOffset))}):n.push({content:a(t.textContent)})),t===e.endContainer&&(i=!0)}(t,l):t.nodeType===Node.ELEMENT_NODE&&function(t){if(t===e.startContainer&&(o=!0),t===e.endContainer)return void(i=!0);const s=a(t);s.selectable&&n.push({content:" "});for(const e of t.childNodes)if(r(e,s),i)break;s.selectable&&(function(e,t){return"BR"===e.tagName||!t.display.startsWith("inline")}(t,s.style)?n.push({content:"\n"}):n.push({content:" "}))}(t)};return t=e.commonAncestorContainer instanceof HTMLElement?a(e.commonAncestorContainer):a(e.commonAncestorContainer.parentElement),r(e.commonAncestorContainer,t),n.map((e=>e.content)).join("").trim().split("\n").map((e=>e.trim())).join("\n").replace(/\n\n+/g,"\n\n").replace(/  +/g," ");function s(e,t){return"normal"===e?t.split("\n").map((e=>e.trim())).join(""):"keepNewLine"===e?t.split("\n").map((e=>e.trim())).join("\n"):t}function a(e){const t=getComputedStyle(e);if("SCRIPT"===e.tagName||"STYLE"===e.tagName||"none"===t.userSelect||"0"===t.opacity||"none"===t.display||"hidden"===t.visibility)return{style:t,selectable:!1,whiteSpaceType:"normal"};let n;return n="pre-line"===t.whiteSpace?"keepNewLine":t.whiteSpace.startsWith("pre")||"break-spaces"===t.whiteSpace?"keepNewLineAndSpace":"normal",{style:t,selectable:!0,whiteSpaceType:n}}}isBasicInput(e){return e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement}getSelectionRectForBasicInputV2(e){const t=e.getBoundingClientRect(),n=e.selectionStart,o=e.selectionEnd-1,i=e.scrollTop,r=e.value,s=new a,{measureText:l}=s.loadElement(e,e.value),d=l(n),c=l(o);if(d.top===c.top)return s.destroy(),{left:t.left+d.left,right:t.left+c.left,top:t.top+d.top-i,bottom:t.top+c.bottom,width:c.left-d.left,height:c.bottom-d.top};let h="",u="",m=n,p=n;for(let a=n;a<=o;a++){const e=r[a];"\n"===e||a===o?(u.length>h.length&&(h=u,m=p),u="",p=a+1):u+=e}const g=l(m),f=l(m+h.length);if(g.top!==f.top)return s.destroy(),{left:t.left,right:t.right,top:t.top+d.top-i,bottom:t.top+c.bottom,width:t.width,height:c.bottom-d.top};const v=Math.min(d.left,c.left,g.left,f.left),w=Math.max(d.left,c.left,g.left,f.left);return s.destroy(),{left:t.left+v,right:t.left+w,top:t.top+d.top-i,bottom:t.top+c.bottom,width:w-v,height:c.bottom-d.top}}},{top:NaN,left:NaN,bottom:NaN,right:NaN,height:NaN,width:NaN,clientBottom:NaN}),d=(0,o.A)({text:"",contextText:"",range:null},l)},11776:(e,t,n)=>{n.d(t,{w:()=>l});var o=n(49392),i=n(9388),r=n(11855),s=n(37517),a=n(97785);"undefined"==typeof window||window.ResizeObserver||(window.ResizeObserver=a.tb);const l=(e={})=>{const{ref:t,onlyBothNilIsFirstScreen:n=!0,onResize:a}=e,l=(0,r.useRef)(null),d=null!=t?t:l,[c,h]=(0,r.useState)(),[u,m]=(0,r.useState)();(0,r.useLayoutEffect)((()=>{p()}),[]),(0,r.useLayoutEffect)((()=>{(0,o.A)(c)||(0,o.A)(u)||null==a||a({width:c,height:u})}),[c,u]);const p=()=>{if(d.current){const{width:e,height:t}=d.current.getBoundingClientRect();h(e),m(t)}else h(void 0),m(void 0)},{width:g,height:f}=(0,s.A)({ref:d,onResize:e=>{null==a||a(e);const{width:t,height:n}=e;(0,i.flushSync)((()=>{h(null!=t?t:0),m(null!=n?n:0)}))}});(0,r.useLayoutEffect)((()=>{h(void 0)}),[g]),(0,r.useLayoutEffect)((()=>{m(void 0)}),[f]);const v=n&&(0,o.A)(g)&&(0,o.A)(f);return{ref:d,width:null!=c?c:v?void 0:null!=g?g:0,height:null!=u?u:v?void 0:null!=f?f:0,refresh:p}}}}]);