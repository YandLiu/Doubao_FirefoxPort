window.__assetPrefix__="",(()=>{function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(r){var t=function(r,t){if("object"!==e(r)||null===r)return r;var o=r[Symbol.toPrimitive];if(void 0!==o){var n=o.call(r,t||"default");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"===e(t)?t:String(t)}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}var o,n;null===(o=globalThis.chrome)||void 0===o||o.runtime,null===(n=globalThis.chrome)||void 0===n||n.tabs;function i(e){return new Promise(((r,t)=>{const o=new FileReader;o.onload=function(e){var t;r((null===(t=e.target)||void 0===t?void 0:t.result)||"")},o.onerror=function(e){t(e)},o.readAsDataURL(e)}))}let a=function(e){return e[e.Capture_Video_Failed=1]="Capture_Video_Failed",e[e.Blob_To_Base64_Failed=2]="Blob_To_Base64_Failed",e}({});const c={command:"current_video_info",func:function(e){const r=document.querySelector("video"),{currentTime:t,duration:o}=r,n=t,c=Math.ceil(t);(function(e){return new Promise(((r,t)=>{try{var o;const t=null===(o=e.getClientRects())||void 0===o?void 0:o[0],n=document.createElement("canvas"),i=n.getContext("2d");n.width=t.width,n.height=t.height,null==i||i.drawImage(e,0,0,t.width,t.height),n.toBlob(r,"image/jpeg",1)}catch(n){t(n)}}))})(r).then((e=>{if(e)i(e).then((e=>{var r;const t={currentTime:c,currentPreciseTime:n,duration:o,snapshotImg:e};null===(r=window.parent)||void 0===r||r.postMessage({videoCommandResponse:t},"*")})).catch((e=>{var r;const t={errorInfo:{code:a.Blob_To_Base64_Failed,message:e.toString()},currentTime:c,currentPreciseTime:n,duration:o};null===(r=window.parent)||void 0===r||r.postMessage({videoCommandResponse:t},"*")}));else{var r;const e={errorInfo:{code:a.Capture_Video_Failed,message:"capture blob is null"},currentTime:c,currentPreciseTime:n,duration:o};null===(r=window.parent)||void 0===r||r.postMessage({videoCommandResponse:e},"*")}})).catch((e=>{var r;const t={errorInfo:{code:a.Capture_Video_Failed,message:e.toString()},currentTime:c,currentPreciseTime:n,duration:o};null===(r=window.parent)||void 0===r||r.postMessage({videoCommandResponse:t},"*")}))}},u=[function(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?t(Object(n),!0).forEach((function(t){var o,i,a;o=e,i=t,a=n[t],(i=r(i))in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({},c)];try{null===(s=window.parent)||void 0===s||s.postMessage({eventName:"documentContentLoaded",url:location.href},"*"),window.addEventListener("message",(e=>{const{videoCommand:r}=(null==e?void 0:e.data)||{};u.forEach((t=>{if(r===t.command)try{null==t||t.func(e)}catch(o){console.error("execute command error",o)}}))}))}catch(l){console.error("subframe scripts error ",l)}var s})();