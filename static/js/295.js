/*! For license information please see 295.js.LICENSE.txt */
(self.webpackChunkflow_web_extension=self.webpackChunkflow_web_extension||[]).push([[295],{5081:(n,e,r)=>{r.d(e,{Ay:()=>Z});var t=10,i=1e3,o=function(n){return JSON.stringify({ev_type:"batch",list:n})};var u=function(){return u=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},u.apply(this,arguments)};function a(n,e){var r="function"==typeof Symbol&&n[Symbol.iterator];if(!r)return n;var t,i,o=r.call(n),u=[];try{for(;(void 0===e||e-- >0)&&!(t=o.next()).done;)u.push(t.value)}catch(w){i={error:w}}finally{try{t&&!t.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u}function f(n,e,r){if(r||2===arguments.length)for(var t,i=0,o=e.length;i<o;i++)!t&&i in e||(t||(t=Array.prototype.slice.call(e,0,i)),t[i]=e[i]);return n.concat(t||Array.prototype.slice.call(e))}var c=["init","start","config","beforeDestroy","provide","beforeReport","report","beforeBuild","build","beforeSend","send","beforeConfig"],l=function(){return{}};function s(n){return n}function v(n){return"object"==typeof n&&null!==n}var d=Object.prototype;function p(n){return"[object Array]"===d.toString.call(n)}function g(n){return"number"==typeof n}function m(n){return"string"==typeof n}function h(n,e){if(!p(n))return!1;if(0===n.length)return!1;for(var r=0;r<n.length;){if(n[r]===e)return!0;r++}return!1}var y=function(n,e){if(!p(n))return n;var r=n.indexOf(e);if(r>=0){var t=n.slice();return t.splice(r,1),t}return n};function _(n){try{return m(n)?n:JSON.stringify(n)}catch(e){return"[FAILED_TO_STRINGIFY]:"+String(e)}}var b="".padStart?function(n,e){return void 0===e&&(e=8),n.padStart(e," ")}:function(n){return n},S=0,w=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];console.error.apply(console,f(["[SDK]",Date.now(),b(""+S++)],a(n),!1))},E=0,C=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];console.warn.apply(console,f(["[SDK]",Date.now(),b(""+E++)],a(n),!1))},R=function(n){return Math.random()<Number(n)},x=function(n,e){return n<Number(e)},D=function(n){return function(e){for(var r=e,t=0;t<n.length&&r;t++)try{r=n[t](r)}catch(i){w(i)}return r}};function I(){var n=function(){for(var n=new Array(16),e=0,r=0;r<16;r++)3&r||(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n}();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(n){for(var e=[],r=0;r<256;++r)e[r]=(r+256).toString(16).substr(1);var t=0,i=e;return[i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]]].join("")}(n)}function j(n){var e,r,t=n.builder,i=n.createSender,o=n.createDefaultConfig,u=n.createConfigManager,l=n.userConfigNormalizer,s=n.initConfigNormalizer,d=n.validateInitConfig,p={};c.forEach((function(n){return p[n]=[]}));var g=!1,m=!1,_=!1,b=[],S=[],w=function(){var n=!1,e={},r=function(n){n.length&&n.forEach((function(n){try{n()}catch(e){}})),n.length=0},t=function(n){e[n]&&e[n].forEach((function(n){r(n[1])})),e[n]=void 0};return{set:function(t,i,o){e[t]?e[t].push([i,o]):e[t]=[[i,o]],n&&r(o)},has:function(n){return!!e[n]},remove:t,removeByEvType:function(n){Object.keys(e).forEach((function(t){e[t]&&e[t].forEach((function(e){e[0]===n&&r(e[1])}))}))},clear:function(){n=!0,Object.keys(e).forEach((function(n){t(n)}))}}}(),E={getBuilder:function(){return t},getSender:function(){return e},getPreStartQueue:function(){return b},init:function(n){if(g)C("already inited");else{if(!(n&&v(n)&&d(n)))throw new Error("invalid InitConfig, init failed");var t=o(n);if(!t)throw new Error("defaultConfig missing");var a=s(n);if((r=u(t)).setConfig(a),r.onChange((function(){R("config")})),!(e=i(r.getConfig())))throw new Error("sender missing");g=!0,R("init",!0)}},set:function(n){g&&n&&v(n)&&(R("beforeConfig",!1,n),null==r||r.setConfig(n))},config:function(n){if(g)return n&&v(n)&&(R("beforeConfig",!1,n),null==r||r.setConfig(l(n))),null==r?void 0:r.getConfig()},provide:function(n,e){h(S,n)?C("cannot provide "+n+", reserved"):(E[n]=e,R("provide",!1,n))},start:function(){var n=this;g&&(m||null==r||r.onReady((function(){m=!0,R("start",!0),b.forEach((function(e){return n.build(e)})),b.length=0})))},report:function(n){if(n){var e=D(p.beforeReport)(n);if(e){var r=D(p.report)(e);r&&(m?this.build(r):b.push(r))}}},build:function(n){if(m){var e=D(p.beforeBuild)(n);if(e){var r=t.build(e);if(r){var i=D(p.build)(r);i&&this.send(i)}}}},send:function(n){if(m){var r=D(p.beforeSend)(n);r&&(e.send(r),R("send",!1,r))}},destroy:function(){w.clear(),_=!0,b.length=0,R("beforeDestroy",!0)},on:function(n,e){if("init"===n&&g||"start"===n&&m||"beforeDestroy"===n&&_)try{e()}catch(r){}else p[n]&&p[n].push(e)},off:function(n,e){p[n]&&(p[n]=y(p[n],e))},destroyAgent:w};return S=Object.keys(E),E;function R(n,e){void 0===e&&(e=!1);for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];p[n].forEach((function(n){try{n.apply(void 0,f([],a(r),!1))}catch(e){}})),e&&(p[n].length=0)}}var A=function(n){var e=function(){var n={},e={},r={set:function(t,i){return n[t]=i,e[t]=_(i),r},merge:function(t){return n=u(u({},n),t),Object.keys(t).forEach((function(n){e[n]=_(t[n])})),r},delete:function(t){return delete n[t],delete e[t],r},clear:function(){return n={},e={},r},get:function(n){return e[n]},toString:function(){return u({},e)}};return r}();n.provide("context",e),n.on("report",(function(n){return n.extra||(n.extra={}),n.extra.context=e.toString(),n}))};var O=function(){return Date.now()};var T=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=function(n){if(n)return n.__SLARDAR_REGISTRY__||(n.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),n.__SLARDAR_REGISTRY__.Slardar}(function(){if("object"==typeof window&&v(window))return window}());r&&(r.errors||(r.errors=[]),r.errors.push(n))},k="custom",B=function(n){n.provide("sendEvent",(function(e){var r=function(n){if(n&&v(n)&&n.name&&m(n.name)){var e={name:n.name,type:"event"};if("metrics"in n&&v(n.metrics)){var r=n.metrics,t={};for(var i in r)g(r[i])&&(t[i]=r[i]);e.metrics=t}if("categories"in n&&v(n.categories)){var o=n.categories,u={};for(var i in o)u[i]=_(o[i]);e.categories=u}return e}}(e);r&&n.report({ev_type:k,payload:r,extra:{timestamp:O()}})})),n.provide("sendLog",(function(e){var r=function(n){if(n&&v(n)&&n.content&&m(n.content)){var e={content:_(n.content),type:"log",level:"info"};if("level"in n&&(e.level=n.level),"extra"in n&&v(n.extra)){var r=n.extra,t={},i={};for(var o in r)g(r[o])?t[o]=r[o]:i[o]=_(r[o]);e.metrics=t,e.categories=i}return e}}(e);r&&n.report({ev_type:k,payload:r,extra:{timestamp:O()}})}))},N=function(n,e){var r=n.common||{};return r.sample_rate=e,n.common=r,n},z=function(n,e,r,t,i){return n?(o=i(t,e),function(){return o}):function(){return r(e)};var o},L=function(n,e,r,t){var i=function(n,e,r){for(var t,i=a(e.split(".")),o=i[0],u=i.slice(1);n&&u.length>0;)n=n[o],o=(t=a(u))[0],u=t.slice(1);if(n)return r(n,o)}(n,e,(function(n,e){return n[e]}));return void 0!==i&&function(n,e,r){switch(r){case"eq":return h(e,n);case"neq":return!h(e,n);case"gt":return n>e[0];case"gte":return n>=e[0];case"lt":return n<e[0];case"lte":return n<=e[0];case"regex":return Boolean(n.match(new RegExp(e.join("|"))));case"not_regex":return!n.match(new RegExp(e.join("|")));default:return!1}}(i,function(n,e){return n.map((function(n){switch(e){case"number":return Number(n);case"boolean":return"1"===n;default:return String(n)}}))}(t,"boolean"==typeof i?"bool":g(i)?"number":"string"),r)},M=function(n,e){try{return"rule"===e.type?L(n,e.field,e.op,e.values):"and"===e.type?e.children.every((function(e){return M(n,e)})):e.children.some((function(e){return M(n,e)}))}catch(r){return T(r),!1}},G=function(n,e,r,t,i){if(!e)return s;var o=e.sample_rate,u=e.include_users,a=e.sample_granularity,f=e.rules,c=e.r,l=void 0===c?Math.random():c;if(h(u,n))return function(n){return N(n,1)};var v="session"===a,d=z(v,o,r,l,t),p=function(n,e,r,t,i,o){var u={};return Object.keys(n).forEach((function(a){var f=n[a],c=f.enable,l=f.sample_rate,s=f.conditional_sample_rules;c?(u[a]={enable:c,sample_rate:l,effectiveSampleRate:l*r,hit:z(e,l,t,i,o)},s&&(u[a].conditional_hit_rules=s.map((function(n){var u=n.sample_rate,a=n.filter;return{sample_rate:u,hit:z(e,u,t,i,o),effectiveSampleRate:u*r,filter:a}})))):u[a]={enable:c,hit:function(){return!1},sample_rate:0,effectiveSampleRate:0}})),u}(f,v,o,r,l,t);return function(n){var e;if(!d())return v&&i[0](),!1;if(!(n.ev_type in p))return N(n,o);if(!p[n.ev_type].enable)return v&&i[1](n.ev_type),!1;if(null===(e=n.common)||void 0===e?void 0:e.sample_rate)return n;var r=p[n.ev_type],t=r.conditional_hit_rules;if(t)for(var u=0;u<t.length;u++)if(M(n,t[u].filter))return!!t[u].hit()&&N(n,t[u].effectiveSampleRate);return r.hit()?N(n,r.effectiveSampleRate):((!t||!t.length)&&v&&i[1](n.ev_type),!1)}},Y={build:function(n){return{ev_type:n.ev_type,payload:n.payload,common:u(u({},n.extra||{}),n.overrides||{})}}},q=function(n){var e,r=n,t={},i=l,o=l;return{getConfig:function(){return r},setConfig:function(c){var l;return t=u(u({},t),c||{}),(l=u(u({},n),t)).sample=function(n,e){if(!n||!e)return n||e;var r=u(u({},n),e);return r.include_users=f(f([],a(n.include_users||[]),!1),a(e.include_users||[]),!1),r.rules=f(f([],a(Object.keys(n.rules||{})),!1),a(Object.keys(e.rules||{})),!1).reduce((function(r,t){var i,o;return t in r||(t in(n.rules||{})&&t in(e.rules||{})?(r[t]=u(u({},n.rules[t]),e.rules[t]),r[t].conditional_sample_rules=f(f([],a(n.rules[t].conditional_sample_rules||[]),!1),a(e.rules[t].conditional_sample_rules||[]),!1)):r[t]=(null===(i=n.rules)||void 0===i?void 0:i[t])||(null===(o=e.rules)||void 0===o?void 0:o[t])),r}),{}),r}(n.sample,t.sample),r=l,o(),e||(e=c,i()),r},onChange:function(n){o=n},onReady:function(n){i=n,e&&i()}}};var K="mon.zijieapi.com",F={sample_rate:1,include_users:[],sample_granularity:"session",rules:{}};function J(n){return u({},n)}function P(n){return v(n)&&"bid"in n&&"transport"in n}function W(n){return u({},n)}var Q=function(n){n.on("report",(function(e){return function(n,e){var r={url:"",protocol:"",domain:"",path:"",query:"",timestamp:Date.now(),sdk_version:e.version||"1.4.5",sdk_name:e.name||"SDK_BASE"};return u(u({},n),{extra:u(u({},r),n.extra||{})})}(e,n.config())}))},H=function(n){n.on("beforeBuild",(function(e){return function(n,e){var r={};return r.bid=e.bid,r.pid=e.pid,r.view_id=e.viewId,r.user_id=e.userId,r.device_id=e.deviceId,r.session_id=e.sessionId,r.release=e.release,r.env=e.env,u(u({},n),{extra:u(u({},r),n.extra||{})})}(e,n.config())}))};function U(n){return function(n){var e,r=n.transport,u=n.endpoint,a=n.size,f=void 0===a?t:a,c=n.wait,l=void 0===c?i:c,s=[],v=0;function d(){if(s.length){var n=this.getBatchData();r.post({url:u,data:n,fail:function(r){e&&e(r,n)}}),s=[]}}return{getSize:function(){return f},getWait:function(){return l},setSize:function(n){f=n},setWait:function(n){l=n},getEndpoint:function(){return u},setEndpoint:function(n){u=n},send:function(n){s.push(n),s.length>=f&&d.call(this),clearTimeout(v),v=setTimeout(d.bind(this),l)},flush:function(){clearTimeout(v),d.call(this)},getBatchData:function(){return s.length?o(s):""},clear:function(){clearTimeout(v),s=[]},fail:function(n){e=n}}}(n)}var V=function(n){return{bid:"",pid:"",viewId:(e="_",e+"_"+Date.now()),userId:I(),deviceId:I(),sessionId:I(),domain:K,release:"",env:"production",sample:F,plugins:{},transport:{get:l,post:l}};var e},X=function(n){var e=void 0===n?{}:n,r=e.createSender,t=void 0===r?function(n){return U({size:20,endpoint:(e=n.domain,void 0===r&&(r="/monitor_browser/collect/batch/"),(e&&e.indexOf("//")>=0?"":"https://")+e+r),transport:n.transport});var e,r}:r,i=e.builder,o=void 0===i?Y:i,u=e.createDefaultConfig,a=j({validateInitConfig:P,initConfigNormalizer:J,userConfigNormalizer:W,createSender:t,builder:o,createDefaultConfig:void 0===u?V:u,createConfigManager:q});return A(a),H(a),Q(a),function(n,e){n.on("init",(function(){var r=[],t=function(t){t.forEach((function(t){var i=t.name;h(r,i)||(r.push(i),t.setup(n),e&&e(i,t.setup),n.destroyAgent.set(i,i,[function(){r=y(r,i),t.tearDown&&t.tearDown()}]))}))};n.provide("applyIntegrations",t);var i=n.config();i&&i.integrations&&t(i.integrations)}))}(a),a},Z=function(n){void 0===n&&(n={});var e=X(n);return function(n){n.on("start",(function(){var e=n.config(),r=e.userId,t=e.sample,i=G(r,t,R,x,[function(){n.destroy()},function(e){n.destroyAgent.removeByEvType(e)}]);n.on("build",i)}))}(e),B(e),e}()},35625:(n,e)=>{var r=10,t=1e3,i=function(n){return JSON.stringify({ev_type:"batch",list:n})};var o=function(){return o=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},o.apply(this,arguments)};function u(n,e){var r="function"==typeof Symbol&&n[Symbol.iterator];if(!r)return n;var t,i,o=r.call(n),u=[];try{for(;(void 0===e||e-- >0)&&!(t=o.next()).done;)u.push(t.value)}catch(S){i={error:S}}finally{try{t&&!t.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u}function a(n,e,r){if(r||2===arguments.length)for(var t,i=0,o=e.length;i<o;i++)!t&&i in e||(t||(t=Array.prototype.slice.call(e,0,i)),t[i]=e[i]);return n.concat(t||Array.prototype.slice.call(e))}var f=["init","start","config","beforeDestroy","provide","beforeReport","report","beforeBuild","build","beforeSend","send","beforeConfig"],c=function(){return{}};function l(n){return n}function s(n){return"object"==typeof n&&null!==n}var v=Object.prototype;function d(n){return"[object Array]"===v.toString.call(n)}function p(n){return"number"==typeof n}function g(n){return"string"==typeof n}function m(n,e){if(!d(n))return!1;if(0===n.length)return!1;for(var r=0;r<n.length;){if(n[r]===e)return!0;r++}return!1}var h=function(n,e){if(!d(n))return n;var r=n.indexOf(e);if(r>=0){var t=n.slice();return t.splice(r,1),t}return n};function y(n){try{return g(n)?n:JSON.stringify(n)}catch(e){return"[FAILED_TO_STRINGIFY]:"+String(e)}}var _="".padStart?function(n,e){return void 0===e&&(e=8),n.padStart(e," ")}:function(n){return n},b=0,S=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];console.error.apply(console,a(["[SDK]",Date.now(),_(""+b++)],u(n),!1))},w=0,E=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];console.warn.apply(console,a(["[SDK]",Date.now(),_(""+w++)],u(n),!1))},C=function(n){return Math.random()<Number(n)},R=function(n,e){return n<Number(e)},x=function(n){return function(e){for(var r=e,t=0;t<n.length&&r;t++)try{r=n[t](r)}catch(i){S(i)}return r}};function D(){var n=function(){for(var n=new Array(16),e=0,r=0;r<16;r++)3&r||(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n}();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(n){for(var e=[],r=0;r<256;++r)e[r]=(r+256).toString(16).substr(1);var t=0,i=e;return[i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]]].join("")}(n)}function I(n){var e,r,t=n.builder,i=n.createSender,o=n.createDefaultConfig,c=n.createConfigManager,l=n.userConfigNormalizer,v=n.initConfigNormalizer,d=n.validateInitConfig,p={};f.forEach((function(n){return p[n]=[]}));var g=!1,y=!1,_=!1,b=[],S=[],w=function(){var n=!1,e={},r=function(n){n.length&&n.forEach((function(n){try{n()}catch(e){}})),n.length=0},t=function(n){e[n]&&e[n].forEach((function(n){r(n[1])})),e[n]=void 0};return{set:function(t,i,o){e[t]?e[t].push([i,o]):e[t]=[[i,o]],n&&r(o)},has:function(n){return!!e[n]},remove:t,removeByEvType:function(n){Object.keys(e).forEach((function(t){e[t]&&e[t].forEach((function(e){e[0]===n&&r(e[1])}))}))},clear:function(){n=!0,Object.keys(e).forEach((function(n){t(n)}))}}}(),C={getBuilder:function(){return t},getSender:function(){return e},getPreStartQueue:function(){return b},init:function(n){if(g)E("already inited");else{if(!(n&&s(n)&&d(n)))throw new Error("invalid InitConfig, init failed");var t=o(n);if(!t)throw new Error("defaultConfig missing");var u=v(n);if((r=c(t)).setConfig(u),r.onChange((function(){R("config")})),!(e=i(r.getConfig())))throw new Error("sender missing");g=!0,R("init",!0)}},set:function(n){g&&n&&s(n)&&(R("beforeConfig",!1,n),null==r||r.setConfig(n))},config:function(n){if(g)return n&&s(n)&&(R("beforeConfig",!1,n),null==r||r.setConfig(l(n))),null==r?void 0:r.getConfig()},provide:function(n,e){m(S,n)?E("cannot provide "+n+", reserved"):(C[n]=e,R("provide",!1,n))},start:function(){var n=this;g&&(y||null==r||r.onReady((function(){y=!0,R("start",!0),b.forEach((function(e){return n.build(e)})),b.length=0})))},report:function(n){if(n){var e=x(p.beforeReport)(n);if(e){var r=x(p.report)(e);r&&(y?this.build(r):b.push(r))}}},build:function(n){if(y){var e=x(p.beforeBuild)(n);if(e){var r=t.build(e);if(r){var i=x(p.build)(r);i&&this.send(i)}}}},send:function(n){if(y){var r=x(p.beforeSend)(n);r&&(e.send(r),R("send",!1,r))}},destroy:function(){w.clear(),_=!0,b.length=0,R("beforeDestroy",!0)},on:function(n,e){if("init"===n&&g||"start"===n&&y||"beforeDestroy"===n&&_)try{e()}catch(r){}else p[n]&&p[n].push(e)},off:function(n,e){p[n]&&(p[n]=h(p[n],e))},destroyAgent:w};return S=Object.keys(C),C;function R(n,e){void 0===e&&(e=!1);for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];p[n].forEach((function(n){try{n.apply(void 0,a([],u(r),!1))}catch(e){}})),e&&(p[n].length=0)}}var j=function(n){var e=function(){var n={},e={},r={set:function(t,i){return n[t]=i,e[t]=y(i),r},merge:function(t){return n=o(o({},n),t),Object.keys(t).forEach((function(n){e[n]=y(t[n])})),r},delete:function(t){return delete n[t],delete e[t],r},clear:function(){return n={},e={},r},get:function(n){return e[n]},toString:function(){return o({},e)}};return r}();n.provide("context",e),n.on("report",(function(n){return n.extra||(n.extra={}),n.extra.context=e.toString(),n}))};var A=function(){return Date.now()};var O=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=function(n){if(n)return n.__SLARDAR_REGISTRY__||(n.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),n.__SLARDAR_REGISTRY__.Slardar}(function(){if("object"==typeof window&&s(window))return window}());r&&(r.errors||(r.errors=[]),r.errors.push(n))},T="custom",k=function(n){n.provide("sendEvent",(function(e){var r=function(n){if(n&&s(n)&&n.name&&g(n.name)){var e={name:n.name,type:"event"};if("metrics"in n&&s(n.metrics)){var r=n.metrics,t={};for(var i in r)p(r[i])&&(t[i]=r[i]);e.metrics=t}if("categories"in n&&s(n.categories)){var o=n.categories,u={};for(var i in o)u[i]=y(o[i]);e.categories=u}return e}}(e);r&&n.report({ev_type:T,payload:r,extra:{timestamp:A()}})})),n.provide("sendLog",(function(e){var r=function(n){if(n&&s(n)&&n.content&&g(n.content)){var e={content:y(n.content),type:"log",level:"info"};if("level"in n&&(e.level=n.level),"extra"in n&&s(n.extra)){var r=n.extra,t={},i={};for(var o in r)p(r[o])?t[o]=r[o]:i[o]=y(r[o]);e.metrics=t,e.categories=i}return e}}(e);r&&n.report({ev_type:T,payload:r,extra:{timestamp:A()}})}))},B=function(n,e){var r=n.common||{};return r.sample_rate=e,n.common=r,n},N=function(n,e,r,t,i){return n?(o=i(t,e),function(){return o}):function(){return r(e)};var o},z=function(n,e,r,t){var i=function(n,e,r){for(var t,i=u(e.split(".")),o=i[0],a=i.slice(1);n&&a.length>0;)n=n[o],o=(t=u(a))[0],a=t.slice(1);if(n)return r(n,o)}(n,e,(function(n,e){return n[e]}));return void 0!==i&&function(n,e,r){switch(r){case"eq":return m(e,n);case"neq":return!m(e,n);case"gt":return n>e[0];case"gte":return n>=e[0];case"lt":return n<e[0];case"lte":return n<=e[0];case"regex":return Boolean(n.match(new RegExp(e.join("|"))));case"not_regex":return!n.match(new RegExp(e.join("|")));default:return!1}}(i,function(n,e){return n.map((function(n){switch(e){case"number":return Number(n);case"boolean":return"1"===n;default:return String(n)}}))}(t,"boolean"==typeof i?"bool":p(i)?"number":"string"),r)},L=function(n,e){try{return"rule"===e.type?z(n,e.field,e.op,e.values):"and"===e.type?e.children.every((function(e){return L(n,e)})):e.children.some((function(e){return L(n,e)}))}catch(r){return O(r),!1}},M=function(n,e,r,t,i){if(!e)return l;var o=e.sample_rate,u=e.include_users,a=e.sample_granularity,f=e.rules,c=e.r,s=void 0===c?Math.random():c;if(m(u,n))return function(n){return B(n,1)};var v="session"===a,d=N(v,o,r,s,t),p=function(n,e,r,t,i,o){var u={};return Object.keys(n).forEach((function(a){var f=n[a],c=f.enable,l=f.sample_rate,s=f.conditional_sample_rules;c?(u[a]={enable:c,sample_rate:l,effectiveSampleRate:l*r,hit:N(e,l,t,i,o)},s&&(u[a].conditional_hit_rules=s.map((function(n){var u=n.sample_rate,a=n.filter;return{sample_rate:u,hit:N(e,u,t,i,o),effectiveSampleRate:u*r,filter:a}})))):u[a]={enable:c,hit:function(){return!1},sample_rate:0,effectiveSampleRate:0}})),u}(f,v,o,r,s,t);return function(n){var e;if(!d())return v&&i[0](),!1;if(!(n.ev_type in p))return B(n,o);if(!p[n.ev_type].enable)return v&&i[1](n.ev_type),!1;if(null===(e=n.common)||void 0===e?void 0:e.sample_rate)return n;var r=p[n.ev_type],t=r.conditional_hit_rules;if(t)for(var u=0;u<t.length;u++)if(L(n,t[u].filter))return!!t[u].hit()&&B(n,t[u].effectiveSampleRate);return r.hit()?B(n,r.effectiveSampleRate):((!t||!t.length)&&v&&i[1](n.ev_type),!1)}},G={build:function(n){return{ev_type:n.ev_type,payload:n.payload,common:o(o({},n.extra||{}),n.overrides||{})}}},Y=function(n){var e,r=n,t={},i=c,u=c;return{getConfig:function(){return r},setConfig:function(a){var f;return t=o(o({},t),a||{}),(f=o(o({},n),t)).sample=q(n.sample,t.sample),r=f,u(),e||(e=a,i()),r},onChange:function(n){u=n},onReady:function(n){i=n,e&&i()}}};function q(n,e){if(!n||!e)return n||e;var r=o(o({},n),e);return r.include_users=a(a([],u(n.include_users||[]),!1),u(e.include_users||[]),!1),r.rules=a(a([],u(Object.keys(n.rules||{})),!1),u(Object.keys(e.rules||{})),!1).reduce((function(r,t){var i,f;return t in r||(t in(n.rules||{})&&t in(e.rules||{})?(r[t]=o(o({},n.rules[t]),e.rules[t]),r[t].conditional_sample_rules=a(a([],u(n.rules[t].conditional_sample_rules||[]),!1),u(e.rules[t].conditional_sample_rules||[]),!1)):r[t]=(null===(i=n.rules)||void 0===i?void 0:i[t])||(null===(f=e.rules)||void 0===f?void 0:f[t])),r}),{}),r}var K="mon-va.byteoversea.com",F=K,J="1.4.5",P="SDK_BASE",W="/monitor_web/settings/browser-settings",Q="/monitor_browser/collect/batch/",H={sample_rate:1,include_users:[],sample_granularity:"session",rules:{}};function U(n){return o({},n)}function V(n){return s(n)&&"bid"in n&&"transport"in n}function X(n){return o({},n)}var Z=function(n,e){var r={url:"",protocol:"",domain:"",path:"",query:"",timestamp:Date.now(),sdk_version:e.version||J,sdk_name:e.name||P};return o(o({},n),{extra:o(o({},r),n.extra||{})})},$=function(n){n.on("report",(function(e){return Z(e,n.config())}))},nn=function(n,e){var r={};return r.bid=e.bid,r.pid=e.pid,r.view_id=e.viewId,r.user_id=e.userId,r.device_id=e.deviceId,r.session_id=e.sessionId,r.release=e.release,r.env=e.env,o(o({},n),{extra:o(o({},r),n.extra||{})})},en=function(n){n.on("beforeBuild",(function(e){return nn(e,n.config())}))};function rn(n){return function(n){var e,o=n.transport,u=n.endpoint,a=n.size,f=void 0===a?r:a,c=n.wait,l=void 0===c?t:c,s=[],v=0;function d(){if(s.length){var n=this.getBatchData();o.post({url:u,data:n,fail:function(r){e&&e(r,n)}}),s=[]}}return{getSize:function(){return f},getWait:function(){return l},setSize:function(n){f=n},setWait:function(n){l=n},getEndpoint:function(){return u},setEndpoint:function(n){u=n},send:function(n){s.push(n),s.length>=f&&d.call(this),clearTimeout(v),v=setTimeout(d.bind(this),l)},flush:function(){clearTimeout(v),d.call(this)},getBatchData:function(){return s.length?i(s):""},clear:function(){clearTimeout(v),s=[]},fail:function(n){e=n}}}(n)}var tn=function(n,e){return void 0===e&&(e=Q),(n&&n.indexOf("//")>=0?"":"https://")+n+e},on=function(){return D()},un=function(){return D()},an=function(n){return n+"_"+Date.now()},fn=function(){return D()},cn=function(n){return{bid:"",pid:"",viewId:an("_"),userId:on(),deviceId:un(),sessionId:fn(),domain:K,release:"",env:"production",sample:H,plugins:{},transport:{get:c,post:c}}},ln=function(n){var e=void 0===n?{}:n,r=e.createSender,t=void 0===r?function(n){return rn({size:20,endpoint:tn(n.domain),transport:n.transport})}:r,i=e.builder,o=void 0===i?G:i,u=e.createDefaultConfig,a=I({validateInitConfig:V,initConfigNormalizer:U,userConfigNormalizer:X,createSender:t,builder:o,createDefaultConfig:void 0===u?cn:u,createConfigManager:Y});return j(a),en(a),$(a),function(n,e){n.on("init",(function(){var r=[],t=function(t){t.forEach((function(t){var i=t.name;m(r,i)||(r.push(i),t.setup(n),e&&e(i,t.setup),n.destroyAgent.set(i,i,[function(){r=h(r,i),t.tearDown&&t.tearDown()}]))}))};n.provide("applyIntegrations",t);var i=n.config();i&&i.integrations&&t(i.integrations)}))}(a),a},sn=function(n){void 0===n&&(n={});var e=ln(n);return function(n){n.on("start",(function(){var e=n.config(),r=e.userId,t=e.sample,i=M(r,t,C,R,[function(){n.destroy()},function(e){n.destroyAgent.removeByEvType(e)}]);n.on("build",i)}))}(e),k(e),e},vn=sn();e.Ay=vn},58311:(n,e)=>{var r=10,t=1e3,i=function(n){return JSON.stringify({ev_type:"batch",list:n})};var o=function(){return o=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},o.apply(this,arguments)};function u(n,e){var r="function"==typeof Symbol&&n[Symbol.iterator];if(!r)return n;var t,i,o=r.call(n),u=[];try{for(;(void 0===e||e-- >0)&&!(t=o.next()).done;)u.push(t.value)}catch(S){i={error:S}}finally{try{t&&!t.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u}function a(n,e,r){if(r||2===arguments.length)for(var t,i=0,o=e.length;i<o;i++)!t&&i in e||(t||(t=Array.prototype.slice.call(e,0,i)),t[i]=e[i]);return n.concat(t||Array.prototype.slice.call(e))}var f=["init","start","config","beforeDestroy","provide","beforeReport","report","beforeBuild","build","beforeSend","send","beforeConfig"],c=function(){return{}};function l(n){return n}function s(n){return"object"==typeof n&&null!==n}var v=Object.prototype;function d(n){return"[object Array]"===v.toString.call(n)}function p(n){return"number"==typeof n}function g(n){return"string"==typeof n}function m(n,e){if(!d(n))return!1;if(0===n.length)return!1;for(var r=0;r<n.length;){if(n[r]===e)return!0;r++}return!1}var h=function(n,e){if(!d(n))return n;var r=n.indexOf(e);if(r>=0){var t=n.slice();return t.splice(r,1),t}return n};function y(n){try{return g(n)?n:JSON.stringify(n)}catch(e){return"[FAILED_TO_STRINGIFY]:"+String(e)}}var _="".padStart?function(n,e){return void 0===e&&(e=8),n.padStart(e," ")}:function(n){return n},b=0,S=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];console.error.apply(console,a(["[SDK]",Date.now(),_(""+b++)],u(n),!1))},w=0,E=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];console.warn.apply(console,a(["[SDK]",Date.now(),_(""+w++)],u(n),!1))},C=function(n){return Math.random()<Number(n)},R=function(n,e){return n<Number(e)},x=function(n){return function(e){for(var r=e,t=0;t<n.length&&r;t++)try{r=n[t](r)}catch(i){S(i)}return r}};function D(){var n=function(){for(var n=new Array(16),e=0,r=0;r<16;r++)3&r||(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n}();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(n){for(var e=[],r=0;r<256;++r)e[r]=(r+256).toString(16).substr(1);var t=0,i=e;return[i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]]].join("")}(n)}function I(n){var e,r,t=n.builder,i=n.createSender,o=n.createDefaultConfig,c=n.createConfigManager,l=n.userConfigNormalizer,v=n.initConfigNormalizer,d=n.validateInitConfig,p={};f.forEach((function(n){return p[n]=[]}));var g=!1,y=!1,_=!1,b=[],S=[],w=function(){var n=!1,e={},r=function(n){n.length&&n.forEach((function(n){try{n()}catch(e){}})),n.length=0},t=function(n){e[n]&&e[n].forEach((function(n){r(n[1])})),e[n]=void 0};return{set:function(t,i,o){e[t]?e[t].push([i,o]):e[t]=[[i,o]],n&&r(o)},has:function(n){return!!e[n]},remove:t,removeByEvType:function(n){Object.keys(e).forEach((function(t){e[t]&&e[t].forEach((function(e){e[0]===n&&r(e[1])}))}))},clear:function(){n=!0,Object.keys(e).forEach((function(n){t(n)}))}}}(),C={getBuilder:function(){return t},getSender:function(){return e},getPreStartQueue:function(){return b},init:function(n){if(g)E("already inited");else{if(!(n&&s(n)&&d(n)))throw new Error("invalid InitConfig, init failed");var t=o(n);if(!t)throw new Error("defaultConfig missing");var u=v(n);if((r=c(t)).setConfig(u),r.onChange((function(){R("config")})),!(e=i(r.getConfig())))throw new Error("sender missing");g=!0,R("init",!0)}},set:function(n){g&&n&&s(n)&&(R("beforeConfig",!1,n),null==r||r.setConfig(n))},config:function(n){if(g)return n&&s(n)&&(R("beforeConfig",!1,n),null==r||r.setConfig(l(n))),null==r?void 0:r.getConfig()},provide:function(n,e){m(S,n)?E("cannot provide "+n+", reserved"):(C[n]=e,R("provide",!1,n))},start:function(){var n=this;g&&(y||null==r||r.onReady((function(){y=!0,R("start",!0),b.forEach((function(e){return n.build(e)})),b.length=0})))},report:function(n){if(n){var e=x(p.beforeReport)(n);if(e){var r=x(p.report)(e);r&&(y?this.build(r):b.push(r))}}},build:function(n){if(y){var e=x(p.beforeBuild)(n);if(e){var r=t.build(e);if(r){var i=x(p.build)(r);i&&this.send(i)}}}},send:function(n){if(y){var r=x(p.beforeSend)(n);r&&(e.send(r),R("send",!1,r))}},destroy:function(){w.clear(),_=!0,b.length=0,R("beforeDestroy",!0)},on:function(n,e){if("init"===n&&g||"start"===n&&y||"beforeDestroy"===n&&_)try{e()}catch(r){}else p[n]&&p[n].push(e)},off:function(n,e){p[n]&&(p[n]=h(p[n],e))},destroyAgent:w};return S=Object.keys(C),C;function R(n,e){void 0===e&&(e=!1);for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];p[n].forEach((function(n){try{n.apply(void 0,a([],u(r),!1))}catch(e){}})),e&&(p[n].length=0)}}var j=function(n){var e=function(){var n={},e={},r={set:function(t,i){return n[t]=i,e[t]=y(i),r},merge:function(t){return n=o(o({},n),t),Object.keys(t).forEach((function(n){e[n]=y(t[n])})),r},delete:function(t){return delete n[t],delete e[t],r},clear:function(){return n={},e={},r},get:function(n){return e[n]},toString:function(){return o({},e)}};return r}();n.provide("context",e),n.on("report",(function(n){return n.extra||(n.extra={}),n.extra.context=e.toString(),n}))};var A=function(){return Date.now()};var O=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=function(n){if(n)return n.__SLARDAR_REGISTRY__||(n.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),n.__SLARDAR_REGISTRY__.Slardar}(function(){if("object"==typeof window&&s(window))return window}());r&&(r.errors||(r.errors=[]),r.errors.push(n))},T="custom",k=function(n){n.provide("sendEvent",(function(e){var r=function(n){if(n&&s(n)&&n.name&&g(n.name)){var e={name:n.name,type:"event"};if("metrics"in n&&s(n.metrics)){var r=n.metrics,t={};for(var i in r)p(r[i])&&(t[i]=r[i]);e.metrics=t}if("categories"in n&&s(n.categories)){var o=n.categories,u={};for(var i in o)u[i]=y(o[i]);e.categories=u}return e}}(e);r&&n.report({ev_type:T,payload:r,extra:{timestamp:A()}})})),n.provide("sendLog",(function(e){var r=function(n){if(n&&s(n)&&n.content&&g(n.content)){var e={content:y(n.content),type:"log",level:"info"};if("level"in n&&(e.level=n.level),"extra"in n&&s(n.extra)){var r=n.extra,t={},i={};for(var o in r)p(r[o])?t[o]=r[o]:i[o]=y(r[o]);e.metrics=t,e.categories=i}return e}}(e);r&&n.report({ev_type:T,payload:r,extra:{timestamp:A()}})}))},B=function(n,e){var r=n.common||{};return r.sample_rate=e,n.common=r,n},N=function(n,e,r,t,i){return n?(o=i(t,e),function(){return o}):function(){return r(e)};var o},z=function(n,e,r,t){var i=function(n,e,r){for(var t,i=u(e.split(".")),o=i[0],a=i.slice(1);n&&a.length>0;)n=n[o],o=(t=u(a))[0],a=t.slice(1);if(n)return r(n,o)}(n,e,(function(n,e){return n[e]}));return void 0!==i&&function(n,e,r){switch(r){case"eq":return m(e,n);case"neq":return!m(e,n);case"gt":return n>e[0];case"gte":return n>=e[0];case"lt":return n<e[0];case"lte":return n<=e[0];case"regex":return Boolean(n.match(new RegExp(e.join("|"))));case"not_regex":return!n.match(new RegExp(e.join("|")));default:return!1}}(i,function(n,e){return n.map((function(n){switch(e){case"number":return Number(n);case"boolean":return"1"===n;default:return String(n)}}))}(t,"boolean"==typeof i?"bool":p(i)?"number":"string"),r)},L=function(n,e){try{return"rule"===e.type?z(n,e.field,e.op,e.values):"and"===e.type?e.children.every((function(e){return L(n,e)})):e.children.some((function(e){return L(n,e)}))}catch(r){return O(r),!1}},M=function(n,e,r,t,i){if(!e)return l;var o=e.sample_rate,u=e.include_users,a=e.sample_granularity,f=e.rules,c=e.r,s=void 0===c?Math.random():c;if(m(u,n))return function(n){return B(n,1)};var v="session"===a,d=N(v,o,r,s,t),p=function(n,e,r,t,i,o){var u={};return Object.keys(n).forEach((function(a){var f=n[a],c=f.enable,l=f.sample_rate,s=f.conditional_sample_rules;c?(u[a]={enable:c,sample_rate:l,effectiveSampleRate:l*r,hit:N(e,l,t,i,o)},s&&(u[a].conditional_hit_rules=s.map((function(n){var u=n.sample_rate,a=n.filter;return{sample_rate:u,hit:N(e,u,t,i,o),effectiveSampleRate:u*r,filter:a}})))):u[a]={enable:c,hit:function(){return!1},sample_rate:0,effectiveSampleRate:0}})),u}(f,v,o,r,s,t);return function(n){var e;if(!d())return v&&i[0](),!1;if(!(n.ev_type in p))return B(n,o);if(!p[n.ev_type].enable)return v&&i[1](n.ev_type),!1;if(null===(e=n.common)||void 0===e?void 0:e.sample_rate)return n;var r=p[n.ev_type],t=r.conditional_hit_rules;if(t)for(var u=0;u<t.length;u++)if(L(n,t[u].filter))return!!t[u].hit()&&B(n,t[u].effectiveSampleRate);return r.hit()?B(n,r.effectiveSampleRate):((!t||!t.length)&&v&&i[1](n.ev_type),!1)}},G={build:function(n){return{ev_type:n.ev_type,payload:n.payload,common:o(o({},n.extra||{}),n.overrides||{})}}},Y=function(n){var e,r=n,t={},i=c,u=c;return{getConfig:function(){return r},setConfig:function(a){var f;return t=o(o({},t),a||{}),(f=o(o({},n),t)).sample=q(n.sample,t.sample),r=f,u(),e||(e=a,i()),r},onChange:function(n){u=n},onReady:function(n){i=n,e&&i()}}};function q(n,e){if(!n||!e)return n||e;var r=o(o({},n),e);return r.include_users=a(a([],u(n.include_users||[]),!1),u(e.include_users||[]),!1),r.rules=a(a([],u(Object.keys(n.rules||{})),!1),u(Object.keys(e.rules||{})),!1).reduce((function(r,t){var i,f;return t in r||(t in(n.rules||{})&&t in(e.rules||{})?(r[t]=o(o({},n.rules[t]),e.rules[t]),r[t].conditional_sample_rules=a(a([],u(n.rules[t].conditional_sample_rules||[]),!1),u(e.rules[t].conditional_sample_rules||[]),!1)):r[t]=(null===(i=n.rules)||void 0===i?void 0:i[t])||(null===(f=e.rules)||void 0===f?void 0:f[t])),r}),{}),r}var K="mon-va.byteoversea.com",F=K,J="1.4.5",P="SDK_BASE",W="/monitor_web/settings/browser-settings",Q="/monitor_browser/collect/batch/",H={sample_rate:1,include_users:[],sample_granularity:"session",rules:{}};function U(n){return o({},n)}function V(n){return s(n)&&"bid"in n&&"transport"in n}function X(n){return o({},n)}var Z=function(n,e){var r={url:"",protocol:"",domain:"",path:"",query:"",timestamp:Date.now(),sdk_version:e.version||J,sdk_name:e.name||P};return o(o({},n),{extra:o(o({},r),n.extra||{})})},$=function(n){n.on("report",(function(e){return Z(e,n.config())}))},nn=function(n,e){var r={};return r.bid=e.bid,r.pid=e.pid,r.view_id=e.viewId,r.user_id=e.userId,r.device_id=e.deviceId,r.session_id=e.sessionId,r.release=e.release,r.env=e.env,o(o({},n),{extra:o(o({},r),n.extra||{})})},en=function(n){n.on("beforeBuild",(function(e){return nn(e,n.config())}))};function rn(n){return function(n){var e,o=n.transport,u=n.endpoint,a=n.size,f=void 0===a?r:a,c=n.wait,l=void 0===c?t:c,s=[],v=0;function d(){if(s.length){var n=this.getBatchData();o.post({url:u,data:n,fail:function(r){e&&e(r,n)}}),s=[]}}return{getSize:function(){return f},getWait:function(){return l},setSize:function(n){f=n},setWait:function(n){l=n},getEndpoint:function(){return u},setEndpoint:function(n){u=n},send:function(n){s.push(n),s.length>=f&&d.call(this),clearTimeout(v),v=setTimeout(d.bind(this),l)},flush:function(){clearTimeout(v),d.call(this)},getBatchData:function(){return s.length?i(s):""},clear:function(){clearTimeout(v),s=[]},fail:function(n){e=n}}}(n)}var tn=function(n,e){return void 0===e&&(e=Q),(n&&n.indexOf("//")>=0?"":"https://")+n+e},on=function(){return D()},un=function(){return D()},an=function(n){return n+"_"+Date.now()},fn=function(){return D()},cn=function(n){return{bid:"",pid:"",viewId:an("_"),userId:on(),deviceId:un(),sessionId:fn(),domain:K,release:"",env:"production",sample:H,plugins:{},transport:{get:c,post:c}}},ln=function(n){var e=void 0===n?{}:n,r=e.createSender,t=void 0===r?function(n){return rn({size:20,endpoint:tn(n.domain),transport:n.transport})}:r,i=e.builder,o=void 0===i?G:i,u=e.createDefaultConfig,a=I({validateInitConfig:V,initConfigNormalizer:U,userConfigNormalizer:X,createSender:t,builder:o,createDefaultConfig:void 0===u?cn:u,createConfigManager:Y});return j(a),en(a),$(a),function(n,e){n.on("init",(function(){var r=[],t=function(t){t.forEach((function(t){var i=t.name;m(r,i)||(r.push(i),t.setup(n),e&&e(i,t.setup),n.destroyAgent.set(i,i,[function(){r=h(r,i),t.tearDown&&t.tearDown()}]))}))};n.provide("applyIntegrations",t);var i=n.config();i&&i.integrations&&t(i.integrations)}))}(a),a},sn=function(n){void 0===n&&(n={});var e=ln(n);return function(n){n.on("start",(function(){var e=n.config(),r=e.userId,t=e.sample,i=M(r,t,C,R,[function(){n.destroy()},function(e){n.destroyAgent.removeByEvType(e)}]);n.on("build",i)}))}(e),k(e),e},vn=sn();e.Ay=vn}}]);